(self.webpackChunk_name_=self.webpackChunk_name_||[]).push([[893],{2736:(t,e,s)=>{"use strict";s.d(e,{Z:()=>Ss});var i=s(7877),a=s.n(i),n=s(9566),o=s(1115),h=s(2012),r=s(1554),l=s(5256);function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const d=class{constructor(){let{precision:t=h.Wj.PRECISION,width:e=h.Wj.CONTENT_WIDTH,height:s=h.Wj.CONTENT_HEIGHT,useUUID:i=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,"NAMESPACE",{NS:"http://www.w3.org/2000/svg",XMLNS:"http://www.w3.org/2000/xmlns/",XLINK:"http://www.w3.org/1999/xlink"}),c(this,"ATTRIBUTE_OVERRIDES",{viewBox:"viewBox",preserveAspectRatio:"preserveAspectRatio",gradientUnits:"gradientUnits",gradientTransform:"gradientTransform",patternUnits:"patternUnits",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",maskUnits:"maskUnits"}),c(this,"svg",null),c(this,"precision",h.Wj.PRECISION),c(this,"width",h.Wj.CONTENT_WIDTH),c(this,"height",h.Wj.CONTENT_HEIGHT),c(this,"background",null),c(this,"backgroundEffect",null),c(this,"backgroundMasks",[]),c(this,"useUUID",!0),c(this,"uuids",{}),c(this,"contentDimensions",[0,0,1,1]),c(this,"fixNumber",(0,l.zG)(h.Wj.PRECISION)),c(this,"fixFloat",(0,l.zG)(h.Wj.TRANSFORM_PRECISION)),this.precision=t,this.width=e,this.height=s,this.useUUID=i,this.svg=this.createElement("svg",{version:"1.1",preserveAspectRatio:"xMidYMid meet"}),this.svg.setAttribute("xmlns",this.NAMESPACE.NS),this.svg.setAttribute("xmlns:xlink",this.NAMESPACE.XLINK),this.setDimensions(this.width,this.height)}uuid(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";return this.useUUID?(0,o.Z)():(void 0===this.uuids[t]&&(this.uuids[t]=0),this.uuids[t]++,this.uuids[t])}createElement(t){throw new Error("please implement function")}convertAttribute(t){return this.ATTRIBUTE_OVERRIDES[t]?this.ATTRIBUTE_OVERRIDES[t]:(0,n.Z)(t)}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this.createElement(t,e);return this.addChild(this.svg,s),s}setBackground(t){this.background=t}setBackgroundEffect(t){this.backgroundEffect=t}setBackgroundEffectPattern(t){this.backgroundEffectPattern=t}addChild(t,e){throw new Error("please implement function")}prependChild(t,e){throw new Error("please implement function")}removeChild(t,e){throw new Error("please implement function")}findTags(t){throw new Error("please implement function")}findID(t){throw new Error("please implement function")}addPath(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this.createElement("path",Object.assign({d:t},e));return this.addChild(this.svg,s),s}addRect(t,e,s,i,a){const n=this.createElement("rect",Object.assign({x:t,y:e,width:s,height:i},a));return this.addChild(this.svg,n),n}clearDefs(){const t=this.findTags("defs")[0];t&&this.removeChild(this.svg,t)}getElementById(t){return this.findID(t)}getDefs(){let t=this.findTags("defs")[0];return t||(t=this.prependChild(this.svg,this.createElement("defs"))),t}addColor(t){let{forceSingle:e=!1,aspectRatio:s=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t instanceof String||"string"==typeof t?t:e||!t.active||0===t.range?t.original:void 0!==t.radius&&null!==t.radius?this.addRadialGradient(t,s):this.addLinearGradient(t,s)}addDefinition(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=this.getDefs(),i=this.uuid("def");return this.setAttributes(t,{id:`def-${i}`,...e}),this.addChild(s,t),`#def-${i}`}addElementFromDefinition(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=this.createElement("use");return s.setAttributeNS(this.NAMESPACE.XLINK,"xlink:href",t),null!==e&&this.setAttributes(s,e),this.addChild(this.svg,s),s}createElementFromDefinition(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=this.createElement("use");return s.setAttributeNS(this.NAMESPACE.XLINK,"xlink:href",t),null!==e&&this.setAttributes(s,e),s}addLinearGradient(t){const e=this.getDefs(),s=this.uuid("gradient"),i=t.point1,a=t.point2,n=this.createElement("linearGradient",{id:`gradient-${s}`,gradientUnits:i?"userSpaceOnUse":"objectBoundingBox",x1:this.fixFloat(i?i.x:.5+.5*Math.cos(t.angle)),y1:this.fixFloat(i?i.y:.5+.5*Math.sin(t.angle)),x2:this.fixFloat(a?a.x:.5+.5*Math.cos(t.angle+Math.PI)),y2:this.fixFloat(a?a.y:.5+.5*Math.sin(t.angle+Math.PI))});return t.stops.forEach((t=>{const e=this.createElement("stop",{offset:this.fixFloat(t.offset),stopColor:t.color,stopOpacity:void 0===t.opacity?1:this.fixFloat(t.opacity)});this.addChild(n,e)})),this.addChild(e,n),`url(#gradient-${s})`}addRadialGradient(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=this.getDefs(),i=this.uuid("gradient"),a=t.point1,n=t.point2;let o=null;null!==e&&(o=`translate(0.5, 0.5) ${e>1?`scale(1, ${this.fixFloat(Number(e))})`:`scale(${this.fixFloat(Number(1/e))}, 1)`} translate(-0.5, -0.5)`);const h=Math.sqrt(.5),r=this.createElement("radialGradient",{id:`gradient-${i}`,gradientUnits:a?"userSpaceOnUse":"objectBoundingBox",gradientTransform:a?null:o,cx:this.fixFloat(a?a.x:.5+Math.cos(t.angle)*t.radius*h),cy:this.fixFloat(a?a.y:.5+Math.sin(t.angle)*t.radius*h),r:this.fixFloat(n?Math.sqrt((n.x-a.x)**2+(n.y-a.y)**2):.5+t.radius*h)});return t.stops.forEach((t=>{const e=this.createElement("stop",{offset:this.fixFloat(t.offset),stopColor:t.color,stopOpacity:void 0===t.opacity?1:this.fixFloat(t.opacity)});this.addChild(r,e)})),this.addChild(s,r),`url(#gradient-${i})`}addClipPath(t){const e=this.getDefs(),s=this.uuid("clip"),i=this.createElement("clipPath",{id:`clip-${s}`}),a=this.createElement("path",{d:t});return this.addChild(i,a),this.addChild(e,i),`url(#clip-${s})`}addBackgroundMask(){const t=this.getDefs(),e=this.uuid("mask"),s=this.createElement("mask",{id:`mask-${e}`}),i=this.createElement("rect",{x:this.viewBox[0],y:this.viewBox[1],width:this.viewBox[2],height:this.viewBox[3],fill:"#fff"});return this.backgroundMasks.push(i),this.addChild(s,i),this.addChild(t,s),`url(#mask-${e})`}addMask(){let{fill:t="#fff",fillBox:e=new r.Z(0,0,h.Wj.CONTENT_WIDTH,h.Wj.CONTENT_HEIGHT),elements:s=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getDefs(),a=this.uuid("mask"),n=e.clone().pad("-5%"),o=this.createElement("mask",{id:`mask-${a}`,x:this.fixNumber(n.x),y:this.fixNumber(n.y),width:this.fixNumber(n.w),height:this.fixNumber(n.h),maskUnits:"userSpaceOnUse",strokeWidth:0}),l=this.createElement("rect",{x:this.fixNumber(e.x),y:this.fixNumber(e.y),width:this.fixNumber(e.w),height:this.fixNumber(e.h),fill:t});return this.addChild(o,l),s.forEach((t=>{this.addChild(o,t)})),this.addChild(i,o),`url(#mask-${a})`}addClip(t,e,s,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.uuid("clip");const n=this.getDefs(),o=this.createElement("clipPath",{id:`clip-${a}`}),h=this.createElement("path",{d:`M${t},${e} L${t+s},${e} L${t+s},${e+i} L${t},${e+i} Z`});return this.addChild(o,h),this.addChild(n,o),`url(#clip-${a})`}setAttributes(t,e){throw new Error("please implement function")}getPathDescriptionFromShape(t){return t.getPathData({precision:this.precision})}empty(){this.background=null,this.backgroundEffect=null,this.backgroundEffectPattern=null,this.backgroundMasks.length=0}setDimensions(t,e){const s=h.Wj.CONTENT_WIDTH,i=h.Wj.CONTENT_HEIGHT;let a;a=t>e?[-(s*t/e-s)/2,0,s*t/e,i]:[0,-(i*e/t-i)/2,s,i*e/t],this.viewBox=a.map((t=>this.fixNumber(t))),this.setAttributes(this.svg,{viewBox:this.viewBox.join(" ")})}setContentDimensions(t){this.contentDimensions=[(t.x||0)/this.width,(t.y||0)/this.height,(t.w||0)/this.width,(t.h||0)/this.height]}getContentDimensions(){return this.contentDimensions}getTextWithPlaceholders(){let t={viewBox:this.getAttribute(this.svg,"viewBox")},e=null;if(this.setAttributes(this.svg,{viewBox:"{{VIEWBOX_X}} {{VIEWBOX_Y}} {{VIEWBOX_WIDTH}} {{VIEWBOX_HEIGHT}}",width:"{{WIDTH}}",height:"{{HEIGHT}}"}),this.backgroundMasks.forEach(((e,s)=>{t=Object.assign({[`mask${s}`]:{x:this.getAttribute(e,"x"),y:this.getAttribute(e,"y"),width:this.getAttribute(e,"width"),height:this.getAttribute(e,"height")}},t),this.setAttributes(e,{x:"{{BACKGROUND_X}}",y:"{{BACKGROUND_Y}}",width:"{{BACKGROUND_WIDTH}}",height:"{{BACKGROUND_HEIGHT}}"})})),this.backgroundEffect){t=Object.assign({backgroundEffect:{transform:this.getAttribute(this.backgroundEffect,"transform")}},t);const e=this.fixFloat(h.Wj.CONTENT_WIDTH/2),s=this.fixFloat(h.Wj.CONTENT_HEIGHT/2);this.setAttributes(this.backgroundEffect,{transform:`translate(${e}, ${s}) scale({{BACKGROUND_EFFECT_SCALE}}) translate(${-e}, ${-s})`})}if(this.backgroundEffectPattern&&(t=Object.assign({backgroundEffectPattern:{patternTransform:this.getAttribute(this.backgroundEffectPattern,"patternTransform")}},t),this.setAttributes(this.backgroundEffectPattern,{patternTransform:t.backgroundEffectPattern.patternTransform.replace(/scale\(.+?\)/i,"scale({{BACKGROUND_PATTERN_SCALE}})")})),this.background){t=Object.assign({background:{x:this.getAttribute(this.background,"x"),y:this.getAttribute(this.background,"y"),width:this.getAttribute(this.background,"width"),height:this.getAttribute(this.background,"height")}},t),this.setAttributes(this.background,{x:"{{BACKGROUND_X}}",y:"{{BACKGROUND_Y}}",width:"{{BACKGROUND_WIDTH}}",height:"{{BACKGROUND_HEIGHT}}"});const s=/^url\(#(.+?)\)$/.exec(this.getAttribute(this.background,"fill"));if(s&&s[1]){e=this.findID(s[1]);const i=this.getAttribute(e,"gradientTransform");t.gradientTransform=i,i&&this.setAttributes(e,{gradientTransform:i.replace(/scale\(.+?\)/i,"scale({{ASPECT_RATIO}})")})}}const s=this.getText();return this.setAttributes(this.svg,{viewBox:t.viewBox}),this.backgroundMasks.forEach(((e,s)=>{const i=t[`mask${s}`];this.setAttributes(e,{x:i.x,y:i.y,width:i.width,height:i.height})})),this.backgroundEffect&&this.setAttributes(this.backgroundEffect,{transform:t.backgroundEffect.transform}),this.backgroundEffectPattern&&this.setAttributes(this.backgroundEffectPattern,{transform:t.backgroundEffectPattern.patternTransform}),this.background&&this.setAttributes(this.background,{x:t.background.x,y:t.background.y,width:t.background.width,height:t.background.height}),e&&this.setAttributes(e,{gradientTransform:t.gradientTransform}),s}},u=class extends d{createElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=document.createElementNS(this.NAMESPACE.NS,t);return this.setAttributes(s,e),s}createTextElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return document.createTextNode(t)}addChild(t,e){return t.appendChild(e)}prependChild(t,e){return t.insertBefore(e,t.firstChild)}removeChild(t,e){return t.removeChild(e)}findTags(t){return this.svg.querySelectorAll(t)}findID(t){return this.svg.querySelectorAll(`#${t}`)}setAttributes(t,e){Object.keys(e).forEach((s=>{const i=e[s];if(null!==i)if(s.includes(":")){const e=this.convertAttribute(s.replace(/^.*?:/,""));/^xlink/.test(s)&&t.setAttributeNS(this.NAMESPACE.XLINK,e,String(i))}else t.setAttribute(this.convertAttribute(s),String(i))}))}getAttribute(t,e){return t.getAttributeNS(null,this.convertAttribute(String(e)))}empty(){super.empty(),this.svg.innerHTML=""}getText(){return this.svg.outerHTML}};function p(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class g{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;p(this,"indent","\t"),this.name=t,this.attributes={},this.children=[]}empty(){this.children.length=0}setAttribute(t,e){this.attributes[t]=e}setAttributeNS(t,e,s){this.attributes[e]=s}get hasChildren(){return this.children&&this.children.length}get firstChild(){return this.children[0]}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const e=this.name,s=Object.keys(this.attributes).reduce(((t,e)=>("id"!==e&&t.push(`${e}="${this.attributes[e]}"`),t)),[]);this.attributes.id&&s.unshift(`id="${this.attributes.id}"`);const i=s.length?` ${s.join(" ")}`:"",a=this.children.reduce(((e,s)=>`${e}${s.getText(t+1)}`),"");return a?`${this.indent.repeat(t)}<${e}${i}>\n${a}${this.indent.repeat(t)}</${e}>\n`:`${this.indent.repeat(t)}<${e}${i}></${e}>\n`}}class m extends g{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super("text"),p(this,"textContent",null),this.textContent=t}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return`${this.indent.repeat(t)}${this.textContent}\n`}}const f=class extends d{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(Object.assign({svg:null},t)),t.svg&&(this.copyFromDom(t.svg.svg,this.svg,this),t.svg.background)){const e=t.svg.getAttribute(t.svg.background,"id");this.background=this.findID(e)}}copyFromDom(t,e,s){[...t.childNodes].forEach((t=>{if(t.nodeType===Node.ELEMENT_NODE){const i={};for(const e of t.attributes)i[e.name]=e.value;const a=s.createElement(t.nodeName,i);s.addChild(e,a),this.copyFromDom(t,a,s)}}))}createElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new g(t);return this.setAttributes(s,e),s}createTextElement(){return new m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}addChild(t,e){return t.children.push(e),e}prependChild(t,e){return t.children.unshift(e),e}removeChild(t,e){const s=t.children.indexOf(e);return-1!==s&&(t.children=t.children.splice(s,1)),e}filterAll(t){const e=[],s=i=>{t(i)&&e.push(i),i.hasChildren&&i.children.filter(s)};return this.svg.children.filter(s),e}findTags(t){return this.filterAll((e=>e.name===t))}findID(t){return this.filterAll((e=>e.attributes.id===t))[0]}setAttributes(t,e){Object.keys(e).forEach((s=>{const i=e[s];null!==i&&(t.attributes[this.convertAttribute(s)]=String(i))}))}getAttribute(t,e){return t.attributes[this.convertAttribute(String(e))]}empty(){super.empty(),this.svg.empty()}getText(){return this.svg.getText()}};function y(t,e,s){if(!t)return!0;const i="string"==typeof e?e:e[s],a=`${t.toLowerCase()}${t.toUpperCase()}`.split("").sort().map((t=>t.codePointAt(0)));let n=0;const o=[];function h(){for(o.length=0;n<i.length;){let t=i.codePointAt(n);if(92===t&&n<i.length-1&&44===i.codePointAt(n+1)&&n<i.length-2&&44===i.codePointAt(n+2))n+=2,t=44;else{if(44===t)return n++,o;if(n===i.length-1)return o.push(t),n++,o.length?o:null}o.push(t),n++}return null}function r(t,e){return!!e&&(1===e.length?t===e[0]:2===e.length?t>=e[0]&&t<=e[1]:e.length>2&&e.includes(t))}let l=h();for(let t=0;t<a.length;t++){const e=a[t];if(!r(e,l)){for(;!r(e,l)&&n<i.length;)l=h();if(null===l)break;if(!r(e,l)){l=null;break}}}return null!==l}var v=s(6270),x=s(3207),b=s(9913),w=s(328),S=s(8200),k=s(6793);function B(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const C=class{constructor(t){B(this,"name","draw error"),B(this,"message",null),B(this,"stack",null),this.message=t}};var M=s(6139),T=s(6525),Z=s(2247),I=s(9732),E=s(6413);const N=class extends v.Z{constructor(t){var e;super(Object.assign({active:(new T.Z).enableInteraction(),strength:(new Z.Z).set(.3).enableInteraction(),style:new I.Z([0,1,2,3]).randomizeBetweenOptions([0,1]).enableInteraction().setOrder(2).setLabel("style",["light","dark","white","black"])},t)),(e="group")in this?Object.defineProperty(this,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[e]=null}getHex(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getColor(t.color),a=E.Z.hex2hcl(i),n=this.getAlpha(),o=null===e?1-n+n*this.state.strength.value:e;switch(a[0]=t.saturation.value?a[0]:360*t.hue.value,this.state.style.value){case 0:return E.Z.hcl2hex(...E.Z.hcl2derivative(a,[60,-30,30+s],-o));case 1:return E.Z.hcl2hex(...E.Z.hcl2derivative(a,[30,30,15+s],o));case 2:return"#fff";default:return"#000"}}getAlpha(){return this.state.strength.value}getGroup(t){let{parent:e=null,shape:s=null,strokeWidth:i=null,strokeLinejoin:a=null,strokeLinecap:n=null,strokeMiterlimit:o=null,useMask:h=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.group=h?t.createElement("g",{mask:t.addMask({fill:"#000",elements:[t.createElement("path",{d:t.getPathDescriptionFromShape(s),stroke:"#fff",strokeWidth:i,strokeLinecap:n,strokeLinejoin:a,strokeMiterlimit:o,fill:"#fff"})]})}):t.createElement("g"),t.addChild(e,this.group),this.group}getColor(t){return t instanceof String||"string"==typeof t?t:t.original}},O=class extends x.Z{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.value=t}clone(){const t=new this.constructor(this.value);return super.cloneVariables(t),t}set(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t||(this.value=t),this}clear(){this.value.length=0}add(t){this.value.push(t)}get(t){return this.value[t]}},$=class extends x.Z{constructor(t){super(),this.callback=t}clone(){const t=new this.constructor(this.value);return super.cloneVariables(t),t}randomize(){this.callback()}};var L=s(8323);function A(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const P=(0,l.AN)(3),D=class extends N{constructor(t){const e=200;let s=0;super(Object.assign({circleX:new O,circleY:new O,circleR:new O(Array(e).fill(0).map((()=>P(s++/e)))),circleGradient:new O((0,L.Z)(Array(e).fill(0).map(((t,e)=>e%5)))),detail:new Z.Z(0,1).randomizeBetweenOptions([.05,.35,.65]).enableInteraction().setOrder(0).setLabel("detail"),variation:new Z.Z(0,1).randomizeBetweenOptions([.15,.35,.65]).enableInteraction().setOrder(3).setLabel("variation"),random:new $((()=>{this.initRandomValues()})).enableInteraction().setOrder(4).setLabel("randomize")},t)),A(this,"numCircles",null),A(this,"numGradients",null),this.numCircles=e,this.numGradients=5,this.state.saved||(this.initRandomValues(),this.state.style.set(0))}initRandomValues(){let t=0;this.state.circleX.set(Array(this.numCircles).fill(0).map((()=>P(Math.random())))),this.state.circleY.set(Array(this.numCircles).fill(0).map((()=>P(Math.random())))),this.state.circleR.set(Array(this.numCircles).fill(0).map((()=>P(t++/this.numCircles)))),this.state.circleGradient.set((0,L.Z)(Array(this.numCircles).fill(0).map(((t,e)=>e%this.numGradients))))}draw(t,e){const{x:s,y:i,width:a,height:n,originalColor:o}=e;if(!this.state.active.value||!this.state.strength.value)return;this.numCircles>this.state.circleR.value.length&&this.initRandomValues();const r=this.getGroup(t,e),l=[];for(let e=0;e<this.numGradients;e++){const s=this.getHex(o,(e+1)/this.numGradients,15),i=e/(this.numGradients-1),a=[{color:s,offset:i},{offset:1,color:s,opacity:1===i?1:0}];0!==i&&a.unshift({color:s,offset:0}),l.push(t.addRadialGradient({angle:0,radius:0,stops:a},1))}const c=this.state.detail.value,d=(a*n)**.5*.65,u=Math.floor((this.numCircles-this.numGradients)*(1-c)),p=this.state.variation.value,g=[];for(let t=u;t<this.numCircles;t++){const e={cx:s+this.state.circleX.value[t]*a,cy:i+this.state.circleY.value[t]*n,r:Math.max(h.Wj.MIN_PATTERN_WIDTH/4,this.state.circleR.value[t]**(16*p)*d*(.75*p+(1-c)**2*.25)),gradientIndex:t>this.numCircles-this.numGradients?t-this.numCircles+this.numGradients:this.state.circleGradient.value[t],opacity:(1-.5*this.state.circleR.value[t])*this.state.strength.value};g.push(e)}g.sort(((t,e)=>t.gradientIndex-e.gradientIndex)).forEach((e=>t.addChild(r,t.createElement("circle",{cx:t.fixNumber(e.cx),cy:t.fixNumber(e.cy),r:t.fixNumber(e.r),fill:l[e.gradientIndex],fillOpacity:t.fixNumber(e.opacity)}))))}};var z=s(4632),F=s(9955);function _(t){if(!t)return null;const e={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},s=[];return t.replace(h.Wj.PATH_COMMANDS,((t,i,a)=>{const n=[];let o=i.toLowerCase(),r=i;if(a.replace(h.Wj.PATH_VALUES,((t,e)=>{e&&n.push(Number(e))})),"m"===o&&n.length>2&&(s.push([r].concat(n.splice(0,2))),o="l",r="m"===r?"l":"L"),"r"===o)s.push([r].concat(n));else for(;n.length>=e[o]&&(s.push([r].concat(n.splice(0,e[o]))),e[o]););})),s}function R(t,e){const s=[];for(let i=0,a=t.length;a-2*!e>i;i+=2){const n=[{x:Number(t[i-2]),y:Number(t[i-1])},{x:Number(t[i]),y:Number(t[i+1])},{x:Number(t[i+2]),y:Number(t[i+3])},{x:Number(t[i+4]),y:Number(t[i+5])}];e?i?a-4===i?n[3]={x:Number(t[0]),y:Number(t[1])}:a-2===i&&(n[2]={x:Number(t[0]),y:Number(t[1])},n[3]={x:Number(t[2]),y:Number(t[3])}):n[0]={x:Number(t[a-2]),y:Number(t[a-1])}:a-4===i?n[3]=n[2]:i||(n[0]={x:Number(t[i]),y:Number(t[i+1])}),s.push(["C",(-n[0].x+6*n[1].x+n[2].x)/6,(-n[0].y+6*n[1].y+n[2].y)/6,(n[1].x+6*n[2].x-n[3].x)/6,(n[1].y+6*n[2].y-n[3].y)/6,n[2].x,n[2].y])}return s}const j=Math.PI;function W(t){const e=function(t){let e=t;e&&e.length||(e=[["M",0,0]]);let s=[],i=0,a=0,n=0,o=0,h=0;"M"===e[0][0]&&(i=Number(e[0][1]),a=Number(e[0][2]),n=i,o=a,h++,s[0]=["M",i,a]);const r=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase();let l,c,d;for(let t=h;t<e.length;t++){l=[],s.push(l),c=e[t];const h=c[0].toUpperCase();if(c[0]!==h)switch(l[0]=h,h){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=Number(c[6]+i),l[7]=Number(c[7]+a);break;case"V":l[1]=Number(c[1])+a;break;case"H":l[1]=Number(c[1])+i;break;case"R":d=[i,a].concat(c.slice(1));for(let t=2,e=d.length;t<e;t++)d[t]=Number(d[t])+i,d[++t]=Number(d[t])+a;s.pop(),s=s.concat(R(d,r));break;case"M":n=Number(c[1])+i,o=Number(c[2])+a;default:for(let t=1;t<c.length;t++)l[t]=Number(c[t])+(t%2?i:a)}else if("R"===c[0])d=[i,a].concat(c.slice(1)),s.pop(),s=s.concat(R(d,r)),l=["R"].concat(c.slice(-2));else for(let t=0;t<c.length;t++)l[t]=c[t];switch(l[0]){case"Z":i=n,a=o;break;case"H":i=l[1];break;case"V":a=l[1];break;case"M":n=l[l.length-2],o=l[l.length-1];default:i=l[l.length-2],a=l[l.length-1]}}return s}(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=[];let a="",n="";const o=(t,e,s)=>{let i,a,n=t;if(!n)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(n[0]in{T:1,Q:1}||(e.qx=e.qy=null),n[0]){case"M":e.X=n[1],e.Y=n[2];break;case"A":n=["C"].concat(H.apply(0,[e.x,e.y].concat(n.slice(1))));break;case"S":"C"===s||"S"===s?(i=2*e.x-e.bx,a=2*e.y-e.by):(i=e.x,a=e.y),n=["C",i,a].concat(n.slice(1));break;case"T":"Q"===s||"T"===s?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),n=["C"].concat(U(e.x,e.y,e.qx,e.qy,n[1],n[2]));break;case"Q":e.qx=n[1],e.qy=n[2],n=["C"].concat(U(e.x,e.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"].concat(G(e.x,e.y,n[1],n[2]));break;case"H":n=["C"].concat(G(e.x,e.y,n[1],e.y));break;case"V":n=["C"].concat(G(e.x,e.y,e.x,n[1]));break;case"Z":n=["C"].concat(G(e.x,e.y,e.X,e.Y))}return n},h=(t,e)=>{let s=e;if(t[s].length>7){t[s].shift();const e=t[s];for(;e.length;)i[s]="A",t.splice(s++,0,["C"].concat(e.splice(0,6)));t.splice(s,1)}},r=(t,e,s)=>{t&&"M"===t[s][0]&&(e.bx=0,e.by=0,e.x=t[s][1],e.y=t[s][2])};for(let t=0;t<e.length;t++){e[t]&&(a=e[t][0]),"C"!==a&&(i[t]=a,t&&(n=i[t-1])),e[t]=o(e[t],s,n),"A"!==i[t]&&"C"===a&&(i[t]="C"),h(e,t),r(e,s,t);const l=e[t],c=l.length;s.x=l[c-2],s.y=l[c-1],s.bx=parseFloat(l[c-4])||s.x,s.by=parseFloat(l[c-3])||s.y}return e}function G(t,e,s,i){return[t,e,s,i,s,i]}function U(t,e,s,i,a,n){const o=1/3,h=2/3;return[o*t+h*s,o*e+h*i,o*a+h*s,o*n+h*i,a,n]}function H(t,e,s,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,r=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0;const c=120*j/180,d=j/180*Number(a);let u,p,g,m,f,y=[],v=t,x=e,b=s,w=i,S=h,k=r;const B=(t,e,s)=>({x:t*Math.cos(s)-e*Math.sin(s),y:t*Math.sin(s)+e*Math.cos(s)});if(l)p=l[0],g=l[1],m=l[2],f=l[3];else{u=B(v,x,-d),v=u.x,x=u.y,u=B(S,k,-d),S=u.x,k=u.y;const t=(v-S)/2,e=(x-k)/2;let s=t*t/(b*b)+e*e/(w*w);s>1&&(s=Math.sqrt(s),b*=s,w*=s);const i=b*b,a=w*w,h=(n===o?-1:1)*Math.sqrt(Math.abs((i*a-i*e*e-a*t*t)/(i*e*e+a*t*t)));m=h*b*e/w+(v+S)/2,f=h*-w*t/b+(x+k)/2,p=Math.asin(((x-f)/w).toFixed(9)),g=Math.asin(((k-f)/w).toFixed(9)),p=v<m?j-p:p,g=S<m?j-g:g,p<0&&(p=2*j+p),g<0&&(g=2*j+g),o&&p>g&&(p-=2*j),!o&&g>p&&(g-=2*j)}let C=g-p;if(Math.abs(C)>c){const t=g,e=S,s=k;g=p+c*(o&&g>p?1:-1),S=m+b*Math.cos(g),k=f+w*Math.sin(g),y=H(S,k,b,w,a,0,o,e,s,[g,t,m,f])}C=g-p;const M=Math.cos(p),T=Math.sin(p),Z=Math.cos(g),I=Math.sin(g),E=Math.tan(C/4),N=4/3*b*E,O=4/3*w*E,$=[v,x],L=[v+N*T,x-O*M],A=[S+N*I,k-O*Z],P=[S,k];if(L[0]=2*$[0]-L[0],L[1]=2*$[1]-L[1],l)return[L,A,P].concat(y);y=[L,A,P].concat(y).join().split(",");const D=[];for(let t=0,e=y.length;t<e;t++)D[t]=t%2?B(y[t-1],y[t],d).y:B(y[t],y[t+1],d).x;return D}function V(t){if(!t)return new r.Z;const e=W(t);let s,i=0,a=0,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,h=Number.MAX_VALUE,l=-Number.MAX_VALUE;for(let t=0;t<e.length;t++)if(s=e[t],"M"===s[0])i=s[1],a=s[2],n=Math.min(i,n),h=Math.min(a,h),o=Math.max(i,o),l=Math.max(a,l);else{if(i<n||a<h||s[1]<n||s[2]<h||s[3]<n||s[4]<h||s[5]<n||s[6]<h||i>o||a>l||s[1]>o||s[2]>l||s[3]>o||s[4]>l||s[5]>o||s[6]>l)if(s[1]<i!=s[1]<s[5]&&s[3]<i!=s[3]<s[5]&&s[2]<a!=s[2]<s[6]&&s[4]<a!=s[4]<s[6])n=Math.min(i,s[5],n),h=Math.min(a,s[6],h),o=Math.max(i,s[5],o),l=Math.max(a,s[6],l);else{const t=X(i,a,s[1],s[2],s[3],s[4],s[5],s[6]);n=Math.min(t.min.x,n),h=Math.min(t.min.y,h),o=Math.max(t.max.x,o),l=Math.max(t.max.y,l)}i=s[5],a=s[6]}return new r.Z(n,h,o-n,l-h)}function q(t,e,s,i,a,n,o,h,r){const l=1-r;return{x:l**3*t+l**2*3*r*s+3*l*r*r*a+r**3*o,y:l**3*e+l**2*3*r*i+3*l*r*r*n+r**3*h}}function X(t,e,s,i,a,n,o,h){let r,l=a-2*s+t-(o-2*a+s),c=2*(s-t)-2*(a-s),d=t-s,u=(-c+Math.sqrt(c*c-4*l*d))/2/l,p=(-c-Math.sqrt(c*c-4*l*d))/2/l;const g=[e,h],m=[t,o];return Math.abs(u)>"1e12"&&(u=.5),Math.abs(p)>"1e12"&&(p=.5),u>0&&u<1&&(r=q(t,e,s,i,a,n,o,h,u),m.push(r.x),g.push(r.y)),p>0&&p<1&&(r=q(t,e,s,i,a,n,o,h,p),m.push(r.x),g.push(r.y)),l=n-2*i+e-(h-2*n+i),c=2*(i-e)-2*(n-i),d=e-i,u=(-c+Math.sqrt(c*c-4*l*d))/2/l,p=(-c-Math.sqrt(c*c-4*l*d))/2/l,Math.abs(u)>"1e12"&&(u=.5),Math.abs(p)>"1e12"&&(p=.5),u>0&&u<1&&(r=q(t,e,s,i,a,n,o,h,u),m.push(r.x),g.push(r.y)),p>0&&p<1&&(r=q(t,e,s,i,a,n,o,h,p),m.push(r.x),g.push(r.y)),{min:{x:Math.min(...m),y:Math.min(...g)},max:{x:Math.max(...m),y:Math.max(...g)}}}var Y=s(2953);function K(t){const e=[];let s=[];return t.forEach((t=>{s.push(t),/z/i.test(t[0])&&(e.push(s.slice()),s=[])})),s.length&&e.push(s),e}s(5389);const Q=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,1,0,0];this.array=new Float32Array(t)}apply(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y.Z;return e.x=this.array[0]*t.x+this.array[2]*t.y+this.array[4],e.y=this.array[1]*t.x+this.array[3]*t.y+this.array[5],e}applyScale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y.Z;return e.x=this.array[0]*t.x+this.array[2]*t.y,e.y=this.array[1]*t.x+this.array[3]*t.y,e}applyScaleX(t){return this.array[0]*t}translate(t,e){return this.array[4]+=this.array[0]*t+this.array[2]*e,this.array[5]+=this.array[1]*t+this.array[3]*e,this}scale(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=null===e?t:e;return this.array[0]*=t,this.array[1]*=t,this.array[2]*=s,this.array[3]*=s,this}rotate(t){const e=Math.sin(t),s=Math.cos(t),i=this.array[0],a=this.array[1],n=this.array[2],o=this.array[3];return this.array[0]=i*s+n*e,this.array[1]=a*s+o*e,this.array[2]=i*-e+n*s,this.array[3]=a*-e+o*s,this}identity(){return this.array[0]=1,this.array[1]=0,this.array[2]=0,this.array[3]=1,this.array[4]=0,this.array[5]=0,this}multiply(t){const e=t.array,s=this.array[0],i=this.array[1],a=this.array[2],n=this.array[3],o=this.array[4],h=this.array[5],r=e[0],l=e[1],c=e[2],d=e[3],u=e[4],p=e[5];return this.array[0]=s*r+a*l,this.array[1]=i*r+n*l,this.array[2]=s*c+a*d,this.array[3]=i*c+n*d,this.array[4]=s*u+a*p+o,this.array[5]=i*u+n*p+h,this}clone(){return new this.constructor(this.array)}copy(t){const e=t.array;return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this.array[4]=e[4],this.array[5]=e[5],this}equals(t){return Boolean(t)&&[...this.array].every(((e,s)=>e===t.array[s]))}toString(){return`MAT2D: ${this.array.map((t=>t.toFixed(3))).join(", ")}`}};function J(t,e,s){const i=/[ml]/i;let a=t.length;const n=/z/i.test(t[t.length-1][0]);n&&(a-=1);for(let n=0;n<a;n++){const o=t[(n-1+a)%a],h=t[n%a],r=t[(n+1)%a],l=h[0],c=r[0];if(i.test(l)&&i.test(c)){const s=new Y.Z(o[o.length-2],o[o.length-1]),i=new Y.Z(h[1],h[2]),a=new Y.Z(r[1],r[2]);e(t[n],i,s,a,n)}else s&&s(t[n])}n&&s&&s(["Z"])}function tt(t,e,s){return t.x*(s.y-e.y)+e.x*(t.y-s.y)+s.x*(e.y-t.y)<0}function et(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=[],i=new Y.Z,a=new Y.Z,n=new Y.Z;for(let o=0;o<e.length;o++){const h=e[o],r=h.length;if(/h/i.test(h[0]))t.apply(a.set(h[1],i.y),n),s[o]=["L",n.x,n.y];else if(/v/i.test(h[0]))t.apply(a.set(i.x,h[1]),n),s[o]=["L",n.x,n.y];else if(/a/i.test(h[0]))s[o]=e[o].slice(),t.applyScale(a.set(h[1],h[2]),n),s[o][1]=n.x,s[o][2]=n.y,t.apply(a.set(h[6],h[7]),n),s[o][6]=n.x,s[o][7]=n.y;else if(r>2){s[o]=[e[o][0]];for(let e=1;e<r;e+=2)t.apply(a.set(h[e],h[e+1]),n),s[o][e]=n.x,s[o][e+1]=n.y}else s[o]=[...e[o]];r>2&&i.copy(n)}return s}function st(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const it=class{constructor(t){st(this,"isSame",!1),st(this,"data",[]),st(this,"worldData",[]),t instanceof Array?this.data=t:("string"==typeof t||t instanceof String)&&(this.data=_(t))}clone(){return new this.constructor(this.cloneData())}cloneData(){const t=[];return this.data.forEach((e=>{e instanceof Array&&t.push(e.slice())})),t}getDistance(t,e,s,i){return((i-e)**2+(s-t)**2)**.5}cleanData(t){const e=[];let s=[],i=0,a=0,n=0,o=0,h=0,r=null;for(;n<t.length;){switch(r=t[n],r[0].toUpperCase()){case"C":if(o=this.getDistance(i,a,r[1],r[2]),h=this.getDistance(r[3],r[4],r[5],r[6]),(o<5||h<5)&&Math.abs(o-h)<.5){if(e.push(["L",r[5],r[6]]),i=r[5],a=r[6],n<t.length-1&&"S"===t[n+1][0])for(n++;n<t.length&&(r=t[n],"S"===r[0]);)e.push(["L",r[3],r[4]]),i=r[3],a=r[4],n++}else s=r.slice(),e.push(s),i=r[5],a=r[6];break;case"H":e.push(r),i=r[1];break;case"V":e.push(r),a=r[1];break;case"Z":e.push(r);break;default:e.push(r),i=r[r.length-2],a=r[r.length-1]}n++}return e}toSVG(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.Wj.PRECISION,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=t.map((t=>{if("A"===t[0].toUpperCase()){const s=[1,2,6,7],i=t.map(((t,i)=>-1===s.indexOf(i)?t:(0,l.YV)(t,e)));return`${i[0]}${i[1]},${i[2]} ${i[3]} ${i[4]} ${i[5]} ${i[6]},${i[7]}`}return`${t[0]}${t.slice(1).map((t=>(0,l.YV)(t,e))).join(",")}`})).join(" ");return s?`<path d="${i}" />`:i}getData(t){return this.toSVG(this.data,t)}toDataString(t,e){return this.worldData=et(t,this.data),this.toSVG(this.worldData,e)}isCompletelyConvex(){return function(t){let e=!1;return J(t,((t,s,i,a)=>{e=e&&tt(i,s,a)})),e}(this.data)}rotate(t){return this.data=et((new Q).rotate(t),this.data),this}translate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.data=et((new Q).translate(t,e),this.data),this}scale(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=null===e?t:e;return this.data=et((new Q).scale(t,s),this.data),this}applyMatrix(t){return this.data=et(t,W(this.data)),this}getMaxRadius(){return class{static applyRoundedCorners(t,e){const s=t.length,i=[];for(let a=0;a<s;a++){const n=t[(a-1+s)%s],o=t[a%s],h=t[(a+1)%s];i.push(this.getRoundedSegment(o,n,h,e))}return i[0]=i[0].replace(/^L/,"M"),i.push("z"),i.join(" ")}static getMaximumRadiusForAllPoints(t){let e=Number.MAX_VALUE;const s=t.length;for(let i=0;i<s;i++){const a=t[(i-1+s)%s],n=t[i%s],o=t[(i+1)%s],h=n.x-a.x,r=n.y-a.y,l=n.x-o.x,c=n.y-o.y,d=(Math.atan2(r,h)-Math.atan2(c,l))/2,u=Math.abs(Math.tan(d));let p=e/u;const g=this.getLength(h,r),m=this.getLength(l,c),f=Math.min(g,m)/2;p>f&&(p=f,e=Math.min(e,f*u))}return e}static getRoundedSegment(t,e,s,i){let a=i;const n=t.x-e.x,o=t.y-e.y,h=t.x-s.x,r=t.y-s.y,l=(Math.atan2(o,n)-Math.atan2(r,h))/2,c=Math.abs(Math.tan(l));let d=a/c;const u=this.getLength(n,o),p=this.getLength(h,r),g=Math.min(u,p)/2;d>g&&(d=g,a=g*c);const m=this.getProportionalPoint(t,d,u,n,o),f=this.getProportionalPoint(t,d,p,h,r),y=2*t.x-m.x-f.x,v=2*t.y-m.y-f.y,x=this.getLength(y,v),b=this.getLength(d,a),w=this.getProportionalPoint(t,b,x,y,v);let S=Math.atan2(m.y-w.y,m.x-w.x);const k=Math.atan2(f.y-w.y,f.x-w.x);let B=k-S;B<0&&(S=k,B=-B),B>Math.PI&&(B=Math.PI-B);const C=this.isConvex(e,t,s);return[`L${m.x},${m.y}`,`A${a},${a} 0 0 ${C?1:0} ${f.x} ${f.y}`,`L${f.x},${f.y}`].join(" ")}static getLength(t,e){return Math.sqrt(t*t+e*e)}static getProportionalPoint(t,e,s,i,a){const n=e/s;return new Y.Z(t.x-i*n,t.y-a*n)}static isConvex(t,e,s){return t.x*(s.y-e.y)+e.x*(t.y-s.y)+s.x*(e.y-t.y)<0}}.getMaximumRadiusForAllPoints(this.getPoints())}getMaxLineLength(){const t=this.getPoints(),e=t.length;let s=0;for(let i=0;i<e;i++){const a=t[i],n=t[(i+1)%e],o=n.x-a.x,h=n.y-a.y;s=Math.max(s,Math.sqrt(o**2+h**2))}return s}getMaxCurveRadius(){const t=[];return J(this.data,((e,s,i,a)=>{const n=z.Z.getAngleBetweenPoints(i,s,a)/2,o=Math.sqrt((s.x-i.x)**2+(s.y-i.y)**2)*Math.abs(Math.sin(n));t.push(o)})),t.length?Math.min(...t)/2:0}getPoints(){const t=[],e=new Y.Z;for(let s=0;s<this.data.length;s++){const i=this.data[s],a=i.length;/h/i.test(i[0])?t.push(new Y.Z(i[1],e.y)):/v/i.test(i[0])?t.push(new Y.Z(e.x,i[1])):/a/i.test(i[0])?t.push(new Y.Z(i[6],i[7])):a>2&&t.push(new Y.Z(i[a-2],i[a-1])),a>2&&e.copy(t[t.length-1])}return t}reverse(){return this.data=function(t){const e=[],s=function(t){const e=[],s=new Y.Z,i=new Y.Z,a=new Y.Z,n=new Y.Z;for(let o=0;o<t.length;o++){const h=t[o];switch(/mlhvacqst/.test(h[0])?n.copy(s):n.set(0,0),h[0].toUpperCase()){case"M":e.push(["M",n.x+h[1],n.y+h[2]]);break;case"L":e.push(["L",n.x+h[1],n.y+h[2]]);break;case"H":e.push(["L",h[1],n.y+s.y]);break;case"V":e.push(["L",n.x+s.x,h[1]]);break;case"Q":a.set(n.x+h[1],n.x+h[2]),e.push(["Q",n.x+h[1],n.y+h[2],n.x+h[3],n.y+h[4]]);break;case"T":i.set(n.x+s.x+(s.x-a.x),n.y+s.y+(s.y-a.y)),a.copy(i),e.push(["Q",i.x,i.y,n.x+h[1],n.y+h[2]]);break;case"C":a.set(n.x+h[3],n.x+h[4]),e.push(["C",n.x+h[1],n.y+h[2],a.x,a.y,n.x+h[5],n.y+h[6]]);break;case"S":i.set(n.x+s.x+(s.x-a.x),n.y+s.y+(s.y-a.y)),a.set(n.x+h[1],n.x+h[2]),e.push(["C",i.x,i.y,a.x,a.y,n.x+h[3],n.y+h[4]]);break;case"A":e.push(["A",h[1],h[2],h[3],h[4],h[5],n.x+h[6],n.y+h[7]]);break;case"Z":e.push(["Z"]);break;default:throw new Error(`invalid command: ${h.join(" ")}`)}const r=e[o].length;r>2&&s.set(e[o][r-2],e[o][r-1])}return e}(t),i=K(s),a=new Y.Z;return i.forEach((t=>{const s=t;let i=!1,n=null,o=null;if(!(s.length<2)){/z/i.test(s[s.length-1][0])?(i=!0,o=s[0]):o=s[s.length-1];for(let t=s.length-2;t>=0;t--){const i=s[t];switch(a.set(i[i.length-2],i[i.length-1]),o[0]){case"M":e.push(["M",a.x,a.y]);break;case"L":e.push(["L",a.x,a.y]);break;case"A":n=0===o[5]?1:0,e.push(["A",o[1],o[2],o[3],o[4],n,a.x,a.y]);break;case"C":e.push(["C",o[3],o[4],o[1],o[2],a.x,a.y]);break;case"Q":e.push(["Q",o[1],o[2],a.x,a.y]);break;default:throw new Error(`invalid command for reversing path: ${o[0]}`)}o=i}i&&e.push("Z")}})),e}(this.data),this}getBoundingBox(){return V(this.data)}isClockwise(){const t=this.getPoints();let e=0;for(let s=0;s<t.length;s++){const i=t[s],a=t[(s+1)%t.length];e+=(a.x-i.x)*(a.y+i.y)}return e>0}},at=class extends N{constructor(t){super(Object.assign({rotation:new F.Z(0,360,{interval:5}).randomizeBetweenOptions([0,45,90,135,180,225,270,315]).setRealValueOnLabel().enableInteraction(),detail:new F.Z(1,100).randomizeBetweenOptions([1,10,50]).enableInteraction(),size:new Z.Z(0,1).set(.5).setLabel("size").enableInteraction()},t)),1===this.state.detail.value?this.state.size.set(1):2===this.state.detail.value&&this.state.size.set(.5)}draw(t,e){const{x:s,y:i,cx:a,cy:n,width:o,height:h,originalColor:r}=e;if(!this.state.active.value||!this.state.strength.value)return;const l=this.getGroup(t,e),c=this.getHex(r),d=Math.sqrt((o/2+Math.abs(s+o/2-a))**2+(h/2+Math.abs(i+h/2-n))**2),u=this.state.detail.value,p=Math.min(Math.PI/u*(.025+.95*this.state.size.value),Math.PI/2),g=[["M",a,n]];for(let t=0;t<u;t++){const e=t/u*Math.PI*2+z.Z.deg2rad(this.state.rotation.value),s=z.Z.rad2deg(e);g.push(["L",a+Math.cos(e-p)*d,n+Math.sin(e-p)*d],["A",d,d,s,0,1,a+Math.cos(e+p)*d,n+Math.sin(e+p)*d],["L",a,n])}g.push(["Z"]);const m=new it(g);t.addChild(l,t.createElement("path",{d:m.getData(),fill:c,fillOpacity:t.fixNumber(this.getAlpha())}))}};var nt=s(1429);function ot(t){return t*t}function ht(t,e,s){const i=ot(e[0])+ot(e[1]),a=(ot(t[0])+ot(t[1])-i)/2,n=(i-ot(s[0])-ot(s[1]))/2,o=(t[0]-e[0])*(e[1]-s[1])-(e[0]-s[0])*(t[1]-e[1]);return!(Math.abs(o)<1e-14)&&[(a*(e[1]-s[1])-n*(t[1]-e[1]))/o,((t[0]-e[0])*n-(e[0]-s[0])*a)/o]}const rt=class extends N{constructor(t){super(Object.assign({curve:new Z.Z(-1,1).randomizeBetweenOptions([-.5,-.35,-.15,0,.15,.35,.5]).enableInteraction(),position:new Z.Z(.25,.75).set(.5).enableInteraction(),style:new nt.Z(0)},t))}draw(t,e){const{x:s,y:i,width:a,height:n,originalColor:o}=e;if(!this.state.active.value||!this.state.strength.value)return;const h=this.getGroup(t,e),r=Math.abs(this.state.curve.value)<.01,l=this.state.position.value,c=r?0:Math.min(a,n)*this.state.curve.value*.35,d=n*l-c,u=n*l,p=u-ht([0,d],[.5*a,u],[a,d])[1],g=this.getColor(o.color),m=E.Z.hex2hcl(g),f=E.Z.hcl2hex(...E.Z.hcl2derivative(m,[60,-30,45],-1)),y=E.Z.hcl2hex(...E.Z.hcl2derivative(m,[15,-30,45],-1)),v=t.addLinearGradient({angle:Math.PI/2,stops:[{color:f,offset:0,opacity:this.state.strength.value},{color:y,offset:1,opacity:0}]},1);if(r)t.addChild(h,t.createElement("rect",{x:t.fixNumber(s),y:t.fixNumber(i),width:t.fixNumber(a),height:t.fixNumber(n*l),fill:v}));else{const e=new it([["M",s,i],["L",s,i+d],["A",p,p,0,0,c<0?1:0,s+a,i+d],["L",s+a,i],["Z"]]);t.addChild(h,t.createElement("path",{d:e.getData(),fill:v}))}}},lt=class extends N{constructor(t){var e;super(Object.assign({detail:new Z.Z(0,1).setLabel("detail").randomizeBetweenOptions([.85,.9]).enableInteraction(),rotation:new F.Z(0,360,{interval:5}).randomizeBetweenOptions([0,45,90,135]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction()},t)),(e="pattern")in this?Object.defineProperty(this,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[e]=null}createPattern(t,e){}draw(t,e){const{x:s,y:i,width:a,height:n}=e;if(!this.state.active.value||!this.state.strength.value)return;const o=this.getGroup(t,e),h=t.fixFloat(s+a/2),r=t.fixFloat(i+n/2),l=t.fixFloat(-(s+a/2)),c=t.fixFloat(-(i+n/2));this.pattern=t.createElement("pattern",{patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",patternTransform:`rotate(${t.fixNumber(this.state.rotation.value)}, ${h}, ${r}) translate(${h}, ${r}) scale(1) translate(${l}, ${c})`}),this.createPattern(t,this.pattern,e);const d=t.addDefinition(this.pattern);t.addChild(o,t.createElement("rect",{x:s,y:i,width:a,height:n,fill:`url(${d})`}))}},ct=class extends lt{constructor(t){super(Object.assign({ratio:new Z.Z(0,1).setLabel("ratio").randomizeBetweenOptions([0,.25,.5]).enableInteraction(),strokeWidth:new Z.Z(.05,.95).randomizeBetweenOptions([.25,.5,.75]).setLabel("size").randomize().enableInteraction()},t))}createPattern(t,e,s){const{x:i,y:a,width:n,height:o,originalColor:r,scale:l=1}=s,c=this.getHex(r),d=Math.PI*(1-.75*this.state.ratio.value),u=h.Wj.MIN_PATTERN_WIDTH,p=(u+(1-this.state.detail.value)**2*(2*n-u))/l,g=p/2*this.state.strokeWidth.value;let m,f=p/2;if(this.state.ratio.value<.05)m=`M0,0 L${p},0 M0,${f} L${p},${f}`;else{const t=p/2/Math.tan(d/2);f+=p/2/Math.sin(d/2)-p/2,m=`M${-p/2},${2*t-f} L${p/2},${-f} L${1.5*p},${2*t-f} M${-p/2},${2*t} L${p/2},0 L${1.5*p},${2*t} M${-p/2},${f+2*t} L${p/2},${f} L${1.5*p},${f+2*t}`}const y=(n**2+o**2)**.5,v=Math.min(y,p),x=Math.min(y,f);t.setAttributes(e,{x:i+n/2-v/2,y:a+o/2-x/2,width:t.fixFloat(v),height:t.fixFloat(x),viewBox:`${t.fixFloat((p-v)/2)} ${t.fixFloat((f-x)/2)} ${t.fixFloat(v)} ${t.fixFloat(x)}`});const b=t.createElement("path",{d:new it(m).getData(),fill:"none",stroke:c,strokeWidth:t.fixFloat(g),strokeOpacity:t.fixNumber(this.getAlpha()),strokeLinecap:"square"});t.addChild(e,b)}},dt=class extends lt{constructor(t){super(Object.assign({ratio:new Z.Z(0,1).setLabel("ratio").randomizeBetweenOptions([.25,.5]).enableInteraction(),strokeWidth:new Z.Z(.05,.9).randomizeBetweenOptions([.25,.5,.75]).setLabel("size").randomize().enableInteraction()},t))}createPattern(t,e,s){const{x:i,y:a,width:n,height:o,originalColor:r,scale:l=1}=s,c=this.getHex(r),d=Math.PI*(.75+.25*(1-this.state.ratio.value)),u=h.Wj.MIN_PATTERN_WIDTH;let p,g,m,f=(u+(1-this.state.detail.value)**2*(2*n-u))/l;this.state.ratio.value<.05?(p=f/2,g=p*this.state.strokeWidth.value,m=`M0,0 L${f},0 M0,${p} L${f},${p}`):(f*=Math.tan(d/2),p=f/2/Math.tan(d/2),g=p*Math.sin(d/2)*this.state.strokeWidth.value,m=`M${.5*-f},${p} Q${.75*-f},${p} ${.5*-f},0 T0,0 T${.5*f},0 T${f},0 T${1.5*f},0 M${.5*-f},${2*p} Q${.75*-f},${2*p} ${.5*-f},${p} T0,${p} T${.5*f},${p} T${f},${p} T${1.5*f},${p}`);const y=(n**2+o**2)**.5,v=Math.min(y,f),x=Math.min(y,p);t.setAttributes(e,{x:i+n/2-v/2,y:a+o/2-x/2,width:t.fixFloat(v),height:t.fixFloat(x),viewBox:`${t.fixFloat((f-v)/2)} ${t.fixFloat((p-x)/2)} ${t.fixFloat(v)} ${t.fixFloat(x)}`});const b=t.createElement("path",{d:new it(m).getData(),fill:"none",stroke:c,strokeWidth:t.fixFloat(g),strokeOpacity:t.fixNumber(this.getAlpha()),strokeLinecap:"square"});t.addChild(e,b)}},ut=class extends lt{constructor(t){super(Object.assign({size:new Z.Z(.25,1).randomizeBetweenOptions([.25,.5]).setLabel("size").randomize().enableInteraction()},t)),this.state.saved||(this.state.rotation.set(0),this.state.detail.randomizeBetweenOptions([.65,.9]))}createPattern(t,e,s){const{x:i,y:a,width:n,height:o,originalColor:r,scale:l=1}=s,c=this.getHex(r),d=.75*h.Wj.MIN_PATTERN_WIDTH,u=(d+(1-this.state.detail.value)**2*(2*n-d))/l,p=u,g=u/4*this.state.size.value,m=(n**2+o**2)**.5,f=Math.min(m,u),y=Math.min(m,p);t.setAttributes(e,{x:i+n/2-f/2,y:a+o/2-y/2,width:t.fixFloat(f),height:t.fixFloat(y),viewBox:`${t.fixFloat((u-f)/2)} ${t.fixFloat((p-y)/2)} ${t.fixFloat(f)} ${t.fixFloat(y)}`}),t.addChild(e,t.createElement("circle",{cx:t.fixNumber(.25*u),cy:t.fixNumber(.25*p),r:t.fixNumber(g),fill:c,fillOpacity:t.fixNumber(this.getAlpha())})),t.addChild(e,t.createElement("circle",{cx:t.fixNumber(.75*u),cy:t.fixNumber(.75*p),r:t.fixNumber(g),fill:c,fillOpacity:t.fixNumber(this.getAlpha())}))}},pt=class extends k.Z{constructor(){var t,e;super(...arguments),e=[{name:"bokeh",type:D},{name:"burst",type:at},{name:"shine",type:rt},{name:"zigzag",type:ct},{name:"squiggle",type:dt},{name:"polkadot",type:ut}],(t="types")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}modify(t){const e=t.state.saved?t.state.saved.model:null,s=e&&this.types.find((t=>t.name===e))?e:this.types[Math.floor(Math.random()*this.types.length)].name,i=new(0,this.types.find((t=>t.name===s)).type);t.state.model.set(s),t.state.type=i,t.state.models=this.types.map((t=>t.name))}draw(t,e){}},gt=class extends v.Z{constructor(t){super(Object.assign({model:new S.Z},t)),this.addModifiers([pt]),this.applyModifiers()}};function mt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const ft=class extends v.Z{constructor(t){super(Object.assign({active:(new T.Z).randomize(.15).enableInteraction(),size:new Z.Z(0,1).randomizeBetweenOptions([.25,.35]).setLabel("size").enableInteraction(),rotation:new F.Z(0,360,{interval:5}).randomizeBetweenOptions([45,135]).setRealValueOnLabel().enableInteraction(),offset:new Z.Z(0,1).randomizeBetweenOptions([.35,.5,.65]).setLabel("offset").setIcon("stroke-offset").enableInteraction()},t)),mt(this,"group",null),mt(this,"sourceShape",null),mt(this,"nullBox",new r.Z)}createElement(){let{sourceShape:t=null,svg:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sourceShape=t,this.group=e.createElement("g")}getBox(t,e){const s=e*h.Wj.MAX_SHADOW_WIDTH_FACTOR,i=this.state.offset.value*s,a=z.Z.deg2rad(this.state.rotation.value),n=Math.cos(a)*i,o=Math.sin(a)*i,r=this.state.size.value*s,l=this.getCombinedBox({box:t,x:n,y:o,strokeWidth:r,offset:i,shadowSize:s});return{dy:t.y-l.y,dh:t.h-l.h,box:l}}getBoundingBox(){return this.sourceShape?this.sourceShape.getBoundingBox():this.nullBox}},yt=class extends ft{getElement(){let{svg:t,sourceID:e,color:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.sourceShape.worldLineHeight*h.Wj.MAX_SHADOW_WIDTH_FACTOR,a=this.state.offset.value*i,n=z.Z.deg2rad(this.state.rotation.value),o=Math.cos(n)*a,r=Math.sin(n)*a,l=this.state.size.value*i;return a>0&&t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(l),"stroke-linejoin":"round","stroke-linecap":"round",fill:s,stroke:s,transform:`translate(${t.fixFloat(o)}, ${t.fixFloat(r)})`})),l>0&&t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(l),"stroke-linejoin":"round","stroke-linecap":"round",fill:s,stroke:s})),this.boundingBox=this.sourceShape.boundingBox,this.effectBox=this.sourceShape.effectBox,this.group}getCombinedBox(t){let{box:e,x:s,y:i,strokeWidth:a}=t;const n=new r.Z(e.x,e.y,e.w,e.h).pad(-a/2),o=new r.Z(e.x+s,e.y+i,e.w,e.h).pad(-a/2);return n.add(o).add(e)}},vt=class extends ft{getElement(){let{svg:t,sourceID:e,color:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.sourceShape.worldLineHeight*h.Wj.MAX_SHADOW_WIDTH_FACTOR,a=this.state.offset.value*i/2,n=z.Z.deg2rad(this.state.rotation.value),o=Math.cos(n)*a,r=Math.sin(n)*a,l=this.state.size.value*i;return a>0&&t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(l+2*a),"stroke-linejoin":"round","stroke-linecap":"round",fill:s,stroke:s,transform:`translate(${t.fixFloat(o)}, ${t.fixFloat(r)})`})),l>0&&t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(l),"stroke-linejoin":"round","stroke-linecap":"round",fill:s,stroke:s})),this.boundingBox=this.sourceShape.boundingBox,this.effectBox=this.sourceShape.effectBox,this.group}getCombinedBox(t){let{box:e,x:s,y:i,strokeWidth:a,offset:n}=t;const o=new r.Z(e.x,e.y,e.w,e.h).pad(-a/2),h=new r.Z(e.x+s/2,e.y+i/2,e.w,e.h).pad(-(a+n)/2);return o.add(h).add(e)}},xt=class extends ft{constructor(t){super(Object.assign({sizeFactor:new Z.Z(0,1).set(.5).setLabel("gap").setIcon("position").enableInteraction()},t))}getElement(){let{svg:t,sourceID:e,color:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.sourceShape.worldLineHeight*h.Wj.MAX_SHADOW_WIDTH_FACTOR,a=this.state.offset.value*i,n=z.Z.deg2rad(this.state.rotation.value),o=Math.cos(n)*a,r=Math.sin(n)*a,l=this.state.size.value*i,c=this.state.sizeFactor.value,d="#000"===s?"#fff":"#000";for(let i=2;i>=0;i--){const n=i/2,h=l*c+(l-l*c)*n;!(h||i>0)||0===a&&1===c&&i<2||t.addChild(this.group,t.createElementFromDefinition(e,{"stroke-width":t.fixFloat(h),"stroke-linejoin":"round","stroke-linecap":"round",fill:i%2==0?s:d,stroke:i%2==0?s:d,transform:`translate(${t.fixFloat(o*n)}, ${t.fixFloat(r*n)})`}))}return this.boundingBox=this.sourceShape.boundingBox,this.effectBox=this.sourceShape.effectBox,this.group}getCombinedBox(t){let{box:e,x:s,y:i,strokeWidth:a}=t;const n=new r.Z(e.x,e.y,e.w,e.h).pad(-a/2),o=new r.Z(e.x+s,e.y+i,e.w,e.h).pad(-a/2);return n.add(o).add(e)}},bt=class extends k.Z{constructor(){var t,e;super(...arguments),e=[{name:"2d",type:yt},{name:"3d",type:vt},{name:"striped",type:xt}],(t="types")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}modify(t){const e=t.state.saved?t.state.saved.model:null,s=e&&this.types.find((t=>t.name===e))?e:this.types[Math.floor(Math.random()*(this.types.length-1))].name,i=new(0,this.types.find((t=>t.name===s)).type);t.state.saved||t.state.enabled||i.state.active.set(!1),t.state.model.set(s),t.state.type=i,t.state.models=this.types.map((t=>t.name))}},wt=class extends v.Z{constructor(t){super(Object.assign({model:new S.Z,type:null,enabled:!0,models:null,saved:null},t)),this.addModifiers([bt]),this.applyModifiers()}createShape(){return this.state.type}},St=class extends w.Z{constructor(t){super(Object.assign({links:new I.Z,linkedTo:new S.Z,active:new T.Z},t))}},kt=class extends k.Z{activate(t){t.state.fontScheme=new I.Z([0,1,2,3,4,5,6]).randomize().ignoreOnSave()}modify(t){var e;if(t.state.saved)return this.setFontDescriptionFromSavedState(t.state.saved.name,t.state.name),this.setFontDescriptionFromSavedState(t.state.saved.slogan,t.state.slogan),void this.setFontDescriptionFromSavedState(t.state.saved.symbol,t.state.symbol);const s=null==t||null===(e=t.state)||void 0===e?void 0:e.hasNameShadow,i=t.logo.hasIcon,a=t.logo.hasSymbol,n=t.logo.hasTextInsideSymbol,o=void 0===t.logo.textPosition||0===t.logo.textPosition,h=t.logo.hasLetter;let r;switch(n?i?t.state.fontScheme.randomizeBetweenOptions([5]):t.state.fontScheme.randomizeBetweenOptions([5,6]):!o||h||a?t.state.fontScheme.randomizeBetweenOptions([0,1]):i?a?t.state.fontScheme.randomizeBetweenOptions([0,1,2]):t.state.fontScheme.randomizeBetweenOptions([0,1,2,3,4,5,6]):t.state.fontScheme.randomizeBetweenOptions([0,1,2,3,4]),t.state.fontScheme.value){case 0:r=[{category:["sans-serif","serif"],style:["normal"],weight:["400","500","600","700"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["display","brush"]}];break;case 1:r=[{category:["sans-serif"],style:["normal"],weight:["600","700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["sans-serif","serif"]}];break;case 2:r=[{category:["serif","brush","slab"],style:["normal"],weight:["700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["serif","sans-serif","display","brush","script"]}];break;case 3:r=[{category:["brush","script"],style:["normal","italic"],weight:["400","500","600","700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300","400","500"]},{category:["display"]}];break;case 4:r=[{category:["display"],style:["normal","italic"],weight:["400","500","600","700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300","400","500"]},{category:["sans-serif"]}];break;case 5:r=[{category:["sans-serif","serif","slab"],style:["normal"],weight:["700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["display","brush"]}];break;case 6:r=[{category:["brush","display"],style:["normal"],weight:["600","700","800","900"]},{category:["sans-serif"],style:["normal"],weight:["300"]},{category:["sans-serif"]}]}s&&(r[0].category=r[0].category.filter((t=>!/brush/.test(t))),r[0].category.length||(r[0].category="sans-serif")),this.setFontDescription(t.state.name,r[0]),this.setFontDescription(t.state.slogan,r[1]),this.setFontDescription(t.state.symbol,r[2])}setFontDescriptionFromSavedState(t,e){const s=h.Y3.FONTS.items.find((e=>e.family===t.family&&e.variants.includes(t.variant)));if(s)e.file=`${h.Y3.FONT_PATH}${s.files[t.variant]}`,e.category=s.category;else{const s=h.Y3.FONTS.items.find((e=>e.family===t.family));if(s){const t=Object.values(s.variants)[0];e.file=`${h.Y3.FONT_PATH}${s.files[t]}`,e.category=s.category}else{const t=h.Y3.FONTS.items.find((t=>"Open Sans"===t.family));if(!t)throw new Error("fallback font Open Sans not found");e.file=`${h.Y3.FONT_PATH}${t.files.regular}`,e.category=t.category}}}setFontDescription(t,e){let s=null;const i=[{category:e.category,style:e.style,weight:e.weight},{category:null,style:e.style,weight:e.weight},{category:null,style:null,weight:e.weight},null];for(const e of i)if(s=h.Y3.FONTS.items.filter((s=>{let i=!0,a=!0;return s.filteredVariants=null,e?(e.category&&(i=e.category.some((t=>s.category===t))),e.style||e.weight?(s.filteredVariants=s.variants.filter((i=>{let a=!0,n=!0;if(e.weight){const t=i.replace(/(regular|italic)/,"400").replace(/[^0-9]/g,"");n=e.weight.includes(t)}if(e.style){const t=i.includes("italic");a=e.style.some((e=>"italic"===e&&t||"normal"===e&&!t))}return y(t.text,s.glyphs,i)&&n&&a})),a=0!==s.filteredVariants.length):(s.filteredVariants=s.variants.filter((e=>y(t.text,s.glyphs,e))),a=s.filteredVariants.length>0),i&&a):(s.filteredVariants=s.variants.filter((e=>y(t.text,s.glyphs,e))),s.filteredVariants.length>0)})),s&&s.length>0)break;if(!s.length)throw new Error("no font match");const a=s[Math.floor(Math.random()*s.length)],n=a.filteredVariants||a.variants,o=n[Math.floor(Math.random()*n.length)],r=a.files[o];t.family.set(a.family),t.variant.set(o),t.file=`${h.Y3.FONT_PATH}${r}`,t.category=a.category}},Bt=class extends v.Z{constructor(t){super(t);const e=new w.Z({family:new S.Z,variant:new S.Z,file:null,category:null});this.state.name=e.clone(),this.state.name.text=this.state.texts.text,this.state.slogan=e.clone(),this.state.slogan.text=this.state.texts.sloganText,this.state.symbol=e.clone(),this.state.symbol.text=this.state.texts.symbolText,this.addModifiers([kt])}},Ct=class extends k.Z{modify(t){!/(brush|script|handwriting)/.test(t.state.font.category)&&t.state.text.value&&t.state.text.set(t.state.text.value.toUpperCase())}},Mt=class extends k.Z{modify(t){(t.state.text.value&&1===t.state.text.value.length||/(brush|script|handwriting)/.test(t.state.font.category))&&t.state.letterSpacing.set(0),t.state.ligatures.set(0===t.state.letterSpacing.value)}};var Tt=s(5299);function Zt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const It=class extends b.Z{constructor(t){super(t),Zt(this,"contentBox",null),Zt(this,"boundingBox",null),Zt(this,"effectBox",null),Zt(this,"trimBox",null),Zt(this,"matrix",new Q),Zt(this,"worldContentBox",new r.Z),Zt(this,"worldBoundingBox",new r.Z),Zt(this,"worldEffectBox",new r.Z),Zt(this,"worldTrimBox",new r.Z),Zt(this,"worldMatrix",new Q),Zt(this,"_rotation",0),Zt(this,"position",new Y.Z),Zt(this,"origin",new Y.Z),Zt(this,"originInverse",new Y.Z),Zt(this,"scale",new Y.Z(1,1)),Zt(this,"worldPosition",new Y.Z),Zt(this,"worldCurvePosition",new Y.Z),Zt(this,"worldCurveRadius",0),this.scale.onUpdate=()=>{this.updateTransform()},this.position.onUpdate=()=>{this.updateTransform()},this.origin.onUpdate=()=>{this.originInverse.copy(this.origin).scale(-1)}}reset(){this.contentBox=null,this.boundingBox=null,this.effectBox=null,this.trimBox=null,this.resetTransforms()}resetTransforms(){this.matrix.identity(),this.worldContentBox.reset(),this.worldBoundingBox.reset(),this.worldEffectBox.reset(),this.worldTrimBox.reset(),this.worldMatrix.identity(),this._rotation=0,this.position.set(0,0),this.origin.set(0,0),this.scale.set(1,1),this.worldPosition.set(0,0)}updateTransform(){if(this.parent&&this.parent.updateTransform(),!this.boundingBox)return;const t=!this.position.isZero(),e=0!==this.rotation,s=!this.scale.isOne();let i=!1;if(this.matrix.identity(),t&&(this.matrix.translate(this.position.x,this.position.y),i=!0),e||s){const t=!this.origin.isZero();t&&this.matrix.translate(this.origin.x,this.origin.y),e&&this.matrix.rotate(this.rotation),s&&this.matrix.scale(this.scale.x,this.scale.y),t&&this.matrix.translate(this.originInverse.x,this.originInverse.y),i=!0}this.parent?(this.worldMatrix.copy(this.parent.worldMatrix),i&&this.worldMatrix.multiply(this.matrix)):this.worldMatrix.copy(this.matrix),this.worldBoundingBox.copy(this.boundingBox),this.worldBoundingBox.applyMatrix(this.worldMatrix),this.worldTrimBox.copy(this.trimBox?this.trimBox:this.boundingBox),this.worldTrimBox.applyMatrix(this.worldMatrix),this.effectBox&&(this.worldEffectBox.copy(this.effectBox),this.worldEffectBox.applyMatrix(this.worldMatrix)),this.worldPosition.set(this.worldBoundingBox.x,this.worldBoundingBox.y),this.contentBox&&(this.worldContentBox.copy(this.contentBox),this.worldContentBox.applyMatrix(this.worldMatrix)),this.curveRadius&&(this.worldMatrix.apply(this.curvePosition,this.worldCurvePosition),this.worldCurveRadius=this.worldMatrix.applyScaleX(this.curveRadius),this.worldInnerCurveRadius=this.worldMatrix.applyScaleX(this.innerCurveRadius))}get rotation(){return this._rotation}set rotation(t){this.dirty=!0,this._rotation=t}get width(){return null===this.worldBoundingBox.w&&(this.worldBoundingBox=this.getBoundingBox()),this.worldBoundingBox.w}get height(){return null===this.worldBoundingBox.h&&(this.worldBoundingBox=this.getBoundingBox()),this.worldBoundingBox.h}get x(){return null===this.worldBoundingBox.x&&(this.worldBoundingBox=this.getBoundingBox()),this.worldBoundingBox.x}get y(){return null===this.worldBoundingBox.y&&(this.worldBoundingBox=this.getBoundingBox()),this.worldBoundingBox.y}};function Et(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Nt=class extends It{constructor(t){super(Object.assign({hasStroke:(new T.Z).randomize(.15).setLabel("enable").setOrder(0).enableInteraction(),strokeWidth:new Z.Z(.02,1,{interval:.01}).randomizeBetween(.05,.1).setLabel("width").setOrder(1).enableInteraction(),strokeOffset:new Z.Z(.02,1,{interval:.01}).randomizeBetween(.05,.15).setLabel("offset").setOrder(2).enableInteraction()},t)),Et(this,"oldState",{}),Et(this,"path",null),Et(this,"boundingBoxWithoutStroke",null),Et(this,"maxStroke",0),Et(this,"hasDefinedStroke",!1),Et(this,"_worldTypographicBoundingBox",new r.Z),Et(this,"minAngle",null),Et(this,"_hasContent",null)}addCircle(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=i?1:-1,n=i?0:1;this.path.data.push(["M",s*-a,0],["A",s,s,0,1,n,s*a,0],["A",s,s,0,1,n,s*-a,0],["Z"])}reset(){super.reset(),this.path=null,this.maxStroke=0,this.boundingBoxWithoutStroke=null,this.hasDefinedStroke=!1,this.minAngle=null}getPathData(){let{precision:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.initializePathBox(),this.updateTransform(),this.oldState&&this.path.isSame&&this.worldMatrix.equals(this.oldState.worldMatrix))return this.oldState.dataString;if(!this.path)return"";const e=this.path.toDataString(this.worldMatrix,t);return this.oldState={worldMatrix:this.worldMatrix.clone(),dataString:e},e}initializePathBox(){let{normalize:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.path&&!this.boundingBox){if(this.boundingBox=this.boundingBoxWithoutStroke?this.boundingBoxWithoutStroke.clone():this.symbolBox?this.symbolBox.clone():this.path.getBoundingBox(),this.equalBoundarySpace&&this.boundingBox.equalizeSpaceFromBox(this.contentBox,this.equalBoundarySpace),this.initializeStroke(),this.state.hasStroke.value&&this.state.strokeWidth.value&&this.maxStroke){let t=1;this.symbolBox||this.state.cornerType&&2===this.state.cornerType.value&&this.minAngle&&(t=1/Math.sin(this.minAngle/2)),this.boundingBox.pad(-(this.getStrokeOffset()/2+this.getStrokeWidth())*t/2)}t&&(this.path.translate(-this.boundingBox.x,-this.boundingBox.y),this.contentBox&&(this.contentBox.x-=this.boundingBox.x,this.contentBox.y-=this.boundingBox.y),this.boundingBox.set(0,0,this.boundingBox.w,this.boundingBox.h)),this.effectBox=this.boundingBox.clone().pad(`-${h.Wj.EFFECT_PADDING}`)}}initializeStroke(){this.hasDefinedStroke||this.path&&(this.boundingBoxWithoutStroke||(this.boundingBoxWithoutStroke=this.symbolBox?this.symbolBox.clone():this.path.getBoundingBox(),this.maxStroke=Math.sqrt(this.boundingBoxWithoutStroke.w**2+this.boundingBoxWithoutStroke.h**2)*h.Wj.MAX_STROKE_WIDTH))}resetStroke(){this.boundingBoxWithoutStroke=null,this.maxStroke=null}setMaxStrokeWidth(t){this.hasDefinedStroke=Boolean(t),this.maxStroke=t}getBoundingBox(){return this.initializePathBox(),this.updateTransform(),this.worldBoundingBox}getEffectBox(){return this.initializePathBox(),this.updateTransform(),this.worldEffectBox}getTrimBox(){return this.initializePathBox(),this.updateTransform(),this.trimBox?this.worldTrimBox:this.worldBoundingBox}getContentBox(){return this.initializePathBox(),this.updateTransform(),this.worldContentBox}getStrokeOffset(){return this.initializeStroke(),this.state.hasStroke.value&&this.maxStroke*this.state.strokeOffset.value}getStrokeWidth(){return this.initializeStroke(),(this.hasStroke||this.state.hasStroke.value)&&this.maxStroke*this.state.strokeWidth.value}get worldStrokeWidth(){return this.getStrokeWidth()*this.worldMatrix.array[0]}get worldStrokeOffset(){return this.getStrokeOffset()*this.worldMatrix.array[0]}get hasContent(){return null===this._hasContent?this.path&&this.path.data.length>0:this._hasContent}set hasContent(t){this._hasContent=t}get worldTypographicBoundingBox(){return this._worldTypographicBoundingBox.copy(this.typographicBox),this._worldTypographicBoundingBox.applyMatrix(this.worldMatrix),this._worldTypographicBoundingBox}get worldSize(){return(this.size||0)*this.worldMatrix.array[0]}get worldLineHeight(){return(this.lineHeight||0)*this.worldMatrix.array[0]}};function Ot(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const $t=class extends Nt{constructor(t){super(Object.assign({hasStroke:new T.Z(!1),align:new I.Z([0,1]).setLabel("align",["left","center"])},t)),Ot(this,"oldShapeState",{}),Ot(this,"size",0),Ot(this,"gapWidth",0),Ot(this,"lineHeight",0),Ot(this,"curvePosition",new Y.Z),Ot(this,"curveRadius",null),Ot(this,"innerCurveRadius",null),Ot(this,"curveAngle",null),Ot(this,"isCurvingUpwards",!1),Ot(this,"hasCurve",!1)}getTextPathData(t){return t?t.commands.map((t=>{switch(t.type.toUpperCase()){case"M":case"L":return[t.type,t.x,t.y];case"C":return[t.type,t.x1,t.y1,t.x2,t.y2,t.x,t.y];case"Q":return[t.type,t.x1,t.y1,t.x,t.y];case"Z":return[t.type];default:throw new Error(`unrecognized command: ${t.type}`)}})):[]}getGlyphBox(t){if(void 0===t.xMax||void 0===t.xMin||void 0===t.yMax||void 0===t.yMin){const e=t.getBoundingBox();t.xMin=e.x1||0,t.yMin=e.y1||0,t.xMax=e.x2||0,t.yMax=e.y2||0}return t}getLines(t,e,s,i,a){let n=t.match(/(?:\\\||[^|])+/g)||[];i&&n.length>2&&(n=[n[0],n.slice(1).join(" ")]);const o=this.state.openTypeFont,h=o.unitsPerEm,r=[],l=this.getCapHeight(),c=!(n.length<=1)&&s;return n.forEach(((t,e)=>{const s=t.replace(/\\\|/g,"|");let i=null;const n=[];try{if(i=o.stringToGlyphs(s,a),null!=a&&a.kerning){let t=0;for(let e=0;e<i.length-1;e++){const s=o.getKerningValue(i[e],i[e+1]);s&&t++,n.push(i[e].advanceWidth+s)}n.push(i[i.length-1].advanceWidth)}else for(let t=0;t<i.length;t++)n.push(i[t].advanceWidth)}catch(t){throw t}const d=this.getGlyphBox(i[0]).xMin,u=this.getGlyphBox(i[Math.max(0,i.length-1)]),p=Math.max(0,u.advanceWidth-u.xMax),g=u.advanceWidth-u.xMax,m=n.reduce(((t,e)=>t+e),0),f=(i.length||1)-1,y=f*a.letterSpacing*h,v=m+y-d-g,x=0!==e&&c?r[0].wBox/v:1,b=l*h*x;r.push({text:s,x:d,w:m+y-p,originalWidth:m,wBox:v,sizeFactor:x,h:b,glyphs:i,glyphSpaces:f,advanceWidthsWithKerning:n})})),r}getCapHeight(){const t=this.state.openTypeFont,e=t.unitsPerEm;let s=t.tables.os2.sCapHeight/e;const i=this.getGlyphBox(t.charToGlyph("H")).yMax/e;return s||(s=i),s<.9*i&&(s=i),s}resetText(){super.reset(),this.typographicBox=null,this.path=new it("M0,0"),this.initializePathBox(),this.initializeStroke(),this.oldShapeState=null}createPath(){var t;let{forceInBox:e=!1,size:s=64,width:i=100,height:a=100,padding:n=new Tt.Z,worldCurvePosition:o=null,worldCurveRadius:l=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=this.state.ligatures.value,d=this.state.isCircular.value,u=this.state.letterSpacing.value,p=this.state.lining.value,g=this.state.align.value,m=this.state.curve.value,f=null===(t=this.state.shadow)||void 0===t?void 0:t.state.type,y=null==f?void 0:f.state.size.value,v=null==f?void 0:f.state.offset.value,x=null==f?void 0:f.state.rotation.value,b=null==f?void 0:f.state.active.value;let w=this.state.hasBoxedText&&this.state.hasBoxedText.value,S=this.state.text.value;const k=w,B=this.state.openTypeFont,C=B.unitsPerEm,M={features:{liga:c,rlig:c},kerning:!0,hinting:!1,letterSpacing:u};if(!S)return void this.resetText();d&&(w=!1);const T=this.getLines(S,p,w,d,M);if(T.length<=1&&(w=!1),this.size=d?.35*l*this.state.sizeFactor.value:s,this.state.capitalization.value&&(S=S.toUpperCase()),this.oldShapeState&&n.equals(this.oldShapeState.padding)&&S===this.oldShapeState.text&&s===this.oldShapeState.size&&e===this.oldShapeState.forceInBox&&i===this.oldShapeState.width&&a===this.oldShapeState.height&&u===this.oldShapeState.letterSpacing&&c===this.oldShapeState.ligatures&&p===this.oldShapeState.lining&&g===this.oldShapeState.align&&w===this.oldShapeState.hasBoxedText&&m===this.oldShapeState.curve&&d===this.oldShapeState.isCircular&&y===this.oldShapeState.shadowSize&&v===this.oldShapeState.shadowOffset&&x===this.oldShapeState.shadowRotaion&&b===this.oldShapeState.shadowActive)return this.resetTransforms(),void(this.path.isSame=!0);this.reset(),this.typographicBox=null,this.effectBox=null;const Z=T.slice().sort(((t,e)=>e.w-t.w))[0],I=Z.w,E=T[0].wBox,N=this.getCapHeight();if(d){const t=Math.PI*(.25+.75*u),e=t*l,s=B.getAdvanceWidth(Z.text,this.size,Object.assign(M,{letterSpacing:this.state.letterSpacing.min}));s>e&&(this.size*=e/s),this.innerCurveRadius=l-Z.h/C*this.size,this.curveAngle=t/2+Math.PI/2}else if(w){const t=T.reduce(((t,e)=>t+e.w),0)/T.length/T[0].w;this.size*=t}this.hasCurve=Math.abs(m)>.01&&S.length>1;let O=B.tables.os2.sxHeight/C;O||(O=this.getGlyphBox(B.charToGlyph("x")).yMax/C);const $=this.getGlyphBox(B.charToGlyph("."));this.gapWidth=Math.max(($.xMax-$.xMin)/C/1.25,this.lineHeight/this.size/8),this.gapWidth>.35*O&&(this.gapWidth=this.lineHeight/this.size/8);const L=new Q,A=[],P=[],D=[],z=[],F=[];let _=m>0?1:-1,R=null,j=null,W=null,G=0,U=null,H=null,V=0,q=0;if(T.forEach(((t,e)=>{const s=w?E:I;q+=t.h/C*this.size,d?(this.hasCurve=!0,this.curvePosition.copy(o),this.curveRadius=l,this.isCurvingUpwards=1===T.length||1===e,_=this.isCurvingUpwards?1:-1,U=Math.PI*(.25+.75*u),R=this.curveRadius,this.isCurvingUpwards||(R+=q*_),H=U*R/this.size*C,V=k?(H-t.w)/t.glyphSpaces:(H-s)/Z.glyphSpaces):this.hasCurve&&(null===R&&(W=-m*s/2,j=ht([0,W],[.5*s,0],[s,W]),this.curvePosition.set(j[0]/C*this.size,j[1]/C*this.size),this.curveRadius=Math.abs(j[1])/C*this.size,this.isCurvingUpwards=m>0,m<0&&(G=T.reduce(((t,e,s)=>t+(e.h+(s<T.length-1?(p-1)*N*C:0))),0),this.curvePosition.y+=G/C*this.size)),R=Math.abs(j[1]),U=2*Math.asin(Math.min(s/2,R)/R),R+=q*_/this.size*C+G,H=U*R,V=w?(H-s)/t.glyphSpaces:(H-s)/Z.glyphSpaces);const i=w||0===g?0:(I+Z.glyphSpaces*V-t.w-t.glyphSpaces*V)/2,a=1/C;let n=i+(w?-t.x:0);d&&k&&(n=0);let h=0;t.glyphs.forEach(((e,s)=>{const i=this.getGlyphBox(e),o=i.xMin,r=i.xMax-o,l=a*this.size*t.sizeFactor;if(i.path.commands.length){if(this.hasCurve)if(d){L.identity().scale(l,-l);const e=1.5*Math.PI+(1===t.glyphs.length?0:((n+o+r/2+h)/H-.5)*U),s=this.curvePosition.x/l+Math.cos(e)*R/l,i=-this.curvePosition.y/l+Math.sin(e)*R*_/l;L.translate(s,i).rotate(this.isCurvingUpwards?e-1.5*Math.PI:1.5*Math.PI-e).translate(-o-r/2,0)}else{L.identity().scale(l,-l);const e=1.5*Math.PI+(1===t.glyphs.length?0:((n+o+r/2+h/t.sizeFactor)*t.sizeFactor/H-.5)*U),s=(j[0]+Math.cos(e)*R)/t.sizeFactor,i=(-j[1]-G+Math.sin(e)*_*R)/t.sizeFactor;L.translate(s,i).rotate(this.isCurvingUpwards?e-1.5*Math.PI:1.5*Math.PI-e).translate(-o-r/2,0)}else L.identity().translate(0,q).scale(a*this.size*t.sizeFactor,-a*this.size*t.sizeFactor).translate(n,0);d||(A.push((n+i.xMin)*l),P.push(q-i.yMax*l),D.push((n+i.xMax)*l),z.push(q-i.yMin*l));const e=et(L,this.getTextPathData(i.path));F.push(...e)}n+=t.advanceWidthsWithKerning[s]+u*C,h+=V})),e<T.length-1&&(q+=(p-1)*N*this.size)})),this.path=new it(F),e){const t=this.path.getBoundingBox(),e=Math.min((i-n.horizontal)/t.w,(a-n.vertical)/t.h);this.path.scale(e),this.initializePathBox()}else if(d)this.typographicBox=this.path.getBoundingBox(),this.boundingBox=this.typographicBox.clone(),this.effectBox=this.typographicBox.clone(),this.trimBox=this.typographicBox.clone(),this.lineHeight=N*this.size,this.initializeStroke();else{var X;const t=w?E/C*this.size:I/C*this.size,e=null!=A&&A.length?Math.min(...A):0,s=null!=P&&P.length?Math.min(...P):0,i=null!=D&&D.length?Math.max(...D)-e:0,a=null!=z&&z.length?Math.max(...z)-s:0;let n=0,o=0,l=0,c=0;T[0].text===T[0].text.toLowerCase()&&(c=(N-O)*this.size),this.lineHeight=N*this.size;const d=new r.Z(e,s,i,a);if(this.hasCurve?(this.typographicBox=this.path.getBoundingBox(),this.trimBox=this.typographicBox.clone(),n=Math.max(e-this.typographicBox.x,this.typographicBox.x+this.typographicBox.w-(e+i)),o+=s-this.typographicBox.y,l+=this.typographicBox.y+this.typographicBox.h-(s+a)):(this.typographicBox=d,this.trimBox=this.path.getBoundingBox()),this.boundingBox=new r.Z(0,c,t,q-c),this.boundingBox.adjustSpaceFromBox(d),this.boundingBox.set(this.boundingBox.x-n,this.boundingBox.y-o,this.boundingBox.w+2*n,this.boundingBox.h+o+l),null!==(X=this.state.shadow)&&void 0!==X&&X.state.type.state.active.value){this.typographicBox=this.state.shadow.state.type.getBox(this.typographicBox,this.lineHeight).box,this.trimBox=this.state.shadow.state.type.getBox(this.trimBox,this.lineHeight).box;const t=this.state.shadow.state.type.getBox(this.boundingBox,this.lineHeight);this.boundingBox=t.box.add(this.typographicBox),this.curvePosition.y-=t.dy,this.isCurvingUpwards||(this.curvePosition.y-=t.dh)}this.effectBox=this.typographicBox.clone().equalizeSpaceFromBox(this.boundingBox).pad(`-${h.Wj.EFFECT_PADDING}`),this.initializeStroke()}this.oldShapeState={size:this.size,padding:n.clone(),text:S,forceInBox:e,width:i,height:a,letterSpacing:u,ligatures:c,lining:p,align:g,hasBoxedText:w,curve:m,isCircular:d,shadowSize:y,shadowOffset:v,shadowRotation:x,shadowActive:b}}};var Lt=s(1104),At=s(3202);const Pt=class extends v.Z{constructor(t){var e;if(super(Object.assign({font:null,text:null,isCircular:(new T.Z).setLabel("circular").enableInteraction(),curve:new Z.Z(-1,1,{interval:.01}).set(0).setLabel("curve").enableInteraction(),letterSpacing:new Z.Z(-.25,1,{interval:.01}).randomizeBetween(0,.15).setLabel("letter spacing").enableInteraction(),capitalization:new T.Z,ligatures:new T.Z,padding:new Tt.Z},t)),null,(e="type")in this?Object.defineProperty(this,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):this.type=null,this.addModifiers([Mt,[Ct,{chance:.35}]]),this.applyModifiers(),this.state.curveEnabled){if(!this.state.saved&&this.state.canCurve){if(Math.random()<.85)return;this.state.curve.randomizeBetweenOptions([-.25,-.15,-.1,.1,.15,.25])}}else this.state.curve=new nt.Z(0);this.state.canBeCircular?this.state.saved||this.state.isCircular.randomize(.65):this.state.isCircular=new nt.Z(!1)}async createShape(){const t=await this.loadFont(this.state.font.file);return await At.Z.wait(),this.type=new $t(Object.assign(this.state,{openTypeFont:t})),this.type}async loadFont(t){try{return await Lt.ZP.load(t)}catch(t){throw t}}};function Dt(t){return t.replace(/^\s+|\s+$/g,"")}var zt=s(5845);function Ft(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const _t=(0,l.AN)(h.Wj.ICON_PRECISION);function Rt(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t.test(e.tagName)&&s.push(e),e.children)for(const i of e.children)Rt(t,i,s);return s}function jt(t){if(t.children)for(const e of t.children)e.parentNode=t,jt(e);return t}const Wt=class extends It{constructor(t){super(t),Ft(this,"svg",null),Ft(this,"oldSVG",null),Ft(this,"group",null),Ft(this,"originalX",0),Ft(this,"originalY",0),Ft(this,"originalWidth",100),Ft(this,"originalHeight",100),Ft(this,"originalBoundingBox",null),Ft(this,"elements",null),Ft(this,"originalStrings",new WeakMap),Ft(this,"originalElementContents",new WeakMap),Ft(this,"clipID",(0,o.Z)()),Ft(this,"validNodes",["g","path","rect","circle","ellipse","line","polyline","polygon","clipPath","mask","use","symbol","defs"]),Ft(this,"styles",null),Ft(this,"computedBoundingBox",null),Ft(this,"originGroup",null),Ft(this,"rotationGroup",null),Ft(this,"boundingBoxGroup",null),Ft(this,"hasRotation",!1),Ft(this,"rotationMatrix",null),this.originalWidth=100,this.originalHeight=100}createElement(){let{svg:t=null,forceInBox:e=!1,width:s=100,height:i=100,padding:a=new Tt.Z}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.reset(),this.hasRotation=0!==this.state.rotation.value||this.state.isFlipped.value,null===this.oldSVG||t!==this.oldSVG){this.computedBoundingBox=new r.Z,this.computedRotatedBoundingBox=new r.Z,this.elements=[],this.oldSVG=t;const e=jt((0,zt.Q)(this.state.svg)),s=Rt(/svg/i,e)[0],i=s.properties.viewBox||"0 0 100 100",a=/(.+)\s(.+)\s(.+)\s(.+)/.exec(i),n=Rt(/style/i,e).reduce(((t,e)=>{let s="";for(const t of e.children)/text/i.test(t.type)&&(s+=t.value);return`${t}${s}`}),"");n&&(this.styles=function(t,e){const s=[];function i(i){const a=new Error(i+' at "'+t.substr(0,100)+'"');if(a.reason=i,!e)throw a;s.push(a)}function a(e){const s=e.exec(t);if(s)return t=t.slice(s[0].length),s}function n(){a(/^\s*/)}function o(){return a(/^{\s*/)}function h(){return a(/^}/)}function r(){if(n(),"/"!==t[0]||"*"!==t[1])return;let e=2;for(;""!=t[e]&&("*"!==t[e]||"/"!==t[e+1]);)e++;if(""==t[e+1])return i("End of comment is missing");const s=t.slice(2,e);return t=t.slice(e+2),{type:"comment",comment:s}}function l(){const t=[];let e;for(;e=r();)t.push(e);return t}function c(){for(n();"}"===t[0];)i("extra closing bracket"),t=t.slice(1),n();const e=a(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(e)return Dt(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(t){return t.replace(/,/g,"")})).split(/\s*(?![^(]*\)),\s*/).map((t=>t.replace(/\u200C/g,",")))}function d(){a(/^([;\s]*)+/);const t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;let e=a(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!e)return;if(e=Dt(e[0]),!a(/^:\s*/))return i("property missing ':'");const s=a(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),n={type:"declaration",property:e.replace(t,""),value:s?Dt(s[0].replace(t,"")):""};return a(/^[;\s]*/),n}function u(){if(!o())return i("missing '{'");let t,e=l();for(;t=d();)e.push(t),e=e.concat(l());return h()?e:i("missing '}'")}function p(){n();const t=[];let e;for(;e=a(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),a(/^,\s*/);if(t.length)return{type:"keyframe",values:t,declarations:u()}}function g(){if(n(),"@"===t[0])return function(){let t=a(/^@([-\w]+)?keyframes\s*/);if(!t)return;const e=t[1];if(t=a(/^([-\w]+)\s*/),!t)return i("@keyframes missing name");const s=t[1];if(!o())return i("@keyframes missing '{'");let n,r=l();for(;n=p();)r.push(n),r=r.concat(l());return h()?{type:"keyframes",name:s,vendor:e,keyframes:r}:i("@keyframes missing '}'")}()||function(){const t=a(/^@supports *([^{]+)/);if(t)return{type:"supports",supports:Dt(t[1]),rules:f()}}()||function(){if(a(/^@host\s*/))return{type:"host",rules:f()}}()||function(){const t=a(/^@media *([^{]+)/);if(t)return{type:"media",media:Dt(t[1]),rules:f()}}()||function(){const t=a(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return{type:"custom-media",name:Dt(t[1]),media:Dt(t[2])}}()||function(){if(a(/^@page */))return{type:"page",selectors:c()||[],declarations:u()}}()||function(){const t=a(/^@([-\w]+)?document *([^{]+)/);if(t)return{type:"document",document:Dt(t[2]),vendor:Dt(t[1]),rules:f()}}()||function(){if(a(/^@font-face\s*/))return{type:"font-face",declarations:u()}}()||function(){const t=a(/^@(import|charset|namespace)\s*([^;]+);/);if(t)return{type:t[1],name:Dt(t[2])}}()}function m(){const t=c()||[];return t.length||i("selector missing"),{type:"rule",selectors:t,declarations:u()}}function f(e){if(!e&&!o())return i("missing '{'");let s,a=l();for(;t.length&&(e||"}"!=t[0])&&(s=g()||m());)a.push(s),a=a.concat(l());return e||h()?a:i("missing '}'")}return{type:"stylesheet",stylesheet:{rules:f(!0),errors:s}}}(n,!0)),this.originalX=Number(a[1])||0,this.originalY=Number(a[2])||0,this.originalWidth=Number(a[3])||100,this.originalHeight=Number(a[4])||100,this.svg=t,this.rotationMatrix=new Q;const o=this.originalX+this.originalWidth/2,h=this.originalY+this.originalHeight/2;this.rotationMatrix.translate(o,h),this.rotationMatrix.rotate(z.Z.deg2rad(this.state.rotation.value)),this.state.isFlipped.value&&this.rotationMatrix.scale(-1,1),this.rotationMatrix.translate(-o,-h),this.group=t.createElement("g"),this.originGroup=t.createElement("g"),t.addChild(this.group,this.originGroup),this.boundingBoxGroup=t.createElement("g"),t.addChild(this.originGroup,this.boundingBoxGroup),this.hasRotation&&(this.rotationGroup=t.createElement("g"),t.addChild(this.originGroup,this.rotationGroup));for(const t of s.children)this.addNode(this.hasRotation?this.rotationGroup:this.originGroup,t)}this.initializeBoundingBox(),this.computedBoundingBox||(this.computedBoundingBox=new r.Z(this.originalX,this.originalY,this.originalWidth,this.originalHeight),this.computedRotatedBoundingBox=this.computedBoundingBox.clone().applyMatrix(this.rotationMatrix));const n=this.computedRotatedBoundingBox&&!this.computedRotatedBoundingBox.isEmpty()?this.computedRotatedBoundingBox:this.computedBoundingBox;if(n&&!n.isEmpty()?t.setAttributes(this.originGroup,{transform:`translate(${t.fixFloat(-n.x)}, ${t.fixFloat(-n.y)})`}):t.setAttributes(this.originGroup,{transform:`translate(${t.fixFloat(-this.originalX)}, ${t.fixFloat(-this.originalY)})`}),this.hasRotation&&t.setAttributes(this.rotationGroup,{transform:`matrix(${[...this.rotationMatrix.array].map((t=>this.svg.fixFloat(t))).join(", ")})`}),e){const t=Math.min((s-a.horizontal)/this.originalBoundingBox.w,(i-a.vertical)/this.originalBoundingBox.h);this.scale.set(t,t)}}addBox(t,e,s){!0===e?(this.computedBoundingBox=null,this.computedRotatedBoundingBox=null):!1!==e&&t&&(e.pad(-s/2),t.add(e))}isInBounds(t){return!1===t||t.x+t.w>=this.originalX&&t.y+t.h>=this.originalY&&t.x<=this.originalX+this.originalWidth&&t.y<=this.originalY+this.originalHeight}getBox(t){let e=t;for(;e;){if(e.properties&&e.properties.transform)return{box:!0,rotatedBox:!0};e="svg"===e.tagName.toLowerCase()?null:e.parentNode}const s=new r.Z,i=new r.Z;let a,n,o,l,c,d,u,p,g,m,f,y,v,x,b,w,S,k,B,C,M,T,Z,I,E,N,O=Number.MAX_VALUE,$=Number.MAX_VALUE,L=-Number.MAX_VALUE,A=-Number.MAX_VALUE;switch(t.tagName.toLowerCase()){case"rect":s.set(Number(t.properties.x),Number(t.properties.y),Number(t.properties.width),Number(t.properties.height)),this.hasRotation&&i.copy(s).applyMatrix(this.rotationMatrix);break;case"circle":u=Number(t.properties.cx),p=Number(t.properties.cx),g=Number(t.properties.r),s.set(u-g,p-g,2*g,2*g),this.hasRotation&&(d=new Y.Z(u,p),C=this.rotationMatrix.apply(d),i.set(C.x-g,C.y-g,2*g,2*g));break;case"ellipse":u=Number(t.properties.cx),p=Number(t.properties.cx),m=Number(t.properties.rx),f=Number(t.properties.ry),s.set(u-m,p-f,2*m,2*f),this.hasRotation&&(y=z.Z.deg2rad(this.state.rotation.value),v=y+Math.PI/2,x=m*Math.cos(y),b=m*Math.sin(y),w=f*Math.cos(v),S=f*Math.sin(v),d=new Y.Z(Number(t.properties.cx),Number(t.properties.cy)),C=this.rotationMatrix.apply(d),k=2*Math.sqrt(x*x+w*w),B=2*Math.sqrt(b*b+S*S),i.set(C.x-k/2,C.y-B/2,k,B));break;case"line":Z=Number(t.properties.x1),I=Number(t.properties.y1),E=Number(t.properties.x2),N=Number(t.properties.y2),O=Math.min(Z,E),$=Math.min(I,N),s.set(O,$,Math.max(Z,E)-O,Math.max(I,N)-$),this.hasRotation&&(M=this.rotationMatrix.apply(new Y.Z(Z,I)),T=this.rotationMatrix.apply(new Y.Z(E,N)),O=Math.min(M.x,T.x),$=Math.min(M.y,T.y),i.set(O,$,Math.max(M.x,T.x)-O,Math.max(M.y,T.y)-$));break;case"polygon":case"polyline":o=t.properties.points,l=[],o.replace(h.Wj.PATH_VALUES,((t,e)=>{e&&l.push(Number(e))}));for(let t=0;t<l.length;t+=2)a=l[t],n=l[t+1],a<O&&(O=a),n<$&&($=n),a>L&&(L=a),n>A&&(A=n);if(s.set(O,$,L-O,A-$),this.hasRotation){O=Number.MAX_VALUE,$=Number.MAX_VALUE,L=-Number.MAX_VALUE,A=-Number.MAX_VALUE,d=new Y.Z,C=new Y.Z;for(let t=0;t<l.length;t+=2)d.set(l[t],l[t+1]),C=this.rotationMatrix.apply(d),C.x<O&&(O=C.x),C.y<$&&($=C.y),C.x>L&&(L=C.x),C.y>A&&(A=C.y);i.set(O,$,L-O,A-$)}break;case"path":c=_(t.properties.d),s.copy(V(c)),this.hasRotation&&i.copy(new it(c).applyMatrix(this.rotationMatrix).getBoundingBox());break;case"g":return{box:!1,rotatedBox:!1};default:return{box:!0,rotatedBox:!0}}return{box:s,rotatedBox:i}}addNode(t,e){let s=t;if(!e.tagName)return;const i=e.tagName.toLowerCase(),{box:a,rotatedBox:n}=this.getBox(e);if(this.validNodes.includes(i)&&(!0===a||this.isInBounds(a))){const o={};for(const[t,s]of Object.entries(e.properties))if(/:/.test(t)&&"xlink:href"!==t.toLowerCase());else if("path"===i&&"d"===t){let e=s;e=e.replace(h.Wj.PATH_VALUES,((t,e)=>e?"0"===e||"1"===e?` ${e} `:` ${_t(Number(e))} `:e)).replace(/\s+/gm," ").replace(/\s?,\s?/gm,",").replace(/\s?([a-z])\s?/gim," $1"),o[t]=e}else"class"===t?o.styleFromClass=this.getInlineStyleFromClass(s,o):o[t]=s;o.styleFromClass&&(o.style=o.style?`${o.styleFromClass}${o.style}`:o.styleFromClass,delete o.styleFromClass),s=this.svg.createElement(e.tagName,o),this.elements.push(s);for(const t of e.children)if(/text/i.test(t.type)){const e=this.svg.createTextElement(t.value);this.svg.addChild(s,e),this.elements.push(e)}this.svg.addChild(t,s);const r=o["stroke-width"]?parseFloat(o["stroke-width"]):1;this.addBox(this.computedRotatedBoundingBox,n,r),this.addBox(this.computedBoundingBox,a,r)}for(const t of e.children)this.addNode(s,t)}relativeFitRectangle(t){const e=this.originalX+this.originalWidth/2,s=this.originalY+this.originalHeight/2,i=Math.max(Math.abs(e-t.x),Math.abs(e-(t.x+t.w))),a=Math.max(Math.abs(s-t.y),Math.abs(s-(t.y+t.h)));return new r.Z(e-i,s-a,2*i,2*a)}initializeBoundingBox(){if(!this.boundingBox)if(this.computedBoundingBox&&!this.computedBoundingBox.isEmpty()?(this.computedBoundingBox=this.relativeFitRectangle(this.computedBoundingBox),this.boundingBox=new r.Z(0,0,this.computedBoundingBox.w,this.computedBoundingBox.h)):this.boundingBox=new r.Z(0,0,this.originalWidth,this.originalHeight),this.originalBoundingBox=this.boundingBox.clone(),this.hasRotation)if(this.computedRotatedBoundingBox&&!this.computedRotatedBoundingBox.isEmpty())this.computedRotatedBoundingBox=this.relativeFitRectangle(this.computedRotatedBoundingBox),this.boundingBox=new r.Z(0,0,this.computedRotatedBoundingBox.w,this.computedRotatedBoundingBox.h);else{const t=this.boundingBox.applyMatrix(this.rotationMatrix);this.boundingBox=new r.Z(0,0,t.w,t.h)}else this.computedRotatedBoundingBox=null}getInlineStyleFromClass(t,e){if(!this.styles||!this.styles.stylesheet||!this.styles.stylesheet.rules)return"";let s="";return this.styles.stylesheet.rules.forEach((i=>{i.selectors&&i.selectors.includes(`.${t}`)&&i.declarations.forEach((t=>{const i=t.property,a=t.value;switch(i){case"fill":case"stroke":case"stroke-width":e[i]=a;break;default:s+=`${i}:${a};`}}))})),s}transformStyle(){let{text:t="",fillSolid:e="#000",fillTransparent:s="#fff"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.replace(/(fill|stroke)\s*?:\s*?([#a-zA-Z0-9]+)/gim,((t,i,a)=>`${i}:${this.transformColor({color:a,fillSolid:e,fillTransparent:s})}`))}transformColor(t){let{color:e="",fillSolid:s="#000",fillTransparent:i="#fff"}=t;return/none/i.test(e)?"none":/white|#fff|#ffffff/i.test(e)?i:s}getElement(){let{fillSolid:t="#000",fillTransparent:e="#fff"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.updateTransform(),this.svg.setAttributes(this.group,{transform:`matrix(${[...this.worldMatrix.array].map((t=>this.svg.fixFloat(t))).join(", ")})`,fill:t,stroke:"none",strokeWidth:1}),this.elements.forEach((s=>{if(3===s.nodeType)return;if(!this.originalElementContents.get(s)){const t=this.svg.getAttribute(s,"style");this.originalElementContents.set(s,{textContent:s.textContent,fill:this.svg.getAttribute(s,"fill"),stroke:this.svg.getAttribute(s,"stroke"),style:t&&t.cssText?t.cssText:t})}const i=this.originalElementContents.get(s);s.textContent&&(s.textContent=this.transformStyle({text:i.textContent,fillSolid:t,fillTransparent:e})),i.fill&&this.svg.setAttributes(s,{fill:this.transformColor({color:i.fill,fillSolid:t,fillTransparent:e})}),i.stroke&&this.svg.setAttributes(s,{stroke:this.transformColor({color:i.stroke,fillSolid:t,fillTransparent:e})}),i.style&&this.svg.setAttributes(s,{style:this.transformStyle({text:i.style,fillSolid:t,fillTransparent:e})})})),this.group}getBoundingBox(){return this.initializeBoundingBox(),this.updateTransform(),this.worldBoundingBox}},Gt=class extends v.Z{constructor(t){var e,i,a;super(Object.assign({iconSVG:null,iconID:null,iconTerm:null,padding:new Tt.Z,data:new S.Z,id:new S.Z,term:new S.Z,isFlipped:(new T.Z).setLabel("flip").enableInteraction(),rotation:new F.Z(0,360,{interval:5}).setRealValueOnLabel().setLabel("rotation").enableInteraction()},t)),e=this,i="symbols",a=(t=>{const e=t.keys(),s=e.map(t);return e.reduce(((t,e,i)=>{const a=/(\.[\\/])?(.+?)\./.exec(e);return t[a?a[2]:e]=s[i],t}),{})})(s(6637)),i in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a}async getPlaceholder(){if(!this.symbols)return null;const t=Object.keys(this.symbols),e=this.symbols[t[Math.floor(Math.random()*t.length)]],s=await fetch(e);return await s.text()}async createShape(){if(this.state.iconSVG&&this.state.data.set(this.state.iconSVG),this.state.iconID&&this.state.id.set(this.state.iconID),this.state.iconTerm&&this.state.term.set(this.state.iconTerm),!this.state.data.value){const t=await this.getPlaceholder();this.state.data.set(t),this.state.term.set("default")}return this.state.type=new Wt(Object.assign({svg:this.state.data.value},this.state)),this.state.saved&&(this.state.saved=null),this.state.type}},Ut=class extends Nt{constructor(t){var e;super(Object.assign({active:(new T.Z).randomize(.75).setLabel("enable").enableInteraction(),width:new Z.Z(.01,1,{interval:.005}).set(.5).enableInteraction().setOrder(0).setLabel("length"),margin:new Z.Z(0,1,{interval:.01}).randomizeBetweenOptions([.6,.7]).enableInteraction().setOrder(0).setLabel("margin"),strokeWidth:new Z.Z(.01,1,{interval:.001}).randomizeBetweenOptions([.04,.08]).setLabel("size").setOrder(1).enableInteraction(),strokeOffset:new nt.Z(0)},t)),(e="hasStroke")in this?Object.defineProperty(this,e,{value:false,enumerable:!0,configurable:!0,writable:!0}):this[e]=false}createPath(t){let{width:e,height:s}=t;this.reset();const i=e*this.state.width.value,a=s*this.state.strokeWidth.value;this.path=new it(`M0,0 L${i},0 L${i},${a} L0,${a} Z`),this.boundingBox=new r.Z(0,0,i,a)}},Ht=class extends Nt{constructor(t){var e;super(Object.assign({active:(new T.Z).randomize(.35).setLabel("enable").enableInteraction(),width:new Z.Z(.01,1,{interval:.005}).set(.5).enableInteraction().setOrder(0).setLabel("length"),height:new Z.Z(.01,1,{interval:.01}).randomizeBetweenOptions([.15,.25]).enableInteraction().setOrder(0).setLabel("height"),detail:new Z.Z(0,1).randomizeBetween(.5,.85).enableInteraction().setOrder(0).setLabel("detail"),margin:new Z.Z(0,1,{interval:.01}).randomizeBetweenOptions([.65,.7]).enableInteraction().setOrder(0).setLabel("margin"),strokeWidth:new Z.Z(.01,.25,{interval:.001}).randomizeBetweenOptions([.02,.05]).setLabel("size").setOrder(1).enableInteraction(),strokeOffset:new nt.Z(0)},t)),(e="hasStroke")in this?Object.defineProperty(this,e,{value:true,enumerable:!0,configurable:!0,writable:!0}):this[e]=true}drawPath(t){let{w:e,h:s,miter:i,num:a,s:n}=t,o=.25*n,h=`M0,${s/2} L${o},0 `;for(let t=0;t<a-1;t++)h+=`L${o+.5*n},${s}, L${o+n},0 `,o+=n;h+=`L${o+.5*n},${s}, L${o+.75*n},${s/2}`,this.path=new it(h),this.path.translate(this.getStrokeWidth(),i),this.boundingBox=new r.Z(0,0,e+2*this.getStrokeWidth(),s+2*i)}createPath(t){let{width:e,height:s}=t;this.reset(),this.setMaxStrokeWidth(2*s);const i=s*this.state.height.value,a=Math.max(e*this.state.width.value,i),n=Math.floor(Math.max(1,a/s*this.state.detail.value*4)),o=a/n,h=Math.atan(o/2/i),r=1/Math.sin(h)*this.getStrokeWidth()/2;this.drawPath({w:a,h:i,miter:r,num:n,s:o})}},Vt=class extends Ht{constructor(t){super(Object.assign({strokeCap:new nt.Z(2)},t))}drawPath(t){let{h:e,num:s,s:i}=t,a=0,n=`M${a},${e/2} Q${a+.25*i},${e} ${a+.5*i},${e/2} T${a+i},${e/2} `;for(let t=1;t<s;t++)a+=i,n+=`T${a+.5*i},${e/2} T${a+i},${e/2} `;this.path=new it(n),this.boundingBox=this.path.getBoundingBox(),this.path.translate(this.getStrokeWidth()/2,this.getStrokeWidth()/2),this.boundingBox.h+=this.getStrokeWidth(),this.boundingBox.w+=this.getStrokeWidth()}},qt=class extends k.Z{constructor(){var t,e;super(...arguments),e=[{name:"line",type:Ut},{name:"zigzag",type:Ht},{name:"squiggle",type:Vt}],(t="types")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}modify(t){let e=t.state.saved?t.state.saved.model:null;t.state.saved||t.state.forceLine&&(e="line");const s=e&&this.types.find((t=>t.name===e))?e:this.types[Math.floor(Math.random()*this.types.length)].name,i=new(0,this.types.find((t=>t.name===s)).type);t.state.saved||t.state.enabled||i.state.active.set(!1),t.state.model.set(s),t.state.type=i,t.state.models=this.types.map((t=>t.name))}},Xt=class extends v.Z{constructor(t){super(Object.assign({model:new S.Z,type:null,models:null,saved:null,forceLine:!1,enabled:!0},t)),this.addModifiers([qt]),this.applyModifiers()}createShape(){return this.state.type}};function Yt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t;for(let t=0;t<e.length;t++){const a=e[t];if(!i||!i[a])return s;i=i[a]}return i}var Kt=s(9777);function Qt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Jt=class extends v.Z{constructor(t){var e,s,i,a,n;const o=null===(e=t.saved)||void 0===e||null===(s=e.elements)||void 0===s||null===(i=s.nameShadow)||void 0===i?void 0:i.type,h=Boolean((null==o?void 0:o.active)&&((null==o?void 0:o.size)||(null==o?void 0:o.offset)));super(Object.assign({colors:new M.Z({hue:t.hue,saved:null===(a=t.saved)||void 0===a?void 0:a.colors}),fonts:new Bt({saved:null===(n=t.saved)||void 0===n?void 0:n.fonts,texts:{text:t.text,sloganText:t.sloganText,symbolText:t.symbolText},hasNameShadow:h}),size:new Z.Z(0,1,{interval:.01}).set(1).setLabel("size").enableInteraction()},t)),Qt(this,"shapeName",null),Qt(this,"shapeNameShadow",null),Qt(this,"shapeSlogan",null),Qt(this,"shapeDivider",null),Qt(this,"hasDivider",!1),Qt(this,"isMonotone",!1),Qt(this,"isCancelled",!1),Qt(this,"startTime",0),Qt(this,"cancelOnRedraw",!1),Qt(this,"shapeMap",null),Qt(this,"layers",null)}getLinks(t,e){const s=new w.Z;return e.forEach((e=>{var i,a;s[e]=new St({saved:null===(i=t.saved)||void 0===i||null===(a=i.links)||void 0===a?void 0:a[e]})})),s}updateAllLinks(t,e,s){const i=this.state.links;Object.keys(s).forEach((a=>{var n,o;i[a].links.setOptions(s[a].links),null!==(n=t.saved)&&void 0!==n&&null!==(o=n.links)&&void 0!==o&&o[a]?(t.saved.links[a].links&&e.includes(t.saved.links[a].links)?i[a].links.setValue(t.saved.links[a].links):i[a].links.setValue(s[a].default),delete t.saved.links[a].links):(i[a].links.setValue(s[a].default),s[a].linkedTo&&(i[a].linkedTo.set(s[a].linkedTo),i[a].active.set(!0)))}))}getEffects(t,e){const s=new w.Z;return e.forEach((e=>{var i,a;s[e]=new gt({saved:null===(i=t.saved)||void 0===i||null===(a=i.effects)||void 0===a?void 0:a[e]})})),s}isLinked(t,e,s){if(e===s)return!1;const i=t.find((t=>t.find((t=>t.id===e))));return!!i&&Boolean(i.find((t=>t.id===s)))}applyAllModifiers(){this.state.fonts.logo=this,this.state.fonts.applyModifiers()}create(){}setBackground(t){if(t.setBackground(t.add("rect",{id:`background-${t.uuid("background")}`,x:t.viewBox[0],y:t.viewBox[1],width:t.viewBox[2],height:t.viewBox[3],fill:t.addColor(this.state.colors.state.background.color,{aspectRatio:t.viewBox[2]/t.viewBox[3],forceSingle:0===this.state.colors.state.background.gradient.range.value})})),this.isMonotone||!this.state.effects.background.state.type.state.active.value)return;const e=t.add("g",{mask:t.addBackgroundMask()}),s=Math.max(t.viewBox[2]/h.Wj.CONTENT_WIDTH,t.viewBox[3]/h.Wj.CONTENT_HEIGHT);if(this.state.effects.background.state.type.draw(t,{cx:h.Wj.CONTENT_WIDTH/2,cy:h.Wj.CONTENT_HEIGHT/2,x:0,y:0,width:h.Wj.CONTENT_WIDTH,height:h.Wj.CONTENT_HEIGHT,parent:e,useMask:!1,originalColor:this.state.colors.state.background,scale:s}),t.setBackgroundEffect(this.state.effects.background.state.type.group),this.state.effects.background.state.type.pattern&&t.setBackgroundEffectPattern(this.state.effects.background.state.type.pattern),t.backgroundEffect){const e=t.fixFloat(t.width/2),i=t.fixFloat(t.height/2);t.setAttributes(t.backgroundEffect,{transform:`translate(${e}, ${i}) scale(${t.fixFloat(s)}) translate(${-e}, ${-i})`})}}splitLines(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return t;const i=Math.ceil(t.length/e);if(i<=1)return t;let a=e;const n=t.length/i;n<=e&&(a=n);const o=t.split(" ");if(o.some((t=>t.length<3))&&s)return t;const h=[];let r=0;for(let t=0;t<o.length;t++){let e=o[t];r+=e.length+1,r>=a&&(e+="|",r=0),h.push(e)}return h.join(" ").replace(/\| /g,"|").replace(/\|$/,"").toUpperCase()}createElements(){var t;const e=void 0===this.textPosition||0===this.textPosition;this.applyAllModifiers();const s=/(brush|script|handwriting)/.test(this.state.fonts.state.name.category),i=/display/.test(this.state.fonts.state.name.category)||/^(7|8|9)00/.test(this.state.fonts.state.name.variant.value);this.state.elements.divider=new Xt({saved:Yt(this.state.saved,["elements","divider"],null),forceLine:this.hasSymbol||!e,enabled:!s&&!(this.hasSymbol||this.hasIcon)||this.hasTextInsideSymbol&&!this.hasIcon}),(!this.state.saved||this.state.saved&&/layout/.test(this.state.saved.variation))&&(/(script|handwriting)/.test(this.state.fonts.state.name.category)||(this.hasTextInsideSymbol?this.state.text=this.splitLines(this.state.text,8,!1):this.state.text=this.splitLines(this.state.text,16)),this.hasTextInsideSymbol&&(this.state.sloganText=this.splitLines(this.state.sloganText,12)));const a=this.state.colors.state,n=a.background.value.value>.65&&a.background.saturation.value<.35;this.state.elements.nameShadow=new wt({saved:Yt(this.state.saved,["elements","nameShadow"],null),enabled:!s&&i&&!this.hasTextInsideSymbol&&e&&n});const o={font:this.state.fonts.state.name,text:new S.Z(this.state.text).enableInteraction(),margin:new Z.Z(-.25,1,{interval:.01}).randomizeBetween(.2,.25).setLabel("margin").enableInteraction(),lining:new Z.Z(.75,4,{interval:.01}).set(1.25).enableInteraction().setLabel("lining"),hasBoxedText:(new T.Z).randomize().setLabel("box").enableInteraction(),shadow:null===(t=this.state.elements)||void 0===t?void 0:t.nameShadow,canCurve:(!this.state.saved||this.state.saved&&this.state.saved.variation)&&!s&&!this.state.elements.divider.state.enabled&&!this.hasTextInsideSymbol&&this.state.text&&this.state.text.length>6,curveEnabled:e};let h=.2;this.state.text&&this.state.sloganText&&(h=.4+.15*(1-Math.min(this.state.sloganText.length/this.state.text.length,1)));const r={font:this.state.fonts.state.slogan,text:new S.Z(this.state.sloganText).enableInteraction(),sizeFactor:new Z.Z(.125,1).set(h).setLabel("size").setOrder(-1).enableInteraction(),margin:new Z.Z(0,2,{interval:.01}).randomizeBetween(.25,.5).setLabel("margin").enableInteraction(),lining:new Z.Z(.75,4,{interval:.01}).set(1.25).enableInteraction().setLabel("lining"),hasBoxedText:(new T.Z).setLabel("box").enableInteraction(),canBeCircular:this.hasTextInsideSymbol};if((!this.state.saved||this.state.saved&&"font"===this.state.saved.variation)&&((this.hasTextInsideSymbol||!e&&/\|/.test(o.text.value))&&(o.text.set(o.text.value.toUpperCase()),o.hasBoxedText.set(!0)),e||o.margin.randomizeBetween(.2,.3)),(!this.hasSymbol&&!this.hasIcon||this.hasSymbol&&this.hasTextInsideSymbol&&!this.hasIcon)&&o.margin.enableInteraction(!1),this.state.elements.name=new Pt(o),this.state.elements.slogan=new Pt(r),(!this.state.saved||this.state.saved&&this.state.saved.variation)&&this.state.elements.slogan.state.isCircular.value){var l;this.state.elements.slogan.state.margin.randomizeBetween(.75,1.25);const t=Math.floor(((null===(l=this.state.sloganText)||void 0===l?void 0:l.length)||0)/2-1);r.text.set(this.splitLines(this.state.sloganText,t,!1)),this.state.elements.slogan.state.letterSpacing.set(.65*(0,Kt.Z)(t/32,0,1)+.25)}this.hasIcon&&(this.state.elements.icon=new Gt({iconSVG:this.state.iconSVG,iconID:this.state.iconID,iconTerm:this.state.iconTerm,sizeFactor:new Z.Z(0,1).set(.5).setLabel("size").enableInteraction(),saved:Yt(this.state.saved,["elements","icon"],null)}))}alignText(){if(void 0===this.textPosition)return this.hasText&&this.shapeName.state.align.set(1),void(this.hasSlogan&&this.shapeSlogan.state.align.set(1));switch(this.textPosition){case 0:this.hasText&&this.shapeName.state.align.set(1),this.hasSlogan&&this.shapeSlogan.state.align.set(1);break;case 1:this.hasText&&this.shapeName.state.align.set(0),this.hasSlogan&&this.shapeSlogan.state.align.set(0)}}setPositions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{center:e=!1,verticalAxis:s=0,horizontalAxis:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=0,n=null,o=0,h=0;for(const i of t)if(i.shape&&i.enabled){const t=e?s-i.shape.width/2-i.shape.position.x:s;if(n){h=Math.max(h,0);let t=0;const e=i.marginTop<0?i.marginTop:Math.max(i.marginTop||0,o,!1===i.respectDescender?0:h);if(i.shape.hasCurve&&i.shape.isCurvingUpwards&&2*i.shape.worldCurveRadius>n.width){const s=Math.asin(n.worldBoundingBox.w/2/i.shape.worldCurveRadius),a=Math.cos(s)*i.shape.worldCurveRadius;t=Math.min(e,-(i.shape.worldCurvePosition.y+i.shape.worldCurveRadius-i.shape.worldBoundingBox.y)+(i.shape.worldCurveRadius-a)+e)}else if(n.hasCurve&&!n.isCurvingUpwards&&2*n.worldCurveRadius>i.shape.width){const s=Math.asin(i.shape.worldBoundingBox.w/2/n.worldCurveRadius),a=Math.cos(s)*n.worldCurveRadius;t=Math.min(e,-(n.worldBoundingBox.y+n.worldBoundingBox.h)+(n.worldCurvePosition.y-n.worldCurveRadius)+(n.worldCurveRadius-a)+e)}else t=e;a+=t,h-=t}i.x=t,i.y=a,a+=i.shape.height,h-=i.shape.height,i.marginBottom&&(o=i.marginBottom),n=i.shape}const r=e?0:i-a/2;for(let e=0;e<t.length;e++){const s=t[e];s.shape&&s.enabled&&s.shape.position.set(s.x-s.shape.boundingBox.x,r+s.y-s.shape.boundingBox.y)}}positionShapes(t){const e=this.hasText?this.shapeName.state.margin.value:this.shapeSlogan.state.margin.value;let s=t,i=0,a=0,n=0,o=0;this.hasText?o=this.shapeName.worldLineHeight:this.hasSlogan&&(o=this.shapeSlogan.worldLineHeight),i=t?(t.height+o)*this.shapeName.state.margin.value:this.shapeName.worldLineHeight*this.shapeName.state.margin.value,n=this.hasText?this.shapeName.worldLineHeight*(3*this.shapeDivider.state.margin.value-1.5):-this.shapeSlogan.worldLineHeight+(3*this.shapeDivider.state.margin.value-1.5),this.hasSlogan&&!this.hasSloganInCircle&&(a=this.shapeName.worldLineHeight*this.shapeSlogan.state.margin.value,this.hasText||(a+=i));const h=[this.shapeName,this.shapeSlogan];for(;!s;)s=h.shift();const r=void 0===this.textPosition||0===this.textPosition;this.setPositions([{shape:t,enabled:Boolean(t)&&r},{marginTop:i,shape:this.shapeName,enabled:this.hasText,respectDescender:!1},{marginTop:n,shape:this.shapeDivider,marginBottom:n,enabled:this.hasDivider,respectDescender:!1},{marginTop:a,shape:this.shapeSlogan,enabled:this.hasSlogan&&!this.hasSloganInCircle}],{center:r,verticalAxis:r?s.position.x+s.width/2:s.position.x+s.width+s.width*e,horizontalAxis:r?0:s.position.y+s.height/2})}getStrokeCap(t){return t.state.strokeCap?["butt","square","round"][t.state.strokeCap.value]:"square"}getStrokeJoin(t){return t.state.strokeCap?["miter","miter","round"][t.state.strokeCap.value]:"miter"}getOptimalSize(){const t=this.shapeGroup.width,e=this.shapeGroup.height,s=(Math.max(t,e)**2*2)**.5*.5,i=Math.min(t,e)/Math.max(t,e);return this.hasSymbol?this.hasTextInsideSymbol||!this.hasText&&!this.hasSlogan?1-(this.shapeSymbol.contentBox.w**2+this.shapeSymbol.contentBox.h**2)**.5*.5/(s/(2**.5)**.5)*.35:1-i**2*.35:this.hasIcon?1-i**2*.35:this.hasSlogan?.85*(1-i**2*.5):.85*(1-i**2*.75)}initContentDimensions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shapeGroup;t.setContentDimensions((null==e?void 0:e.worldTrimBox)||e.worldBoundingBox)}drawBoundingBoxes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shapeGroup;if(e&&e.state.shapes){e.worldBoundingBox&&!e.worldBoundingBox.isEmpty()&&t.add("rect",{x:e.worldBoundingBox.x,y:e.worldBoundingBox.y,width:e.worldBoundingBox.w,height:e.worldBoundingBox.h,fill:"none",stroke:"#48f",strokeWidth:2}),e.worldTrimBox&&!e.worldTrimBox.isEmpty()&&t.add("rect",{x:e.worldTrimBox.x,y:e.worldTrimBox.y,width:e.worldTrimBox.w,height:e.worldTrimBox.h,fill:"none",stroke:"#f48",strokeWidth:8});const s=e.getEnclosedCircle();return s&&t.add("circle",{cx:s.x,cy:s.y,r:s.r,fill:"none",stroke:"#fff",strokeWidth:2}),void e.state.shapes.forEach((e=>{this.drawBoundingBoxes(t,e)}))}e.typographicBox&&!e.typographicBox.isEmpty()&&t.add("rect",{x:e.worldTypographicBoundingBox.x,y:e.worldTypographicBoundingBox.y,width:e.worldTypographicBoundingBox.w,height:e.worldTypographicBoundingBox.h,fill:"none",stroke:"#84f",strokeWidth:2}),e.hasCurve&&(t.add("circle",{cx:e.worldCurvePosition.x,cy:e.worldCurvePosition.y,r:e.worldCurveRadius,fill:"none",stroke:"#84f",strokeWidth:2}),e.worldInnerCurveRadius&&(t.add("circle",{cx:e.worldCurvePosition.x,cy:e.worldCurvePosition.y,r:e.worldInnerCurveRadius,fill:"none",stroke:"#84f",strokeWidth:2}),t.add("path",{d:`M${e.worldCurvePosition.x},${e.worldCurvePosition.y} L${e.worldCurvePosition.x+Math.cos(e.curveAngle)*e.worldInnerCurveRadius},${e.worldCurvePosition.y+Math.sin(e.curveAngle)*e.worldInnerCurveRadius}`,fill:"none",stroke:"#84f",strokeWidth:2}))),e.worldBoundingBox&&!e.worldBoundingBox.isEmpty()&&t.add("rect",{x:e.worldBoundingBox.x,y:e.worldBoundingBox.y,width:e.worldBoundingBox.w,height:e.worldBoundingBox.h,fill:"none",stroke:"#f84",strokeWidth:4}),e.worldContentBox&&!e.worldContentBox.isEmpty()&&t.add("rect",{x:e.worldContentBox.x,y:e.worldContentBox.y,width:e.worldContentBox.w,height:e.worldContentBox.h,fill:"none",stroke:"#f48",strokeWidth:2}),e.worldEffectBox&&!e.worldEffectBox.isEmpty()&&t.add("rect",{x:e.worldEffectBox.x,y:e.worldEffectBox.y,width:e.worldEffectBox.w,height:e.worldEffectBox.h,fill:"none",stroke:"#8f4",strokeWidth:2})}getAllElements(){const t=this.state.links,e=this.state.colors.state,s=this.state.effects,i=[];return Object.keys(t).filter((e=>t[e]instanceof w.Z)).forEach((t=>{i.push({color:e[t],effect:s[t],id:t})})),i}getSizeFactor(t){const e=1-t;return.03125+(1/(1+(e/(1-e))**-.5))**(Math.log(.96875/31.96875)/Math.log(.5))*31.96875}getShapeUnderPosition(t,e,s,i){const a=[this.shapeIcon,this.shapeLetter,this.shapeName,this.shapeDivider,this.shapeSlogan,this.shapeSymbolContent,this.shapeSymbol];for(let n=0;n<a.length;n++){const o=a[n];if(o&&o.worldBoundingBox.contains(t,e,s)&&i(o))return o}return null}addDefinitionFromShape(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.addDefinition(t.createElement("path",Object.assign({d:t.getPathDescriptionFromShape(e)},s)))}getLayerFromID(t){return this.layers.find((e=>0!==e.filter((e=>e.id===t)).length))}removeFromLayers(t,e){for(let s=0;s<t.length;s++)t[s]=t[s].filter((t=>t.id!==e));return t.reduce(((t,e)=>(e.length&&t.push(e),t)),[])}createLayer(t){return{color:this.state.colors.state[t],effect:this.state.effects[t],layers:[],id:t}}addLayerToID(t,e,s){t.forEach((t=>{const i=t.find((t=>t.id===e));i&&(i.layers.some((t=>t[0].id===s))||i.layers.push([this.createLayer(s)]))}))}isActiveLayer(t){return"divider"!==t||this.shapeMap.get(t).state.active.value}getLayers(t){const e=new class{constructor(){var t,e;e=[],(t="layers")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=this.getLayer(t);if(null===e)return void(s||this.layers.push(new Set([t])));const i=this.getLayer(e);if(s||i)if(s)if(i)if(s===i);else{[...i.values()].forEach((t=>{s.add(t)}));const t=this.layers.indexOf(i);-1!==t&&this.layers.splice(t,1)}else s.add(e);else i.add(t);else this.layers.push(new Set([t,e]))}getLayer(t){let e=null;for(let s=0;s<this.layers.length;s++){const i=this.layers[s];if(i.has(t)){e=i;break}}return e}hasContent(){return 0!==this.layers.length}};t.forEach((t=>{const s=this.state.links[t].linkedTo.value;this.shapeMap.get(s)?s&&this.state.links[t].active.value?this.shapeMap.get(t)&&this.shapeMap.get(s)&&e.add(t,s):this.shapeMap.get(t)&&e.add(t):(this.state.links[t].active.set(!1),e.add(t))}));const s=[];return e.layers.forEach((t=>{const e=[];[...t.values()].forEach((t=>{this.shapeMap.get(t)&&e.push(this.createLayer(t))})),e.length&&s.push(e)})),s}sortLayers(t){return t.sort(((t,e)=>Math.max(...t.map((t=>this.ids.indexOf(t.id))))-Math.max(...e.map((t=>this.ids.indexOf(t.id)))))),t.forEach((t=>{t.sort(((t,e)=>this.ids.indexOf(t.id)-this.ids.indexOf(e.id)))})),t}renderLayers(t,e,s,i){s.forEach(((s,a)=>{const n=s.reduce(((t,e)=>{const s=this.shapeMap.get(e.id);let i=null;return s.getEffectBox?(i=s.getEffectBox(),i.isEmpty()&&(i=s.getBoundingBox())):i=s.getBoundingBox(),i.isEmpty()?t:t.add(i)}),new r.Z),o=t.addColor(s[0].color.color,{aspectRatio:n.w/n.h}),h=s[0].effect,l=s.reduce(((e,s)=>{const a=this.shapeMap.get(s.id),n=a.hasStroke?{strokeWidth:t.fixNumber(a.worldStrokeWidth),stroke:"#fff"}:{fill:"#fff",stroke:"#fff"},o=i.get(s.id);if(o){const s=t.createElementFromDefinition(o,n);e.push(s)}return e}),[]);if(l.length){var c;const a=t.addChild(e,t.createElement("g",{mask:t.addMask({fill:"#000",fillBox:n,elements:l})}));t.addChild(a,t.createElement("rect",{x:t.fixNumber(n.x),y:t.fixNumber(n.y),width:t.fixNumber(n.w),height:t.fixNumber(n.h),fill:o})),!this.isMonotone&&h&&h.state.type.draw(t,{x:n.x,y:n.y,width:n.w,height:n.h,cx:n.x+n.w/2,cy:n.y+n.h/2,parent:a,useMask:!1,originalColor:s[0].color}),null!==(c=s[0].layers)&&void 0!==c&&c.length&&this.renderLayers(t,a,s[0].layers,i)}}))}cancelRendering(){At.Z.removeAll(this),this.isCancelled=!0}async startRendering(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};At.Z.removeAll(this),this.cancelOnRedraw=Boolean(t.cancelOnRedraw),this.startTime=Date.now()}async addRenderTask(t){if(this.isCancelled&&this.cancelOnRedraw)throw new C("canceled draw");return Date.now()-this.startTime>1/h.UI.MIN_FPS*1e3&&await At.Z.wait(this),t()}async createShapes(){const t=[["shapeName",this.state.elements.name],["shapeSlogan",this.state.elements.slogan],["shapeDivider",this.state.elements.divider]];for(const e of t)this[e[0]]=await e[1].createShape()}},te=class extends k.Z{activate(t){t.state.type.state.hole=new w.Z({active:(new T.Z).randomize(.15).setLabel("enable").enableInteraction(),position:new Z.Z(.65,.99,{interval:.001}).randomizeBetween(.85,.95).setLabel("size").enableInteraction()}),t.state.saved||(t.state.hasStroke||t.state.hasAspectRatio)&&t.state.type.state.hole.active.set(!1)}modify(t){const e=t.state.type;if(!e.state.hole.active.value)return;let s,i;null===e.contentBox?(s=e.state.width,i=e.state.height):(s=e.contentBox.w,i=e.contentBox.h);const a=Math.min(s,i),n=Math.sqrt(a**2+a**2)/2*e.state.hole.position.value;e.addCircle(0,0,n,!0),e.contentBox=r.Z.insideCircle(0,0,n)}},ee=class extends k.Z{activate(t){t.state.type.state.ring=new w.Z({active:(new T.Z).randomize(.25).setLabel("enable").enableInteraction(),position:new Z.Z(.65,.99).randomizeBetween(.85,.95).setLabel("ring position").enableInteraction(),width:new Z.Z(.01,.25,{interval:.001}).randomizeBetween(.02,.05).setLabel("width").enableInteraction()}),t.state.saved||(t.state.hasStroke||t.state.hasAspectRatio)&&t.state.type.state.ring.active.set(!1)}modify(t){const e=t.state.type;if(!e.state.ring.active.value)return;const s=e.state.width,i=e.state.height,a=Math.min(s,i),n=Math.sqrt(a**2+a**2)/2,o=n*e.state.ring.position.value,h=o-n*e.state.ring.width.value;e.addCircle(0,0,o,!0),e.addCircle(0,0,h,!1),e.contentBox=r.Z.insideCircle(0,0,h)}},se=class extends Nt{constructor(){var t;super(...arguments),(t="component")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null}createPath(t){let{width:e=100,height:s=100}=t;this.reset(),this.path=new it,this.state.width=e,this.state.height=s,this.component.applyModifiers()}},ie=class extends v.Z{constructor(t){if(super(Object.assign({type:new se,hasStroke:!1,hasAspectRatio:!1,saved:null},t)),this.state.saved){const t=[["ring",ee],["hole",te]].reduce(((t,e)=>(this.state.saved.type[e[0]]&&t.push(e[1]),t)),[]);this.addModifiers(t)}else this.addModifiers([ee,te]);this.state.type.component=this}createShape(){return this.state.type}};function ae(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ne(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const oe=(0,l.AN)(3),he=class extends Nt{constructor(t){super(Object.assign({rotation:new F.Z(0,360,{interval:5}).randomize().setRealValueOnLabel().enableInteraction().setOrder(0).setLabel("rotation"),variation:new Z.Z(0,1).randomizeBetween(.25,.5).enableInteraction().setOrder(3).setLabel("variation"),detail:new Z.Z(0,1).randomizeBetweenOptions([.01,.25,.5]).enableInteraction().setOrder(3).setLabel("detail"),random:new $((()=>{this.initRandomValues()})).enableInteraction().setOrder(4).setLabel("randomize"),cornerType:new nt.Z(1),randomValuesForRadius:new O},t)),ne(this,"points",null),ne(this,"simplexNoise",null),this.state.saved||(this.initRandomValues(),this.state.hasStroke.set(!1))}initRandomValues(){this.state.randomValuesForRadius.clear();for(let t=0;t<256;t++){const t=oe(Math.random());this.state.randomValuesForRadius.add(1===t?1-`1e-${h.Wj.PRECISION}`:t)}this.initNoise()}initNoise(){this.state.randomValuesForRadius.value.length||this.initRandomValues(),this.simplexNoise=new class{constructor(){ae(this,"GRADIENTS",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),ae(this,"F2",.5*(Math.sqrt(3)-1)),ae(this,"G2",(3-Math.sqrt(3))/6),ae(this,"G22",null),ae(this,"permutations",null),ae(this,"rng",Math),ae(this,"numOctaves",1),ae(this,"persistence",.5),ae(this,"octaveFrequency",null),ae(this,"octavePersistence",null),ae(this,"maxPersistence",null),this.G22=2*this.G2-1,this.setPermutations(),this.setOctaves()}setOctaves(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;this.numOctaves=t,this.persistence=e,this.octaveFrequency=[],this.octavePersistence=[],this.maxPersistence=0;for(let t=0;t<this.numOctaves;t++){const e=Math.pow(2,t),s=Math.pow(this.persistence,t);this.maxPersistence+=s,this.octaveFrequency.push(e),this.octavePersistence.push(s)}this.maxPersistence=1/this.maxPersistence}dot2(t,e,s){return t[0]*e+t[1]*s}setPermutations(){const t=[];for(let e=0;e<256;e++)t[e]=Math.floor(256*this.rng.random());this.permutations=[];for(let e=0;e<512;e++)this.permutations[e]=t[255&e]}noise2d(t,e){const s=(t+e)*this.F2,i=Math.floor(t+s),a=Math.floor(e+s),n=(i+a)*this.G2,o=t-(i-n),h=e-(a-n);let r,l;o>h?(r=1,l=0):(r=0,l=1);const c=o-r+this.G2,d=h-l+this.G2,u=o+this.G22,p=h+this.G22,g=255&i,m=255&a;let f,y,v,x=.5-o*o-h*h;if(x<0)f=0;else{x*=x;const t=this.permutations[g+this.permutations[m]]%12;f=x*x*this.dot2(this.GRADIENTS[t],o,h)}let b=.5-c*c-d*d;if(b<0)y=0;else{b*=b;const t=this.permutations[g+r+this.permutations[m+l]]%12;y=b*b*this.dot2(this.GRADIENTS[t],c,d)}let w=.5-u*u-p*p;if(w<0)v=0;else{w*=w;const t=this.permutations[g+1+this.permutations[m+1]]%12;v=w*w*this.dot2(this.GRADIENTS[t],u,p)}return 70*(f+y+v)}noise(t,e){let s,i,a=0;for(let n=0;n<this.numOctaves;n++)s=this.octaveFrequency[n],i=this.octavePersistence[n],a+=i*this.noise2d(s*t,s*e);return.5*(a*this.maxPersistence+1)}setRng(t){this.rng=t,this.setPermutations()}setRandomValuesOfRng(t){this.rng=new class{constructor(t){this.values=t,this.index=-1}random(){return this.index=(this.index+1)%this.values.length,this.values[this.index]}reset(){this.index=-1}}(t.slice()),this.setPermutations()}resetRNG(){this.rng.reset()}},this.simplexNoise.setRandomValuesOfRng(this.state.randomValuesForRadius.value.map(Number))}createPath(t){let{width:e,height:s}=t;this.reset(),this.initNoise();const i=this.state.detail.value,a=z.Z.deg2rad(this.state.rotation.value),n=Math.floor(5+i**2*1019),o=Math.min(e,s)/2;let h=Number.MAX_VALUE,l=-Number.MAX_VALUE;this.points=[],this.simplexNoise.setOctaves(16-Math.floor(8*i),.5+.25*i),this.simplexNoise.resetRNG();for(let t=0;t<n;t++){const e=t/n*Math.PI*2,s=.4+.1*i,r=this.simplexNoise.noise(Math.cos(e)*s,Math.sin(e)*s),c=(1+this.state.variation.value*r)*o;h=Math.min(h,c),l=Math.max(l,c),this.points.push(new Y.Z(Math.cos(e+a)*c,Math.sin(e+a)*c))}0===this.state.cornerType.value?this.path=this.getLinearPath():this.path=this.getSmoothPath();const c=Math.cos(Math.PI/n),d=h*c,u=l*c;this.symbolBox=new r.Z(-u,-u,2*u,2*u),this.contentBox=r.Z.insideCircle(0,0,d-this.getStrokeOffset()/4)}getLinearPath(){const t=this.points.map(((t,e)=>[0===e?"M":"L",t.x,t.y]));return t.push("Z"),new it(t)}getSmoothPath(){const t=this.points.length,e=[],s=[];for(let i=0;i<=t;i++){const a=this.points[i%t],n=this.points[(i+1)%t],o=new Y.Z(a.x+.5*(n.x-a.x),a.y+.5*(n.y-a.y));s.push(o),0===i?e.push(["M",o.x,o.y]):e.push(["Q",a.x,a.y,o.x,o.y])}return e.push("Z"),new it(e)}};function re(t,e,s){if(t<=0||e<=0)return{w:0,h:0};const i=Math.max(t,e),a=Math.min(t,e),n=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let h=0,r=0;if(a<=2*n*o*i||Math.abs(n-o)<1e-10){const s=.5*a;t>=e?(h=s/n,r=s/o):(h=s/o,r=s/n)}else{const s=o*o-n*n;h=(t*o-e*n)/s,r=(e*o-t*n)/s}return{w:h,h:r}}const le=class extends Nt{constructor(t){super(Object.assign({rotation:new F.Z(0,360,{interval:5}).randomizeBetweenOptions([0,180]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),aspectRatio:new Z.Z(0,1,{interval:.05}).set(0).enableInteraction().setOrder(1).setLabel("form")},t)),.5!==this.state.aspectRatio.value&&this.state.rotation.set(0),this.state.saved||this.state.hasTextInside||this.state.aspectRatio.set(0)}createPath(t){let{width:e,height:s}=t;this.reset();const i=this.state.rotation.value,a=z.Z.deg2rad(i),n=1-.75*this.state.aspectRatio.value,o=Math.min(e,s)/2,h=Math.cos(a)*o,l=Math.sin(a)*o;this.path=new it([["M",h,l],["A",o,o*n,i,1,0,-h,-l],["A",o,o*n,i,1,0,h,l],["Z"]]);const c=re(e,s*n,a),d=this.getStrokeOffset()/2,u=Math.min(e,s*n)/2,p=r.Z.insideCircle(0,0,u-d/2),g=r.Z.insideEllipse(0,0,c.w/2-d,c.h/2-d);this.contentBox=p.w*p.h>g.w*g.h?p:g}};function ce(t){const e=[],s=new Y.Z;for(let i=0;i<t.length;i++){/h/i.test(t[i][0])?e.push(["L",t[i][1],s.y]):/v/i.test(t[i][0])?e.push(["L",s.x,t[i][1]]):e.push(t[i]);const a=e[i].length;a>2&&s.set(e[i][a-2],e[i][a-1])}return e}function de(t,e,s){let{singleRadius:i=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=K(t),n=[];let o=e;if(i){const t=[];a.forEach((e=>{J(ce(e),((e,s,i,a)=>{t.push(ue(s,i,a))}))})),o=Math.min(e,Math.min(...t))}return a.forEach((t=>{const e=ce(t),i=[],a=e[0];J(e,((t,e,a,n,h)=>{const r=s(o,e,a,n,h);i.push(...r)}),(t=>{i.push(t)})),/m/i.test(a[0])&&!/m/i.test(i[0][0])&&i.unshift(a),n.push(...i)})),n}function ue(t,e,s){const i=t.x-e.x,a=t.y-e.y,n=t.x-s.x,o=t.y-s.y,h=(Math.atan2(a,i)-Math.atan2(o,n))/2,r=Math.abs(Math.tan(h)),l=pe(i,a),c=pe(n,o);return Math.min(l,c)/2*r}function pe(t,e){return Math.sqrt(t*t+e*e)}const ge=class extends Nt{constructor(t){super(Object.assign({cornerType:new I.Z([0,1,2,3]).randomizeBetweenOptions([0,1,3]).enableInteraction().setLabel("corners",["round","curved","cut off","super","flower"]),cornerRadius:new Z.Z(0,1).randomizeBetweenOptions([0,.05,.125,.25,.5,.75,1]).enableInteraction().setLabel("corner size")},t))}applyCorners(){const t=this.state.cornerRadius.value,e=this.state.hasStroke.value;let s=null;if(2===this.state.cornerType.value){const e=[];if(J(this.path.data,((t,s,i,a)=>{const n=Math.abs(z.Z.getAngleBetweenPoints(i,s,a));n&&e.push(n)})),this.minAngle=Math.min(...e)||0,!t)return;this.minAngle=Math.PI-(Math.PI/2-this.minAngle/2)}switch(this.state.cornerType.value){case 0:s=this.path.getMaxRadius()*t,this.path.data=function(t,e){const s=new Y.Z,i=new Y.Z;return de(t,e,((t,e,a,n,o)=>{const h=z.Z.getAngleBetweenPoints(a,e,n)/2,r=tt(a,e,n)?1:-1,l=t/Math.tan(h)*r,c=Math.atan2(e.y-a.y,e.x-a.x),d=Math.atan2(e.y-n.y,e.x-n.x);return s.set(e.x+Math.cos(c)*l,e.y+Math.sin(c)*l),i.set(e.x+Math.cos(d)*l,e.y+Math.sin(d)*l),[[0===o?"M":"L",s.x,s.y],["A",t,t,0,0,1===r?1:0,i.x,i.y]]}))}(this.path.data,s);break;case 1:if(s=this.path.getMaxCurveRadius()*t,e&&s<5)return;this.path.data=function(t,e){const s=new Y.Z,i=new Y.Z,a=de(t,e,((t,e,a,n,o)=>{const h=z.Z.getAngleBetweenPoints(a,e,n)/2,r=-Math.abs(t/Math.sin(h)),l=tt(a,e,n)?1:-1,c=Math.atan2(e.y-a.y,e.x-a.x)+h;return s.set(e.x+Math.cos(c)*(r+t),e.y+Math.sin(c)*(r+t)),i.set(s.x+Math.cos(c+Math.PI/2*l)*-t,s.y+Math.sin(c+Math.PI/2*l)*-t),[0===o?["C",0,0,i.x,i.y,s.x,s.y]:["S",i.x,i.y,s.x,s.y]]}));return a[0][1]=s.x,a[0][2]=s.y,a[1][1]=s.x+(s.x-i.x),a[1][2]=s.y+(s.y-i.y),a}(this.path.data,s);break;case 2:s=this.path.getMaxRadius()*t,this.path.data=function(t,e){const s=new Y.Z,i=new Y.Z;return de(t,e,((t,e,a,n,o)=>{const h=z.Z.getAngleBetweenPoints(a,e,n)/2,r=-(Math.abs(t/Math.sin(h))-t)/Math.cos(h),l=Math.atan2(e.y-a.y,e.x-a.x),c=Math.atan2(e.y-n.y,e.x-n.x);return s.set(e.x+Math.cos(l)*r,e.y+Math.sin(l)*r),i.set(e.x+Math.cos(c)*r,e.y+Math.sin(c)*r),[[0===o?"M":"L",s.x,s.y],["L",i.x,i.y]]}))}(this.path.data,s);break;case 3:s=this.path.getMaxRadius()*t,this.path.data=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25;const i=new Y.Z,a=new Y.Z,n=new Y.Z,o=new Y.Z;return de(t,e,((t,e,h,r,l)=>{const c=z.Z.getAngleBetweenPoints(h,e,r)/2,d=tt(h,e,r)?1:-1,u=t/Math.tan(c)*d,p=Math.atan2(e.y-h.y,e.x-h.x),g=Math.atan2(e.y-r.y,e.x-r.x);return i.set(e.x+Math.cos(p)*u,e.y+Math.sin(p)*u),a.set(e.x+Math.cos(g)*u,e.y+Math.sin(g)*u),n.set(e.x+Math.cos(p)*u*s,e.y+Math.sin(p)*u*s),o.set(e.x+Math.cos(g)*u*s,e.y+Math.sin(g)*u*s),[[0===l?"M":"L",i.x,i.y],["C",n.x,n.y,o.x,o.y,a.x,a.y]]}))}(this.path.data,s);break;case 4:s=this.path.getMaxCurveRadius()*t,this.path.data=function(t,e){const s=new Y.Z,i=new Y.Z,a=new Y.Z,n=new Y.Z,o=de(t,e,((t,e,o,h)=>{const r=z.Z.getAngleBetweenPoints(o,e,h)/2,l=Math.atan2(e.y-o.y,e.x-o.x)+r,c=Math.abs(t/Math.sin(r));n.copy(a),s.set(e.x+Math.cos(l)*-(c-t),e.y+Math.sin(l)*-(c-t));const d=tt(o,e,h)?1:0;return i.set(s.x+Math.cos(l-Math.PI/2)*t*d,s.y+Math.sin(l-Math.PI/2)*t*d),a.set(s.x+Math.cos(l+Math.PI/2)*t*d,s.y+Math.sin(l+Math.PI/2)*t*d),[["C",n.x,n.y,i.x,i.y,s.x,s.y]]}));return o[0][1]=s.x,o[0][2]=s.y,o[1][1]=a.x,o[1][2]=a.y,o}(this.path.data,s)}}},me=class extends ge{constructor(t){var e;super(Object.assign({rotation:new F.Z(0,360,{interval:5}).weightedRandomizeBetweenOptions([0,45],[8,1]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),aspectRatio:new Z.Z(0,1,{interval:.05}).weightedRandomizeBetweenOptions([0,.5],[8,1]).enableInteraction().setOrder(1).setLabel("form")},t)),(e="points")in this?Object.defineProperty(this,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[e]=null,.5!==this.state.aspectRatio.value&&this.state.rotation.set(0),this.state.saved||(this.state.hasTextInside?this.state.rotation.set(0):this.state.aspectRatio.set(0))}createPath(t){let{width:e,height:s}=t;this.reset(),this.points=[];const i=z.Z.deg2rad(this.state.rotation.value),a=1-.75*this.state.aspectRatio.value,n=Math.min(e,s*a)/2,o=e/2,l=s/2*a,c=re(e,s*a,i);this.setMaxStrokeWidth((o**2+l**2)**.5*2*h.Wj.MAX_STROKE_WIDTH);const d=this.state.hasStroke.value?this.maxStroke*(this.state.strokeOffset.value/2):0,u=r.Z.insideCircle(0,0,n-d/2),p=r.Z.insideEllipse(0,0,c.w/2-d/2,c.h/2-d/2);this.contentBox=u.w*u.h>p.w*p.h?u:p,this.path=new it(`M${-o},${-l} L${o},${-l} L${o},${l} L${-o},${l}Z`),this.path.rotate(i),this.applyCorners()}};function fe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const ye=class extends ge{constructor(t){super(Object.assign({rotation:new F.Z(0,360,{interval:5}).set(0).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),numPoints:new F.Z(4,50).randomizeBetweenOptions([5,6,8,16,32]).setRealValueOnLabel().enableInteraction().setOrder(1).setLabel("spikes"),innerRadiusFactor:new Z.Z(.05,1).randomizeBetween(.1,.5).enableInteraction().setOrder(2).setLabel("inset")},t)),fe(this,"points",null),fe(this,"symbolBox",null),0!==this.state.innerRadiusFactor.value&&(this.state.cornerType.add(4),this.state.cornerType.randomizeBetweenOptions([0,1,3,4])),this.state.saved||this.state.hasStroke.set(!1)}createPath(t){let{width:e,height:s}=t;this.reset();const i=.5*(1-this.state.innerRadiusFactor.value)+.5;this.points=[];const a=z.Z.deg2rad(this.state.rotation.value-(4===this.state.numPoints.value?45:90)),n=Math.min(e,s)/2,o=0!==this.state.innerRadiusFactor.value,l=o?2*this.state.numPoints.value:this.state.numPoints.value;let c=1;o&&(c=Math.cos(2*Math.PI/l));for(let t=0;t<l;t++){const n=t%2==0?1:i*c,o=t/l*Math.PI*2+a,h=new Y.Z(Math.cos(o)*e/2*n,Math.sin(o)*s/2*n);this.points.push(h)}const d=-z.Z.getAngleBetweenPoints(this.points[this.points.length-1],this.points[0],this.points[1]),u=z.Z.getAngleBetweenPoints(this.points[0],this.points[1],this.points[2]),p=Math.cos(Math.PI/l),g=n*i*(0===this.state.innerRadiusFactor.value?p:c);this.setMaxStrokeWidth(Math.sqrt(e**2+s**2)*h.Wj.MAX_STROKE_WIDTH);const m=this.state.hasStroke.value,f=2===this.state.cornerType.value&&0===this.state.cornerRadius.value,y=m?this.maxStroke*(this.state.strokeWidth.value+this.state.strokeOffset.value/2):0,v=m&&f?1/Math.sin(d/2):1,x=m&&f&&o?1/Math.sin(u/2):1;this.state.numPoints.value>3?this.symbolBox=new r.Z(-e/2,-s/2,e,s).pad(-y*(v-1)/2):this.equalBoundarySpace=1-(1-2**.5/2),this.path=new it(`${this.points.map(((t,e)=>`${0===e?"M":"L"}${t.x}, ${t.y}`))}Z`),this.applyCorners(),this.contentBox=r.Z.insideCircle(0,0,g-this.getStrokeOffset()/4*x)}},ve=class extends ye{constructor(t){super(Object.assign({innerRadiusFactor:new nt.Z(0),numPoints:new nt.Z(3)},t))}},xe=class extends ye{constructor(t){super(Object.assign({numPoints:new F.Z(5,8).set(6).enableInteraction().setRealValueOnLabel().setLabel("sides"),innerRadiusFactor:new nt.Z(0)},t)),this.state.cornerType.randomizeBetweenOptions([0,1]),this.state.cornerRadius.randomizeBetweenOptions([0,.05,.125,.25,.5])}},be=class extends ge{constructor(t){super(Object.assign({rotation:new F.Z(0,360,{interval:5}).randomizeBetweenOptions([0,180]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),cornerType:new nt.Z(0),cornerRadius:new nt.Z(0),doubleDrop:(new T.Z).setLabel("double drop").setOrder(1).enableInteraction(),dropFactor:new Z.Z(0,1).randomizeBetween(.15,.35).enableInteraction().setOrder(2).setLabel("drop")},t))}createPath(t){let{width:e,height:s}=t;this.reset();const i=z.Z.deg2rad(this.state.rotation.value),a=Math.min(e,s)/2,n=this.state.doubleDrop.value,o=(1.2+2*this.state.dropFactor.value)*a,h=new Y.Z(Math.cos(i-Math.PI/2)*o,Math.sin(i-Math.PI/2)*o),l=new Y.Z(Math.cos(i)*a,Math.sin(i)*a),c=new Y.Z(Math.cos(i+Math.PI)*a,Math.sin(i+Math.PI)*a),d=n?a/Math.sqrt(2)*(1+this.state.dropFactor.value):a/Math.sqrt(2),u=new Y.Z(l.x+Math.cos(i-Math.PI/2)*d,l.y+Math.sin(i-Math.PI/2)*d),p=new Y.Z(c.x+Math.cos(i-Math.PI/2)*d,c.y+Math.sin(i-Math.PI/2)*d);if(n){const t=new Y.Z(l.x+Math.cos(i+Math.PI/2)*d,l.y+Math.sin(i+Math.PI/2)*d),e=new Y.Z(c.x+Math.cos(i+Math.PI/2)*d,c.y+Math.sin(i+Math.PI/2)*d),s=new Y.Z(Math.cos(i+Math.PI/2)*o,Math.sin(i+Math.PI/2)*o);this.path=new it([`M${h.x},${h.y}`,`Q${u.x},${u.y},${l.x},${l.y}`,`Q${t.x},${t.y},${s.x},${s.y}`,`Q${e.x},${e.y},${c.x},${c.y}`,`Q${p.x},${p.y},${h.x},${h.y}`,"Z"].join(" "))}else this.path=new it([`M${h.x},${h.y}`,`Q${u.x},${u.y},${l.x},${l.y}`,`A${a},${a} 0 1 1 ${c.x},${c.y}`,`Q${p.x},${p.y},${h.x},${h.y}`,"Z"].join(" "));this.contentBox=r.Z.insideCircle(0,0,a-this.getStrokeOffset()/4)}},we=class extends ge{constructor(t){var e;super(Object.assign({rotation:new F.Z(0,360,{interval:5}).randomizeBetweenOptions([0,180]).setRealValueOnLabel().setOrder(0).setLabel("rotation").enableInteraction(),size:new Z.Z(0,1).randomize().enableInteraction().setOrder(1).setLabel("form"),position:new Z.Z(0,1).set(1).enableInteraction().setOrder(2).setLabel("inset")},t)),(e="points")in this?Object.defineProperty(this,e,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[e]=null,t.saved||(this.state.cornerType.randomizeBetweenOptions([0,2]),this.state.cornerRadius.randomizeBetweenOptions([0,.05,.125,.25]))}createPath(t){let{width:e,height:s}=t;this.reset(),this.points=[];const i=.25*(1-this.state.size.value)*e,a=.25*this.state.size.value*s,n=.5*this.state.position.value*(s-2*a);let o,h;this.points=[new Y.Z(e-i,a+n),new Y.Z(e/2,s-a),new Y.Z(i,a+n)],n>0?(this.points.unshift(new Y.Z(e/2,a)),o=z.Z.getAngleBetweenPoints(this.points[0],this.points[1],this.points[2])/2,h=z.Z.getAngleBetweenPoints(this.points[3],this.points[0],this.points[1])/2):(o=z.Z.getAngleBetweenPoints(this.points[2],this.points[0],this.points[1])/2,h=Math.PI/2);let l=new Y.Z(e/2,a+n+(e/2-i)*-Math.tan(o-(Math.PI/2-h)));const c=Math.abs(Math.sin(h)*(l.y-a)),d=new Q;d.rotate(z.Z.deg2rad(this.state.rotation.value)),this.points=this.points.map((t=>d.apply(t))),l=d.apply(l),this.state.hasStroke.value&&2===this.state.cornerType.value&&0===this.state.cornerRadius.value&&1===this.state.position.value&&this.points.push(this.points[0].clone()),this.path=new it(`${this.points.map(((t,e)=>`${0===e?"M":"L"}${t.x}, ${t.y}`))}Z`),this.applyCorners(),this.contentBox=r.Z.insideCircle(l.x,l.y,c-this.getStrokeOffset()/4)}};var Se=s(6056);const ke=class extends k.Z{constructor(){var t,e;super(...arguments),e=[{name:"circle",type:le},{name:"rectangle",type:me},{name:"triangle",type:ve},{name:"ngon",type:xe},{name:"star",type:ye},{name:"kite",type:we},{name:"drop",type:be},{name:"blob",type:he}],(t="types")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}modify(t){const e=t.state.saved?t.state.saved.model:null;let s=e&&this.types.find((t=>t.name===e))?e:this.types[Math.floor(Math.random()*this.types.length)].name;if(!t.state.saved)if(t.state.hasTextInside){const t=["circle","rectangle","ngon","star","blob","kite","drop"];t.includes(s)||(s=(0,Se.Z)(t,[32,8,8,1,2,1,1]))}else if(t.state.hasTextBelow){const t=["circle","rectangle","ngon","star","blob","kite","drop"];t.includes(s)||(s=(0,Se.Z)(t,[16,2,8,1,2,1,1]))}else{const t=["circle","rectangle","ngon"];t.includes(s)||(s=(0,Se.Z)(t,[12,2,4]))}const i=new(0,this.types.find((t=>t.name===s)).type)({saved:t.state.saved,hasTextInside:t.state.hasTextInside});i.component=t,t.state.model.set(s),t.state.type=i,t.state.models=this.types.map((t=>t.name))}},Be=class extends v.Z{constructor(t){super(Object.assign({model:new S.Z,type:null,models:null,saved:null},t)),this.addModifiers([ke]),this.applyModifiers()}createShape(){return this.state.type}};function Ce(t,e){const s=(t.x+e.x)/2,i=(t.y+e.y)/2,a=Ze(s,i,t.x,t.y),n=Ze(s,i,e.x,e.y);return{x:s,y:i,r:Math.max(a,n)}}function Me(t,e){return null!==t&&Ze(e.x,e.y,t.x,t.y)<=t.r}function Te(t,e,s,i,a,n){return(s-t)*(n-e)-(i-e)*(a-t)}function Ze(t,e,s,i){return((s-t)**2+(i-e)**2)**.5}const Ie=class extends It{constructor(t){super(t),void 0===this.state.shapes&&(this.state.shapes=[]),this.state.shapes.forEach((t=>{this.addShape(t)}))}add(t){this.state.shapes.includes(t)||(this.state.shapes.push(t),this.addShape(t))}addShape(t){return t.parent=this,this}empty(){this.state.shapes.length=0}initializeGroupBox(){this.boundingBox||(this.boundingBox=new r.Z,this.boundingBox.join(...this.state.shapes.map((t=>t.getBoundingBox()))),this.trimBox=new r.Z,this.trimBox.join(...this.state.shapes.map((t=>t.getTrimBox?t.getTrimBox():t.getBoundingBox()))),this.trimBox.set(this.trimBox.x-this.boundingBox.x,this.trimBox.y-this.boundingBox.y,this.trimBox.w,this.trimBox.h),this.state.shapes.forEach((t=>{t.position.x-=this.boundingBox.x,t.position.y-=this.boundingBox.y})),this.position.set(this.boundingBox.x,this.boundingBox.y),this.boundingBox.set(0,0,this.boundingBox.w,this.boundingBox.h))}update(){this.reset(),this.initializeGroupBox()}getBoundingBox(){return this.initializeGroupBox(),this.updateTransform(),this.worldBoundingBox}getEnclosedCircle(){const t=[];if(this.state.shapes.forEach((e=>{e.width&&e.height&&t.push(new Y.Z(e.worldPosition.x,e.worldPosition.y),new Y.Z(e.worldPosition.x+e.width,e.worldPosition.y),new Y.Z(e.worldPosition.x+e.width,e.worldPosition.y+e.height),new Y.Z(e.worldPosition.x,e.worldPosition.y+e.height))})),t.length){const e=function(t){let e=null;return t.forEach(((s,i)=>{null!==e&&Me(e,s)||(e=function(t,e){let s={x:e.x,y:e.y,r:0};return t.forEach(((i,a)=>{Me(s,i)||(s=0===s.r?Ce(e,i):function(t,e,s){const i=Ce(e,s);let a=null,n=null;if(t.forEach((t=>{if(Me(i,t))return;const o=Te(e.x,e.y,s.x,s.y,t.x,t.y),h=function(t,e,s){const i=(Math.min(t.x,e.x,s.x)+Math.max(t.x,e.x,s.x))/2,a=(Math.min(t.y,e.y,s.y)+Math.max(t.y,e.y,s.y))/2,n=t.x-i,o=t.y-a,h=e.x-i,r=e.y-a,l=s.x-i,c=s.y-a,d=2*(n*(r-c)+h*(c-o)+l*(o-r));if(0===d)return null;const u=i+((n*n+o*o)*(r-c)+(h*h+r*r)*(c-o)+(l*l+c*c)*(o-r))/d,p=a+((n*n+o*o)*(l-h)+(h*h+r*r)*(n-l)+(l*l+c*c)*(h-n))/d,g=Ze(u,p,t.x,t.y),m=Ze(u,p,e.x,e.y),f=Ze(u,p,s.x,s.y);return{x:u,y:p,r:Math.max(g,m,f)}}(e,s,t);null!==h&&(o>0&&(null===a||Te(e.x,e.y,s.x,s.y,h.x,h.y)>Te(e.x,e.y,s.x,s.y,a.x,a.y))?a=h:o<0&&(null===n||Te(e.x,e.y,s.x,s.y,h.x,h.y)<Te(e.x,e.y,s.x,s.y,n.x,n.y))&&(n=h))})),null===a&&null===n)return i;if(null===a&&null!==n)return n;if(null!==a&&null===n)return a;if(null!==a&&null!==n)return a.r<=n.r?a:n;throw new Error("error computing circle")}(t.slice(0,a+1),e,i))})),s}(t.slice(0,i+1),s))})),e}(t);return e}return null}};function Ee(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Ne=class extends Jt{constructor(t){super(Object.assign({sizeFactor:new Z.Z(0,1).randomizeBetween(.65,.75).enableInteraction(),elements:new w.Z({nameShadow:null,name:null,symbol:null,symbolContent:null,icon:null,letter:null,slogan:null})},t)),Ee(this,"shapeIcon",null),Ee(this,"shapeLetter",null),Ee(this,"shapeSymbol",null),Ee(this,"shapeSymbolContent",null),Ee(this,"shapeGroup",null),Ee(this,"hasIcon",!1),Ee(this,"hasLetter",!1),Ee(this,"hasText",!1),Ee(this,"hasSlogan",!1),Ee(this,"hasStroke",!1),Ee(this,"hasRoundStrokes",!1),Ee(this,"hasTextInsideSymbol",!1),Ee(this,"hasSymbol",!0),Ee(this,"ids",["background","symbol","symbolContent","divider","nameShadow","name","slogan","icon"])}initializeEffects(){this.state.effects=this.getEffects(this.state,this.ids)}createElements(){super.createElements();const t=this.state.elements;t.symbol=new Be({saved:Yt(this.state.saved,["elements","symbol"],null),hasTextBelow:0===this.textPosition}),t.symbolContent=new ie({saved:Yt(this.state.saved,["elements","symbolContent"],null),hasStroke:t.symbol.state.type.state.hasStroke.value,hasAspectRatio:t.symbol.state.type.state.aspectRatio&&t.symbol.state.type.state.aspectRatio.value>0}),this.hasIcon||(t.letter=new Pt({curve:new nt.Z(0),font:this.state.fonts.state.symbol,text:new S.Z(this.state.symbolText).enableInteraction(),sizeFactor:new Z.Z(0,1).set(.5).setLabel("size").enableInteraction(),lining:new Z.Z(1,4,{interval:.01}).set(1).enableInteraction().setLabel("lining"),hasBoxedText:(new T.Z).setLabel("box").enableInteraction()})),(!this.state.saved||this.state.saved&&this.state.saved.links)&&"blob"===t.symbol.state.model.value&&(t.symbolContent.state.type.state.ring.active.set(!1),t.symbolContent.state.type.state.hole.active.set(!1)),this.state.links=this.getLinks(this.state,this.ids),this.updateLinks(),this.shapeGroup=new Ie}updateLinks(){const t=this.state.colors.state,e=this.state.elements,s=e.symbolContent.state.type.state.ring.active.value||e.symbolContent.state.type.state.hole.active.value||e.symbolContent.state.hasStroke,i=Math.random()<.75,a=s?"symbolContent":i?null:"symbol",n=!(t.symbol.color===t.name.color)&&Math.random()<.5;["icon"].forEach((e=>{t[e].copyAllFrom(this.state.colors.state.symbolContent)})),this.updateAllLinks(this.state,this.ids,{symbol:{links:["name","divider","slogan"],default:"name"},symbolContent:{links:["symbol"],default:"symbol",linkedTo:i?null:"symbol"},icon:{links:["symbol","symbolContent","name","divider","slogan"],default:"symbol",linkedTo:a},name:{links:["symbol","divider","slogan"],default:"symbol",linkedTo:n?"symbol":null},divider:{links:["symbol","name","slogan"],default:"name",linkedTo:null},slogan:{links:["symbol","name","divider"],default:"symbol",linkedTo:n?"symbol":null}})}async createShapes(){const t=this.state.elements;await super.createShapes(),this.hasIcon?this.shapeIcon=await t.icon.createShape():this.shapeLetter=await t.letter.createShape(),this.shapeNameShadow=await t.nameShadow.createShape(),this.shapeSymbol=t.symbol.createShape(),this.shapeSymbolContent=t.symbolContent.createShape(),this.shapeMap=new Map([["background",this.shapeBackground],["symbol",this.shapeSymbol],["symbolContent",this.shapeSymbolContent],["icon",this.hasIcon?this.shapeIcon:this.shapeLetter],["nameShadow",this.shapeNameShadow],["name",this.shapeName],["divider",this.shapeDivider],["slogan",this.shapeSlogan]])}createPaths(t){const e=this.state.width,s=this.state.height;this.alignText(),this.shapeSymbol.createPath({width:e/4,height:s/4}),this.hasNameShadow&&this.shapeNameShadow.createElement({sourceShape:this.shapeName,svg:t});const i=this.shapeSymbol.getContentBox();this.shapeSymbolContent.createPath({width:i.w,height:i.h});let a=i;this.shapeSymbolContent.hasContent?(this.shapeGroup.add(this.shapeSymbolContent),this.shapeSymbolContent.position.set(i.cx-this.shapeSymbolContent.width/2,i.cy-this.shapeSymbolContent.height/2),a=this.shapeSymbolContent.getContentBox()):this.hasStroke&&this.shapeGroup.add(this.shapeSymbolContent),this.hasIcon?(this.shapeIcon.createElement({forceInBox:!0,width:a.w,height:a.h,padding:new Tt.Z(.3*(1-Math.sqrt(this.shapeIcon.state.sizeFactor.value))*Math.min(this.shapeSymbol.contentBox.w,this.shapeSymbol.contentBox.h)),svg:t}),this.shapeIcon.position.translate(a.x+(a.w-this.shapeIcon.width)/2,a.y+(a.h-this.shapeIcon.height)/2)):this.hasLetter&&(this.shapeLetter.createPath({forceInBox:!0,width:a.w,height:a.h,padding:new Tt.Z(.3*(1-Math.sqrt(this.shapeLetter.state.sizeFactor.value))*Math.min(this.shapeSymbol.contentBox.w,this.shapeSymbol.contentBox.h)),size:64}),this.shapeLetter.position.set(a.x+(a.w-this.shapeLetter.width)/2,a.y+(a.h-this.shapeLetter.height)/2));const n=Math.sqrt(this.shapeSymbol.width*this.shapeSymbol.height)*this.getSizeFactor(this.state.sizeFactor.value);this.shapeName.createPath({size:n}),this.shapeSlogan.createPath({size:n*this.shapeSlogan.state.sizeFactor.value}),this.hasDivider&&this.shapeDivider.createPath({width:2*Math.max(this.hasText?this.shapeName.width:0,this.hasSlogan?this.shapeSlogan.width:0),height:Math.max(this.hasText?this.shapeName.worldSize:0,this.hasSlogan?this.shapeSlogan.worldSize:0)}),this.positionShapes(this.shapeSymbol),this.shapeGroup.update();const o=(.5*this.state.size.value+.5)*this.getOptimalSize(),r=h.Wj.CONTENT_PADDING,l=Math.min((e-r.horizontal*e)/this.shapeGroup.width,(s-r.vertical*s)/this.shapeGroup.height)*o;this.shapeGroup.position.set(-this.shapeGroup.width/2,-this.shapeGroup.height/2),this.shapeGroup.scale.set(l,l),this.shapeGroup.position.set((e-this.shapeGroup.width)/2,(s-this.shapeGroup.height)/2),this.initContentDimensions(t,this.shapeGroup)}initializeOptions(){let{isBig:t=!0,isMonotone:e=!1,hasBackground:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hasBackground=s,this.isMonotone=e,this.hasLetter=!this.hasIcon&&Boolean(this.shapeLetter.state.text.value),this.hasText=Boolean(this.shapeName.state.text.value)&&t,this.hasSlogan=Boolean(this.shapeSlogan.state.text.value)&&t,this.hasStroke=this.shapeSymbol.state.hasStroke.value,this.hasRoundStrokes=void 0===this.shapeSymbol.state.cornerType||2!==this.shapeSymbol.state.cornerType.value,this.hasDivider=this.hasText&&this.shapeDivider.state.active.value,this.hasNameShadow=this.hasText&&this.shapeNameShadow.state.active.value&&(this.shapeNameShadow.state.size.value||this.shapeNameShadow.state.offset.value),this.state.colors.update({hasNameShadow:this.hasNameShadow,recreatedFromSavedState:this.recreatedFromSavedState,isMonotone:e}),t||(this.shapeName.resetText(),this.shapeSlogan.resetText()),this.layers=this.getLayers(this.ids.filter((t=>"background"!==t)))}setElements(t){const e=new Map,s=this.shapeSymbolContent.hasContent,i=this.isMonotone||this.isLinked(this.layers,"symbol","symbolContent"),a=this.shapeSymbolContent.state.hole&&this.shapeSymbolContent.state.hole.active.value,n=this.shapeSymbolContent.state.ring&&this.shapeSymbolContent.state.ring.active.value,o=new Set,r=new Set;["symbolContent","icon"].forEach((t=>{const e=this.isLinked(this.layers,"symbol",t),s=this.isLinked(this.layers,"symbolContent",t);this.isMonotone||e||s&&!(a||n||this.hasStroke)?o.add(t):s&&r.add(t)}));let l=this.layers.slice();const c=[],d=[],u=t=>o.has(t)||r.has(t),p=s=>{u(s)&&(l=this.removeFromLayers(l,s),o.has(s)?c.push(t.createElementFromDefinition(e.get(s))):r.has(s)&&d.push(t.createElementFromDefinition(e.get(s))))};let g=null,m=null,f=null;if(this.hasSymbol&&(g=this.addDefinitionFromShape(t,this.shapeSymbol,{strokeLinecap:this.hasRoundStrokes?"round":"square",strokeLinejoin:this.hasRoundStrokes?"round":"miter",strokeMiterlimit:h.Wj.STROKE_MITER_LIMIT})),s||this.hasStroke){if(f=t.createElement("g"),s&&(m=t.addChild(f,t.createElement("path",{d:t.getPathDescriptionFromShape(this.shapeSymbolContent),fill:u("symbolContent")?"#000":"#fff"}))),this.hasStroke){const e=t.addChild(f,t.createElementFromDefinition(g,{fill:"none",stroke:u("symbolContent")?"#000":"#fff",strokeWidth:t.fixNumber(this.shapeSymbol.worldStrokeOffset/2)}));s?(this.shapeSymbolContent.boundingBox.pad(-Math.max(this.shapeSymbol.boundingBox.w-this.shapeSymbolContent.boundingBox.w,this.shapeSymbol.boundingBox.h-this.shapeSymbolContent.boundingBox.h)/2+this.shapeSymbol.worldStrokeWidth/4),this.shapeSymbolContent.effectBox.pad(-Math.max(this.shapeSymbol.effectBox.w-this.shapeSymbolContent.effectBox.w,this.shapeSymbol.effectBox.h-this.shapeSymbolContent.effectBox.h)/2)):(m=e,this.shapeSymbolContent.boundingBox=this.shapeSymbol.boundingBox.clone().pad(this.shapeSymbol.worldStrokeWidth/4),this.shapeSymbolContent.effectBox=this.shapeSymbol.effectBox.clone())}e.set("symbolContent",t.addDefinition(f)),u("symbolContent")?p("symbolContent"):(l=this.removeFromLayers(l,"symbolContent"),this.addLayerToID(l,"symbol","symbolContent"))}const y=(t=>{let e="#fff";return u(t)&&(o.has(t)?e=a&&i?"#fff":"#000":r.has(t)&&(e=a?i?"#fff":"#000":"#fff")),e})("icon");if(this.hasIcon?(e.set("icon",t.addDefinition(this.shapeIcon.getElement({fillSolid:y,fillTransparent:"#fff"===y?"#000":"#fff"}))),p("icon")):this.hasLetter&&(e.set("icon",this.addDefinitionFromShape(t,this.shapeLetter,{fill:y})),p("icon")),this.sortLayers(l),this.hasSymbol){const s=t.createElement("g"),i=t.createElementFromDefinition(g,{strokeWidth:t.fixNumber(this.shapeSymbol.worldStrokeOffset/2+this.shapeSymbol.worldStrokeWidth)});t.addChild(s,i),c.length&&t.setAttributes(s,{mask:t.addMask({fill:"#fff",fillBox:this.shapeSymbol.getEffectBox(),elements:c})}),e.set("symbol",t.addDefinition(s))}m&&d.length&&d.forEach((e=>{t.addChild(f,e)}));let v=null;if(this.hasText&&e.set("name",this.addDefinitionFromShape(t,this.shapeName)),this.hasNameShadow&&(this.isMonotone&&(l=this.removeFromLayers(l,"name"),v=t.addMask({fill:"#fff",fillBox:this.shapeName.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000"})]})),e.set("nameShadow",t.addDefinition(this.shapeNameShadow.getElement({sourceID:e.get("name"),color:"#fff",svg:t}),null===v?{}:{mask:v}))),this.hasDivider){this.shapeDivider.getBoundingBox();const s=this.shapeDivider.hasStroke,i=Math.max(this.shapeName.gapWidth*this.shapeName.worldSize,s?this.shapeDivider.worldStrokeWidth/2:this.shapeDivider.height/2);let a=null;!this.hasNameShadow&&this.shapeDivider.y<=this.shapeName.worldTypographicBoundingBox.y+this.shapeName.worldTypographicBoundingBox.h+i/2&&(a=t.addMask({fill:"#fff",fillBox:this.shapeDivider.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000",stroke:"#000",strokeWidth:t.fixNumber(i),strokeLinecap:"round",strokeLinejoin:"round"})]})),e.set("divider",this.addDefinitionFromShape(t,this.shapeDivider,{strokeLinecap:s?this.getStrokeCap(this.shapeDivider):null,strokeLinejoin:s?this.getStrokeJoin(this.shapeDivider):null,strokeMiterlimit:h.Wj.STROKE_MITER_LIMIT,mask:a}))}this.hasSlogan&&e.set("slogan",this.addDefinitionFromShape(t,this.shapeSlogan)),this.renderLayers(t,t.svg,l,e)}async draw(t,e){try{await this.addRenderTask((()=>{this.initializeOptions(e)})),this.hasBackground&&await this.addRenderTask((()=>this.setBackground(t))),await this.addRenderTask((()=>{this.shapeGroup.empty(),this.shapeGroup.add(this.shapeSymbol),this.hasIcon?this.shapeGroup.add(this.shapeIcon):this.hasLetter&&this.shapeGroup.add(this.shapeLetter),this.hasText&&this.shapeGroup.add(this.shapeName),this.hasDivider&&this.shapeGroup.add(this.shapeDivider),this.hasSlogan&&this.shapeGroup.add(this.shapeSlogan),this.shapeGroup.reset()})),await this.addRenderTask((()=>this.createPaths(t))),await this.addRenderTask((()=>this.setElements(t))),h.Wj.DRAW_BOUNDING_BOXES&&await this.addRenderTask((()=>this.drawBoundingBoxes(t)))}catch(t){if(t instanceof C)return!1;throw t}return!0}};function Oe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const $e=class extends Jt{constructor(t){super(Object.assign({sizeFactor:new Z.Z(0,1).randomizeBetween(.65,.75).enableInteraction(),contentSize:new Z.Z(0,1).set(.85).enableInteraction(),elements:new w.Z({nameShadow:null,name:null,symbol:null,symbolContent:null,icon:null,slogan:null})},t)),Oe(this,"shapeIcon",null),Oe(this,"shapeSymbol",null),Oe(this,"shapeSymbolContent",null),Oe(this,"shapeGroup",null),Oe(this,"shapeContentGroup",null),Oe(this,"hasIcon",!1),Oe(this,"hasText",!1),Oe(this,"hasSlogan",!1),Oe(this,"hasStroke",!1),Oe(this,"hasRoundStrokes",!1),Oe(this,"hasTextInsideSymbol",!0),Oe(this,"hasSymbol",!0),Oe(this,"hasSloganInCircle",!1),Oe(this,"ids",["background","symbol","symbolContent","divider","nameShadow","name","slogan","icon"])}initializeEffects(){this.state.effects=this.getEffects(this.state,this.ids)}createElements(){super.createElements();const t=this.state.elements;t.symbol=new Be({saved:Yt(this.state.saved,["elements","symbol"],null),hasTextInside:!0}),t.symbolContent=new ie({saved:Yt(this.state.saved,["elements","symbolContent"],null),hasStroke:t.symbol.state.type.state.hasStroke.value,hasAspectRatio:t.symbol.state.type.state.aspectRatio&&t.symbol.state.type.state.aspectRatio.value>0}),(!this.state.saved||this.state.saved&&this.state.saved.variation)&&("blob"===t.symbol.state.model.value&&(t.symbolContent.state.type.state.ring.active.set(!1),t.symbolContent.state.type.state.hole.active.set(!1)),t.slogan.state.isCircular.value&&(t.slogan.state.sizeFactor.set(Math.min(t.slogan.state.sizeFactor.value,.35)),t.divider.state.type.state.active.set(!1),this.state.contentSize.set(.75))),this.state.links=this.getLinks(this.state,this.ids),this.updateLinks(),this.shapeGroup=new Ie,this.shapeContentGroup=new Ie}updateLinks(){const t=this.state.elements,e=e=>this.state.saved&&this.state.saved.elements&&this.state.saved.elements.symbolContent?this.state.saved.elements.symbolContent.type[e].active:t.symbolContent.state.type.state[e].active.value,s=this.state.colors.state,i=e("hole"),a=e("ring")||i||t.symbolContent.state.hasStroke,n=Math.random()<.75,o=a?"symbolContent":n?"name":"symbol";["icon","name","divider","slogan"].forEach((t=>{s[t].copyAllFrom(this.state.colors.state.symbolContent)})),this.updateAllLinks(this.state,this.ids,{symbolContent:{links:["symbol"],default:"symbol",linkedTo:n?null:"symbol"},icon:{links:["symbol","symbolContent","name","divider","slogan"],default:"symbol",linkedTo:o},name:{links:["symbol","symbolContent","icon","divider","slogan"],default:"symbol",linkedTo:n&&!a?null:o},divider:{links:["symbol","symbolContent","icon","name","slogan"],default:"name",linkedTo:"name"},slogan:{links:["symbol","symbolContent","icon","name","divider"],default:"symbol",linkedTo:o}})}async createShapes(){const t=this.state.elements;await super.createShapes(),this.hasIcon&&(this.shapeIcon=await t.icon.createShape()),this.shapeNameShadow=await t.nameShadow.createShape(),this.shapeSymbol=t.symbol.createShape(),this.shapeSymbolContent=t.symbolContent.createShape(),this.shapeMap=new Map([["background",this.shapeBackground],["symbol",this.shapeSymbol],["symbolContent",this.shapeSymbolContent],["icon",this.shapeIcon],["nameShadow",this.shapeNameShadow],["name",this.shapeName],["divider",this.shapeDivider],["slogan",this.shapeSlogan]])}createPaths(t){const e=this.state.width,s=this.state.height;this.alignText(),this.shapeSymbol.createPath({width:e,height:s}),this.hasNameShadow&&this.shapeNameShadow.createElement({sourceShape:this.shapeName,svg:t});const i=this.shapeSymbol.getContentBox();this.shapeSymbolContent.createPath({width:i.w,height:i.h});let a=i;this.shapeSymbolContent.hasContent?(this.shapeGroup.add(this.shapeSymbolContent),this.shapeSymbolContent.position.set(i.cx-this.shapeSymbolContent.width/2,i.cy-this.shapeSymbolContent.height/2),a=this.shapeSymbolContent.getContentBox()):this.hasStroke&&this.shapeGroup.add(this.shapeSymbolContent);const n=(Math.min(a.w,a.h)**2*2)**.5*.5,o=this.shapeSlogan.state.margin.value*n*.15;a.pad(.025*Math.min(a.w,a.h)),this.hasIcon&&this.shapeIcon.createElement({svg:t});const r=this.hasIcon?this.shapeIcon.boundingBox:null,l=this.hasIcon?Math.sqrt(r.w*r.h)*this.getSizeFactor(this.shapeIcon.state.sizeFactor.value):Math.sqrt(a.w*a.h);this.shapeName.createPath({size:l}),this.hasSloganInCircle||this.shapeSlogan.createPath({size:this.hasSloganInCircle?l:l*this.shapeSlogan.state.sizeFactor.value}),this.hasDivider&&this.shapeDivider.createPath({width:2*Math.max(this.hasText?this.shapeName.width:0,this.hasSlogan?this.shapeSlogan.width:0),height:Math.max(this.hasText?this.shapeName.worldSize:0,this.hasSlogan?this.shapeSlogan.worldSize:0)}),this.positionShapes(this.shapeIcon),this.shapeContentGroup.update();let c=Math.min(a.w/this.shapeContentGroup.width,a.h/this.shapeContentGroup.height)*(1-.35*(1-this.state.contentSize.value));if(!this.hasIcon||this.hasText||this.hasSlogan||(c*=.65+.35*this.state.sizeFactor.value),this.hasSloganInCircle){this.shapeSlogan.createPath({worldCurvePosition:new Y.Z(a.cx,a.cy),worldCurveRadius:n-o});const t=n-o-this.shapeSlogan.worldLineHeight,e=(a.w**2+a.h**2)**.5*.5;Math.sin(this.shapeSlogan.curveAngle)*(n-o-2*this.shapeSlogan.worldLineHeight)-this.shapeContentGroup.height/2*c<0&&(c*=t/e)}if(this.shapeContentGroup.position.set(-this.shapeContentGroup.width/2,-this.shapeContentGroup.height/2),this.shapeContentGroup.scale.set(c,c),this.shapeContentGroup.position.set(a.x+a.w/2-this.shapeContentGroup.width/2,a.y+a.h/2-this.shapeContentGroup.height/2),this.hasIcon&&(this.hasText||this.hasSlogan)){const t=this.shapeContentGroup.getEnclosedCircle();if(t){const e=a.y+a.h/2-t.y*c,s=2*t.r*c-this.shapeContentGroup.height,i=e-this.shapeContentGroup.position.y;this.shapeContentGroup.position.y+=i*(Math.abs(i)/s)**.5}}this.shapeGroup.update();const d=(.5*this.state.size.value+.5)*this.getOptimalSize(),u=h.Wj.CONTENT_PADDING,p=Math.min((e-u.horizontal*e)/this.shapeGroup.width,(s-u.vertical*s)/this.shapeGroup.height)*d;this.shapeGroup.position.set(-this.shapeGroup.width/2,-this.shapeGroup.height/2),this.shapeGroup.scale.set(p,p),this.shapeGroup.position.set((e-this.shapeGroup.width)/2,(s-this.shapeGroup.height)/2),this.initContentDimensions(t,this.shapeGroup)}initializeOptions(){let{isBig:t=!0,isMonotone:e=!1,hasBackground:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hasIcon||(this.ids=this.ids.filter((t=>"icon"!==t))),this.hasBackground=s,this.isMonotone=e,this.hasText=t?Boolean(this.shapeName.state.text.value):!this.hasIcon,this.hasSlogan=Boolean(this.shapeSlogan.state.text.value)&&t,this.hasStroke=this.shapeSymbol.state.hasStroke.value,this.hasRoundStrokes=void 0===this.shapeSymbol.state.cornerType||2!==this.shapeSymbol.state.cornerType.value,this.hasSloganInCircle=this.shapeSlogan.state.isCircular.value,this.hasDivider=this.hasText&&this.shapeDivider.state.active.value,this.hasNameShadow=this.hasText&&this.shapeNameShadow.state.active.value&&(this.shapeNameShadow.state.size.value||this.shapeNameShadow.state.offset.value),this.state.colors.update({hasNameShadow:this.hasNameShadow,recreatedFromSavedState:this.recreatedFromSavedState,isMonotone:e}),t||(this.shapeName.resetText(),this.shapeSlogan.resetText()),this.layers=this.getLayers(this.ids.filter((t=>"background"!==t))),this.hasText||(this.layers=this.removeFromLayers(this.layers,"name")),this.hasSlogan||(this.layers=this.removeFromLayers(this.layers,"slogan"))}setElements(t){const e=new Map,s=this.shapeSymbolContent.hasContent,i=this.isMonotone||this.isLinked(this.layers,"symbol","symbolContent"),a=this.shapeSymbolContent.state.hole&&this.shapeSymbolContent.state.hole.active.value,n=this.shapeSymbolContent.state.ring&&this.shapeSymbolContent.state.ring.active.value,o=new Set,r=new Set;["symbolContent","icon","name","divider","slogan"].forEach((t=>{const e=this.isLinked(this.layers,"symbol",t),s=this.isLinked(this.layers,"symbolContent",t);this.isMonotone||e||s&&!(a||n||this.hasStroke)?o.add(t):s&&r.add(t)}));let l=this.layers.slice();const c=[],d=[],u=t=>o.has(t)||r.has(t),p=(s,i)=>{u(s)&&(l=this.removeFromLayers(l,s),o.has(s)?c.push(t.createElementFromDefinition(e.get(s),i)):r.has(s)&&d.push(t.createElementFromDefinition(e.get(s),i)))},g=t=>{let e="#fff";return u(t)&&(o.has(t)?e=a&&i?"#fff":"#000":r.has(t)&&(e=a?i?"#fff":"#000":"#fff")),e};let m=null,f=null,y=null;if(this.hasSymbol&&(m=this.addDefinitionFromShape(t,this.shapeSymbol,{strokeLinecap:this.hasRoundStrokes?"round":"square",strokeLinejoin:this.hasRoundStrokes?"round":"miter",strokeMiterlimit:h.Wj.STROKE_MITER_LIMIT})),s||this.hasStroke){if(y=t.createElement("g"),s&&(f=t.addChild(y,t.createElement("path",{d:t.getPathDescriptionFromShape(this.shapeSymbolContent),fill:u("symbolContent")?"#000":"#fff"}))),this.hasStroke){const e=t.addChild(y,t.createElementFromDefinition(m,{fill:"none",stroke:u("symbolContent")?"#000":"#fff",strokeWidth:t.fixNumber(this.shapeSymbol.worldStrokeOffset/2)}));s?(this.shapeSymbolContent.boundingBox.pad(-Math.max(this.shapeSymbol.boundingBox.w-this.shapeSymbolContent.boundingBox.w,this.shapeSymbol.boundingBox.h-this.shapeSymbolContent.boundingBox.h)/2+this.shapeSymbol.worldStrokeWidth/4),this.shapeSymbolContent.effectBox.pad(-Math.max(this.shapeSymbol.effectBox.w-this.shapeSymbolContent.effectBox.w,this.shapeSymbol.effectBox.h-this.shapeSymbolContent.effectBox.h)/2)):(f=e,this.shapeSymbolContent.boundingBox=this.shapeSymbol.boundingBox.clone().pad(this.shapeSymbol.worldStrokeWidth/4),this.shapeSymbolContent.effectBox=this.shapeSymbol.effectBox.clone())}e.set("symbolContent",t.addDefinition(y)),u("symbolContent")?p("symbolContent"):(l=this.removeFromLayers(l,"symbolContent"),this.addLayerToID(l,"symbol","symbolContent"))}if(this.hasIcon){const s=g("icon");e.set("icon",t.addDefinition(this.shapeIcon.getElement({fillSolid:s,fillTransparent:"#fff"===s?"#000":"#fff"}))),p("icon")}const v=u("name"),x=g("name"),b=v&&this.hasNameShadow?"#fff"===x?"#000":"#fff":x;if(this.hasText&&e.set("name",this.addDefinitionFromShape(t,this.shapeName)),this.hasNameShadow&&(e.set("nameShadow",t.addDefinition(this.shapeNameShadow.getElement({sourceID:e.get("name"),color:v?"#000"===b?"#fff":"#000":x,svg:t}))),v)&&(l=this.removeFromLayers(l,"nameShadow"),(r.has("name")?d:c).push(t.createElementFromDefinition(e.get("nameShadow")))),this.hasText&&p("name",{fill:b}),this.hasSlogan&&(e.set("slogan",this.addDefinitionFromShape(t,this.shapeSlogan,{fill:g("slogan")})),p("slogan")),this.hasDivider){this.shapeDivider.getBoundingBox();const s=this.shapeDivider.hasStroke,i=Math.max(this.shapeName.gapWidth*this.shapeName.worldSize,s?this.shapeDivider.worldStrokeWidth/2:this.shapeDivider.height/2);let a=null;!this.hasNameShadow&&this.shapeDivider.y<=this.shapeName.worldTypographicBoundingBox.y+this.shapeName.worldTypographicBoundingBox.h+i/2&&(a=t.addMask({fill:"#fff",fillBox:this.shapeDivider.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000",stroke:"#000",strokeWidth:t.fixNumber(i),strokeLinecap:"round",strokeLinejoin:"round"})]}));const n=g("divider");e.set("divider",this.addDefinitionFromShape(t,this.shapeDivider,{strokeWidth:s?t.fixNumber(this.shapeDivider.worldStrokeWidth):null,strokeLinecap:s?this.getStrokeCap(this.shapeDivider):null,strokeLinejoin:s?this.getStrokeJoin(this.shapeDivider):null,strokeMiterlimit:h.Wj.STROKE_MITER_LIMIT,mask:a,fill:s?"none":n,stroke:s?n:"none"})),p("divider")}if(this.sortLayers(l),this.hasSymbol){const s=t.createElement("g"),i=t.createElementFromDefinition(m,{strokeWidth:t.fixNumber(this.shapeSymbol.worldStrokeOffset/2+this.shapeSymbol.worldStrokeWidth)});t.addChild(s,i),c.length&&t.setAttributes(s,{mask:t.addMask({fill:"#fff",fillBox:this.shapeSymbol.getEffectBox(),elements:c})}),e.set("symbol",t.addDefinition(s))}f&&d.length&&d.forEach((e=>{t.addChild(y,e)})),this.renderLayers(t,t.svg,l,e)}async draw(t,e){try{await this.addRenderTask((()=>{this.initializeOptions(e)})),this.hasBackground&&await this.addRenderTask((()=>this.setBackground(t))),await this.addRenderTask((()=>{this.shapeGroup.empty(),this.shapeContentGroup.empty(),this.shapeGroup.add(this.shapeSymbol),this.shapeGroup.add(this.shapeContentGroup),this.hasIcon&&this.shapeContentGroup.add(this.shapeIcon),this.hasText&&this.shapeContentGroup.add(this.shapeName),this.hasDivider&&this.shapeContentGroup.add(this.shapeDivider),this.hasSlogan&&(this.hasSloganInCircle?this.shapeGroup.add(this.shapeSlogan):this.shapeContentGroup.add(this.shapeSlogan)),this.shapeGroup.reset(),this.shapeContentGroup.reset()})),await this.addRenderTask((()=>this.createPaths(t))),await this.addRenderTask((()=>this.setElements(t))),h.Wj.DRAW_BOUNDING_BOXES&&await this.addRenderTask((()=>this.drawBoundingBoxes(t)))}catch(t){if(t instanceof C)return!1;throw t}return!0}};function Le(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Ae=class extends Jt{constructor(t){super(Object.assign({sizeFactor:new Z.Z(0,1).randomizeBetween(.65,.75).enableInteraction(),elements:new w.Z({nameShadow:null,name:null,icon:null,slogan:null})},t)),Le(this,"shapeIcon",null),Le(this,"shapeGroup",null),Le(this,"hasIcon",!1),Le(this,"hasText",!1),Le(this,"hasSlogan",!1),Le(this,"hasTextInsideSymbol",!1),Le(this,"hasSymbol",!1),Le(this,"ids",["background","divider","nameShadow","name","slogan"])}initializeEffects(){this.hasIcon&&(this.ids=["background","symbol","divider","nameShadow","name","slogan"]),this.state.effects=this.getEffects(this.state,this.ids)}createElements(){super.createElements(),this.state.links=this.getLinks(this.state,this.ids),this.updateLinks(),this.shapeGroup=new Ie}updateLinks(){const t=this.state.colors.state,e=t.symbol.value.value>.95&&t.symbol.saturation.value<.05,s=!(t.symbol.color===t.name.color)&&!e&&Math.random()<.5;this.updateAllLinks(this.state,this.ids,Object.assign({name:{links:this.hasIcon?["symbol","divider","slogan"]:["divider","slogan"],default:this.hasIcon?"symbol":"slogan",linkedTo:s?"symbol":null},divider:{links:this.hasIcon?["symbol","name","slogan"]:["name","slogan"],default:"name",linkedTo:null},slogan:{links:this.hasIcon?["symbol","name","divider"]:["name","divider"],default:"name",linkedTo:s?this.hasIcon?"symbol":"name":null}},this.hasIcon?{symbol:{links:["name","divider","slogan"],default:"name"}}:null))}async createShapes(){const t=this.state.elements;await super.createShapes(),this.hasIcon&&(this.shapeIcon=await t.icon.createShape()),this.shapeNameShadow=await t.nameShadow.createShape();const e=[["background",this.shapeBackground],["nameShadow",this.shapeNameShadow],["name",this.shapeName],["divider",this.shapeDivider],["slogan",this.shapeSlogan]];this.hasIcon&&e.push(["symbol",this.shapeIcon]),this.shapeMap=new Map(e)}createPaths(t){const e=this.state.width,s=this.state.height;this.alignText(),this.hasIcon&&this.shapeIcon.createElement({svg:t}),this.hasNameShadow&&this.shapeNameShadow.createElement({sourceShape:this.shapeName,svg:t});const i=this.hasIcon?Math.sqrt(this.shapeIcon.originalBoundingBox.w*this.shapeIcon.originalBoundingBox.h)*this.getSizeFactor(this.state.sizeFactor.value):Math.sqrt(e*s);this.shapeName.createPath({size:i}),this.shapeSlogan.createPath({size:i*this.shapeSlogan.state.sizeFactor.value}),this.hasDivider&&this.shapeDivider.createPath({width:2*Math.max(this.hasText?this.shapeName.width:0,this.hasSlogan?this.shapeSlogan.width:0),height:Math.max(this.hasText?this.shapeName.worldSize:0,this.hasSlogan?this.shapeSlogan.worldSize:0)}),this.positionShapes(this.shapeIcon),this.shapeGroup.update();const a=(.5*this.state.size.value+.5)*this.getOptimalSize(),n=h.Wj.CONTENT_PADDING,o=Math.min((e-n.horizontal*e)/this.shapeGroup.width,(s-n.vertical*s)/this.shapeGroup.height)*a;this.shapeGroup.position.set(-this.shapeGroup.width/2,-this.shapeGroup.height/2),this.shapeGroup.scale.set(o,o),this.shapeGroup.position.set((e-this.shapeGroup.width)/2,(s-this.shapeGroup.height)/2),this.initContentDimensions(t,this.shapeGroup)}initializeOptions(){let{isBig:t=!0,isMonotone:e=!1,hasBackground:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hasBackground=s,this.isMonotone=e,this.hasText=t?Boolean(this.shapeName.state.text.value):!this.hasIcon,this.hasSlogan=Boolean(this.shapeSlogan.state.text.value)&&t,this.hasDivider=this.hasText&&this.shapeDivider.state.active.value,this.hasNameShadow=this.hasText&&this.shapeNameShadow.state.active.value&&(this.shapeNameShadow.state.size.value||this.shapeNameShadow.state.offset.value),this.state.colors.update({hasNameShadow:this.hasNameShadow,recreatedFromSavedState:this.recreatedFromSavedState,isMonotone:e}),t||(this.shapeName.resetText(),this.shapeSlogan.resetText()),this.layers=this.getLayers(this.ids.filter((t=>"background"!==t)))}setElements(t){const e=new Map;let s=this.layers.slice();this.hasIcon&&e.set("symbol",t.addDefinition(this.shapeIcon.getElement({fillSolid:"#fff",fillTransparent:"#000"})));let i=null;if(this.hasText&&e.set("name",this.addDefinitionFromShape(t,this.shapeName)),this.hasNameShadow&&(this.isMonotone&&(s=this.removeFromLayers(s,"name"),i=t.addMask({fill:"#fff",fillBox:this.shapeName.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000"})]})),e.set("nameShadow",t.addDefinition(this.shapeNameShadow.getElement({sourceID:e.get("name"),color:"#fff",svg:t}),null===i?{}:{mask:i}))),this.hasDivider){this.shapeDivider.getBoundingBox();const s=this.shapeDivider.hasStroke,i=Math.max(this.shapeName.gapWidth*this.shapeName.worldSize,s?this.shapeDivider.worldStrokeWidth/2:this.shapeDivider.height/2);let a=null;!this.hasNameShadow&&this.shapeDivider.y<=this.shapeName.worldTypographicBoundingBox.y+this.shapeName.worldTypographicBoundingBox.h+i/2&&(a=t.addMask({fill:"#fff",fillBox:this.shapeDivider.worldBoundingBox,elements:[t.createElementFromDefinition(e.get("name"),{fill:"#000",stroke:"#000",strokeWidth:t.fixNumber(i),strokeLinecap:"round",strokeLinejoin:"round"})]})),e.set("divider",this.addDefinitionFromShape(t,this.shapeDivider,{strokeLinecap:s?this.getStrokeCap(this.shapeDivider):null,strokeLinejoin:s?this.getStrokeJoin(this.shapeDivider):null,strokeMiterlimit:h.Wj.STROKE_MITER_LIMIT,mask:a}))}this.hasSlogan&&e.set("slogan",this.addDefinitionFromShape(t,this.shapeSlogan)),this.sortLayers(s),this.renderLayers(t,t.svg,s,e)}async draw(t,e){try{await this.addRenderTask((()=>{this.initializeOptions(e)})),this.hasBackground&&await this.addRenderTask((()=>this.setBackground(t))),await this.addRenderTask((()=>{this.shapeGroup.empty(),this.shapeGroup.reset(),this.hasIcon&&this.shapeGroup.add(this.shapeIcon),this.hasText&&this.shapeGroup.add(this.shapeName),this.hasDivider&&this.shapeGroup.add(this.shapeDivider),this.hasSlogan&&this.shapeGroup.add(this.shapeSlogan)})),await this.addRenderTask((()=>this.createPaths(t))),await this.addRenderTask((()=>this.setElements(t))),h.Wj.DRAW_BOUNDING_BOXES&&await this.addRenderTask((()=>this.drawBoundingBoxes(t)))}catch(t){if(t instanceof C)return!1;throw t}return!0}},Pe=class extends k.Z{constructor(){var t,e;super(...arguments),e=[{name:"text",type:Ae},{name:"textWithIcon",type:Ae,hasIcon:!0},{name:"textWithIconHorizontal",type:Ae,hasIcon:!0,textPosition:1},{name:"textWithMonogram",type:Ne},{name:"textWithMonogramHorizontal",type:Ne,textPosition:1},{name:"textWithSymbol",type:Ne,hasIcon:!0},{name:"textWithSymbolHorizontal",type:Ne,hasIcon:!0,textPosition:1},{name:"textInsideSymbol",type:$e},{name:"textWithIconInsideSymbol",type:$e,hasIcon:!0}],(t="types")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}modify(t){const e=t.state.saved?t.state.saved.model:null,s=(0,Se.Z)(Object.keys(this.types),[2,16,8,4,2,16,8,8,4]),i=e&&this.types.find((t=>t.name===e))?e:this.types[s].name,a=this.types.find((t=>t.name===i)),n=a.type;t.state.type=new n(t.state),a.textPosition&&(t.state.type.textPosition=a.textPosition),t.state.saved||(1===t.state.type.textPosition&&t.state.type.state.sizeFactor.randomizeBetween(.6,.75),t.state.symbolText.toLowerCase()===t.state.symbolText.toUpperCase()&&(t.state.type.hasIcon=!0)),t.state.type.hasIcon=a.hasIcon,t.state.type.initializeEffects(),t.state.model.set(i),t.state.models=this.types.map((t=>t.name)),t.state.type.state.colors.initialize(t.state.type)}},De=class extends k.Z{modify(t){if(Math.random()<.85)return;const e=!!t.state.type.hasTextInsideSymbol&&Math.random()<.25,s=t.state.type.hasSymbol?"symbol":"name",i=t.state.type.state.effects[e?s:"background"].state,a=t.state.type.state.colors.state[e?s:"background"];if(!a.gradient.active.value){if(e){if(/polkadot|dots/i.test(i.model.value))return}else if(/shine/i.test(i.model.value))return;a.saturation.value>.15&&i.type.state.active.set(!0)}}};function ze(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Fe=class extends v.Z{constructor(t){super(Object.assign({width:h.Wj.CONTENT_WIDTH,height:h.Wj.CONTENT_HEIGHT,model:new S.Z,type:null,models:null,id:null,saved:null,hue:null,iconSVG:null,iconTerm:null,iconID:null,variation:null},t)),ze(this,"path",null),ze(this,"type",null),this.addModifiers([Pe,De])}async create(){if(this.state.saved)if(this.state.variation){switch(Object.keys(this.state.saved.colors.scheme).forEach((t=>{["hue","saturation","value"].forEach((e=>{delete this.state.saved.colors[t][e]}))})),this.state.variation){case"keep-icon":Object.keys(this.state.saved.elements).forEach((t=>{"icon"!==t&&delete this.state.saved.elements[t]})),delete this.state.saved.fonts,delete this.state.saved.links,delete this.state.saved.model,delete this.state.saved.colors,delete this.state.saved.effects;break;case"layout":Object.keys(this.state.saved.elements).forEach((t=>{/icon|nameShadow/i.test(t)||delete this.state.saved.elements[t]})),delete this.state.saved.links,delete this.state.saved.model;break;case"font":delete this.state.saved.fonts,["name","slogan","letter"].forEach((t=>{this.state.saved.elements[t]&&delete this.state.saved.elements[t].font}));break;case"color":delete this.state.saved.colors,delete this.state.saved.effects,delete this.state.saved.links}new Pe({saved:this.state.saved}).modify(this),this.state.type.recreatedFromSavedState=!/(color|layout|keep-icon)/.test(this.state.variation),this.state.type.createElements(),this.loadState(this.state.type.state,this.state.saved)}else this.state.id?(new Pe({saved:this.state.saved}).modify(this),this.state.type.recreatedFromSavedState=!0,this.state.type.createElements(),this.loadState(this.state.type.state,this.state.saved)):(this.applyModifiers(),this.state.type.recreatedFromSavedState=!0,this.state.type.createElements(),this.loadState(this.state.type.state,this.state.saved));else this.applyModifiers(),this.state.type.recreatedFromSavedState=!1,this.state.type.createElements();await At.Z.wait(),await this.state.type.createShapes(),this.removeSavedStateOnAllObjects(this.state.type.state)}getState(){let{texts:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={version:"1.0.7",state:this.saveState({},this.state.type.state)};return t&&(e.text=this.state.text,e.sloganText=this.state.sloganText,e.symbolText=this.state.symbolText),e}saveState(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;return Object.keys(e).forEach((i=>{const a=e[i];if(!s.has(a))if(a instanceof Object&&s.add(a),a instanceof x.Z)a.isIgnoredOnSave||(t[i]=a.value);else if(a instanceof b.Z){const e=this.saveState({},a.state,s);Object.keys(e).length&&(t[i]=e)}else if(a instanceof w.Z){const e=this.saveState({},a,s);Object.keys(e).length&&(t[i]=e)}})),t}loadState(t,e){t&&Object.keys(e).forEach((s=>{const i=e[s];if(t[s]instanceof x.Z)t[s].isIgnoredOnSave||t[s].set(i);else if("object"==typeof i){const e=t[s]instanceof b.Z?t[s].state:t[s];this.loadState(e,i)}}))}removeSavedStateOnAllObjects(t){Object.keys(t).forEach((e=>{const s=t[e];"saved"===e&&delete t[e],s instanceof b.Z?this.removeSavedStateOnAllObjects(s.state):s instanceof w.Z&&this.removeSavedStateOnAllObjects(s)}))}async draw(t,e){const s=this.state.type;return null!=e&&e.skipStart||(s.isCancelled=!1,await s.startRendering(e)),!s.isCancelled&&s.draw(t,e)}};var _e=s(1221),Re=(s(5208),s(3691)),je=s(5445),We=s(2457),Ge=s(9007);function Ue(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var He=s(6397);function Ve(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var qe=s(8685),Xe=s(5149),Ye=s(6509),Ke=s(8291),Qe=s(468),Je=s(2842);function ts(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var es=s(1160);function ss(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var is=s(9448),as=s(8843);function ns(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var os=s(1458);function hs(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function rs(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ls(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function cs(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var ds=s(483),us=s(6427);function ps(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var gs=s(1494);function ms(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function fs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach((s=>{e[s]instanceof Object&&t[s]?t[s]=fs(t[s],e[s]):t[s]=e[s]})),t}function ys(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var vs=s(8651),xs=s(4074),bs=s(6046);function ws(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Ss=class{constructor(t){let{controls:e=null,inputManager:s=null,useCanvas:i=!1,translations:a={},enableMockups:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ws(this,"controls",null),ws(this,"container",null),ws(this,"frameID",null),ws(this,"useCanvas",!1),ws(this,"isCreating",!1),ws(this,"isCreated",!1),ws(this,"inputManager",null),ws(this,"id",null),ws(this,"logo",null),ws(this,"logoMockup",null),ws(this,"enableMockups",!1),ws(this,"mockupsComplete",!1),ws(this,"logoID",null),ws(this,"image",null),ws(this,"savedStateBeforeStructureChange",null),ws(this,"width",h.Wj.CONTENT_WIDTH),ws(this,"height",h.Wj.CONTENT_HEIGHT),ws(this,"shapeSelector",null),ws(this,"onResizeListener",null),ws(this,"isDestroyed",!1),ws(this,"variations",null),ws(this,"canvas",null),ws(this,"context",null),ws(this,"$logoContainer",null),ws(this,"$mockups",null);const l=document.getElementById(t);this.container=l,this.id=t,this.inputManager=s,this.useCanvas=i,this.enableMockups=r,this.$mockups=(0,_e.Z)(".js-mockup"),this.useCanvas?(this.canvas=(0,_e.Z)("<canvas>")[0],this.image=(0,_e.Z)("<img>").on("load",(()=>{this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.image,0,0),this.hideLoading()})).on("error",(t=>{Qe.Z.captureError(t)}))[0],l.appendChild(this.canvas)):this.$logoContainer=(0,_e.Z)("<div>").appendTo(l),e&&((0,_e.Z)("body").hasClass("has-controls")||(0,_e.Z)("body").addClass("has-controls"),this.controls=new class extends class{constructor(t,e){let{creator:s=null,translations:i={}}=e;Ue(this,"creator",null),Ue(this,"container",null),Ue(this,"isAnimating",!1),Ue(this,"savedState",null),Ue(this,"savedStateBeforeStructureChange",null),Ue(this,"lastState",{}),Ue(this,"logoStates",[]),Ue(this,"logoStateIndex",0),Ue(this,"isFirstTapOnShape",!0),Ue(this,"translations",{}),this.creator=s,this.translations=i,this.container=(0,_e.Z)(t)[0],(0,_e.Z)(".js-logo-previous").on("click",(()=>this.onPrevious())),(0,_e.Z)(".js-logo-next").on("click",(()=>this.onNext()))}async onSave(){(0,_e.Z)(this.container).addClass("is-saving");let t=null;return await Promise.all([new Promise((t=>{window.setTimeout((()=>t()),1e3*We.UI.MINIMUM_API_CALL_WAIT_TIME)})),(0,Re.Z)(`${We.Vi.DOMAIN}/api/save`,{state:JSON.stringify(this.creator.logo.getState()),id:this.creator.logoID}).then((e=>{t=e,je.Z.display({type:"success",message:this.translations.successSaveLogo,isInBody:!0})})).catch((e=>{e&&"TOO_FAST"===e.reason?je.Z.display({type:"error",message:this.translations.infoSaveLogoTooFast,isInBody:!0}):je.Z.display({type:"error",message:this.translations.errorSaveLogo,isInBody:!0}),t=e}))]),(0,_e.Z)(this.container).removeClass("is-saving"),t}onPrevious(){if(0===this.logoStateIndex)return;this.logoStates[this.logoStateIndex]={id:this.creator.logoID,state:JSON.stringify(this.creator.logo.getState())},this.logoStateIndex--;const t=this.logoStates[this.logoStateIndex];this.creator.create({id:t.id,savedState:JSON.parse(t.state)})}onNext(){if(this.logoStates[this.logoStateIndex]={id:this.creator.logoID,state:JSON.stringify(this.creator.logo.getState())},this.logoStateIndex++,this.logoStateIndex<this.logoStates.length){const t=this.logoStates[this.logoStateIndex];return void this.creator.create({id:t.id,savedState:JSON.parse(t.state)})}const t=this.creator.logo.getState(),e=t.state.elements;e.icon&&(this.lastState.icon=e.icon),this.lastState.text=e.name.text,this.lastState.sloganText=e.slogan.text,e.letter&&(this.lastState.symbolText=e.letter.text),this.creator.create({id:this.creator.logoID,text:this.lastState.text,sloganText:this.lastState.sloganText,symbolText:this.lastState.symbolText,savedState:{state:{elements:{icon:this.lastState.icon}},version:t.version}})}saveStateBeforeStructureChange(){this.savedStateBeforeStructureChange=this.saveObject({},this.creator.logo)}dismissStructureChange(){this.creator.savedStateBeforeStructureChange=null,this.savedStateBeforeStructureChange=null,this.isFirstTapOnShape=!0}saveState(){this.savedState=this.saveObject({},this.creator.logo)}saveObject(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;return Object.keys(e).forEach((i=>{const a=e[i];s.has(a)||(a instanceof Object&&s.add(a),a instanceof x.Z?t[i]=a.clone():(a instanceof b.Z||a instanceof w.Z)&&(t[i]=this.saveObject({},a,s)))})),t}async restoreState(){this.savedStateBeforeStructureChange?(await this.creator.recreate({state:this.creator.savedStateBeforeStructureChange}),this.restoreObject(this.creator.logo,this.savedStateBeforeStructureChange),this.creator.draw()):(this.restoreObject(this.creator.logo,this.savedState),this.creator.draw()),this.isFirstTapOnShape=!0,this.savedState=null,this.savedStateBeforeStructureChange=null,this.creator.savedStateBeforeStructureChange=null}restoreObject(t,e){Object.keys(e).forEach((s=>{const i=e[s];i instanceof x.Z?i instanceof I.Z?t[s].set(i.index):t[s].set(i.value):"object"==typeof i&&this.restoreObject(t[s],i)}))}deactivate(){this.screens.forEach((t=>{t.tabs&&t.tabs.forEach((t=>{t.attributes&&t.attributes.forEach((t=>{t.control&&t.control.deactivate&&t.control.deactivate()}))}))}))}enableTab(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.screens.forEach((i=>{i.screen.name===t&&i.tabs&&i.tabs.forEach((t=>{t.tab.name===e&&(0,_e.Z)(t.item).toggleClass("disabled",!s)}))}))}enableAttribute(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.screens.forEach((s=>{s.tabs&&s.tabs.forEach((s=>{s.attributes&&s.attributes.forEach((s=>{this.findAttribute(s)===t&&(0,_e.Z)(s.item).toggleClass("disabled",!e)}))}))}))}findAttribute(t){let e=null;if(t.attribute){const s=t.attribute.data;e=s?s.hsv?s.hsv:s.bool?s.bool:s.attribute:t.attribute.attribute}return e}enableAllAttributesExcept(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.screens.forEach((s=>{s.tabs&&s.tabs.forEach((s=>{s.attributes&&s.attributes.some((e=>t.includes(this.findAttribute(e))))&&s.attributes.forEach((s=>{t.includes(this.findAttribute(s))||(0,_e.Z)(s.item).toggleClass("disabled",!e)}))}))}))}checkScrollStatus(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||!t.length)return;s&&(t[0].scrollLeft=0);const i=t[0].scrollWidth>t[0].clientWidth;t.toggleClass("scrollable",i);let a=[];switch(e){case 0:a=[this.buttonPrevious1[0],this.buttonNext1[0]],(0,_e.Z)([this.buttonPrevious2[0],this.buttonNext2[0]]).removeClass("active"),(0,_e.Z)([this.buttonPrevious3[0],this.buttonNext3[0]]).removeClass("active");break;case 1:a=[this.buttonPrevious1[0],this.buttonNext1[0]];break;case 2:a=[this.buttonPrevious2[0],this.buttonNext2[0]];break;case 3:a=[this.buttonPrevious3[0],this.buttonNext3[0]]}(0,_e.Z)(a).toggleClass("active",i).off("click"),i&&((0,_e.Z)(a[0]).off().on("click",(e=>{e.stopPropagation(),new Ge.Z({scroll:t[0].scrollLeft}).to({scroll:Math.max(0,t[0].scrollLeft-200)},.35).onUpdate((e=>{t[0].scrollLeft=e.scroll})).easing(h.Xt.IN_OUT).start()})),(0,_e.Z)(a[1]).off().on("click",(e=>{e.stopPropagation(),new Ge.Z({scroll:t[0].scrollLeft}).to({scroll:Math.min(t[0].clientWidth,t[0].scrollLeft+200)},.35).onUpdate((e=>{t[0].scrollLeft=e.scroll})).easing(h.Xt.IN_OUT).start()})))}activateItem(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isFirstTapOnShape&&(this.dismissStructureChange(),this.saveState(),this.isFirstTapOnShape=!1);let e=null,s=null;this.screens.forEach((i=>{i.screen.item!==t&&i.screen.name!==t||(e=i),i.tabs.forEach((a=>{a.tab.item!==t&&a.tab.name!==t||(e=i,s=a)})),i.deactivate({skipAnimation:!0})})),e&&!s&&(s=e.tabs[0]),this.screens.forEach((t=>{t===e&&(t.activate({skipAnimation:!0,skipSaveState:!0}),t.tabs.forEach((t=>{t===s&&t.activate()})))})),this.onResize(!0)}onResize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.checkScrollStatus(this.items,0,t),this.screens.forEach((e=>{e.isActive&&(this.checkScrollStatus(e.items,1,t),e.tabs&&e.tabs.forEach((e=>{e.isActive&&this.checkScrollStatus(e.items,2,t),e.attributes&&e.attributes.forEach((e=>{if(e.control.onUpdateCallback){const t=e&&e.attribute&&e.attribute.data&&e.attribute.data.attribute?e.attribute.data.attribute.value:e.attribute.value;e.control.onUpdateCallback(t)}e.isActive&&this.checkScrollStatus(e.control.isScrollable?(0,_e.Z)(e.control.div):null,3,t)}))})))}))}}{constructor(){super(...arguments),ms(this,"screens",[]),ms(this,"items",null),ms(this,"contents",null),ms(this,"buttons",null)}getInteractiveAttributes(t){let{keys:e=null,ignore:s=[],onUpdate:i=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[];return e?e.forEach((e=>{const s=t[e];s instanceof x.Z&&s.isInteractive&&a.push({name:s.label,icon:s.icon,onUpdate:i?()=>i(e):null,attribute:s})})):Object.keys(t).forEach((e=>{const n=t[e];n instanceof x.Z&&n.isInteractive&&!s.includes(e)&&a.push({name:n.label||e,icon:n.icon,onUpdate:i?()=>i(e):null,attribute:n})})),a.sort(((t,e)=>t.attribute.order-e.attribute.order)),a}getTextSettings(t){const e=[{name:"edit",attribute:t.text,onUpdate:e=>{if(void 0===e)return;const s=e&&(e.match(/(?:\\\||[^|])+/g)||[]).length>1;this.enableAttribute(t.lining,s),this.enableAttribute(t.hasBoxedText,s)}},{name:"font",type:"font",data:{state:t}}];return e.push(...this.getInteractiveAttributes(t,{ignore:["text","font"]})),e}getStructureSettings(){const t=this.creator.logo.state.type,e=[{name:"type",type:"shape",data:{shape:this.creator.logo.state,classPrefix:"structure"}},{name:"size",attribute:t.state.size}];return t.hasTextInsideSymbol&&e.push({name:"content size",attribute:t.state.contentSize}),{name:"layout",contents:[{name:"layout",contents:e}]}}getSymbolSettings(){const t=this.creator.logo.state.type,e=t.state.elements.symbol.state.type.state,s=[{name:"type",type:"shape",data:{shape:t.state.elements.symbol.state,classPrefix:"shape"}}];t.hasTextInsideSymbol||s.push({name:"size",attribute:t.state.sizeFactor}),s.push(...this.getInteractiveAttributes(e,{ignore:["cornerType","cornerRadius","hasStroke","strokeWidth","strokeOffset"]}));const i=[{name:"fill",contents:this.getFillSettings("symbol",!0)},{name:"effect",contents:this.getEffectSettings("symbol")}];i.push({name:"shape",contents:s});const a=[];return e.cornerType&&e.cornerType.isInteractive&&a.push({name:"corners",type:"optionIcon",data:{attribute:e.cornerType,classPrefix:"corners"}},{name:"corner size",attribute:e.cornerRadius}),a.length&&i.push({name:"outline",contents:a}),{name:"symbol",type:"symbol",shapeType:"symbol",contents:i}}getSymbolContentSettings(){const t=this.creator.logo.state.type,e=t.state.elements.symbol.state.type.state,s=t.state.elements.symbolContent.state.type.state,i=()=>{const t=e.hasStroke.value||s.ring.active.value||s.hole.active.value;this.enableTab("cut-out","fill",t),this.enableTab("cut-out","effect",t)},a=[{name:"line",icon:"stroke",type:"boolSlider",data:{bool:e.hasStroke,slider:e.strokeOffset,onBoolUpdate:t=>{this.enableAttribute(e.strokeWidth,t),i()}}},{name:"line position",icon:"stroke-offset",attribute:e.strokeWidth},{name:"ring",type:"boolSlider",data:{bool:s.ring.active,slider:s.ring.width,onBoolUpdate:t=>{this.enableAttribute(s.ring.position,t),i()}}}];a.push(...this.getInteractiveAttributes(s.ring,{ignore:["active","width"]})),a.push({name:"hole",type:"boolSlider",data:{bool:s.hole.active,slider:s.hole.position,onBoolUpdate:()=>{i()}}});const n=[];return n.push({name:"fill",contents:this.getFillSettings("symbolContent",!0)}),n.push({name:"effect",contents:this.getEffectSettings("symbolContent")}),n.push({name:"shapes",contents:a}),{name:"cut-out",item:"symbolContent",shapeType:"symbolContent",contents:n}}getGradientSettings(t){return[{name:"gradient",type:"boolSlider",data:{bool:t.gradient.active,slider:t.gradient.range,onBoolUpdate:e=>{this.enableAllAttributesExcept([t,t.gradient.active,t.gradient.range],e)}}},{name:"type",type:"optionIcon",data:{attribute:t.gradient.type,classPrefix:"gradient",onUpdate:e=>{this.enableAttribute(t.gradient.radius,t.gradient.active.value&&1===e)}}}].concat(this.getInteractiveAttributes(t.gradient,{ignore:["active","range","type"]}))}getBackgroundSettings(){return this.creator.logo.state.type,{name:"background",shapeType:"background",contents:[{name:"fill",contents:this.getFillSettings("background",!0)},{name:"effect",contents:this.getEffectSettings("background")}]}}getIconSettings(){const t=this.creator.logo.state.type,e=t.state.elements.icon,s=[];return s.push({name:"icon",icon:"shape",contents:[{name:"replace icon",icon:"icon",type:"icon",data:{state:e.state}},{name:"size",attribute:t.hasSymbol?e.state.sizeFactor:t.state.sizeFactor},{name:"rotation",attribute:e.state.rotation},{name:"flip",attribute:e.state.isFlipped}]}),t.hasSymbol?s.push({name:"fill",contents:this.getFillSettings("icon",!0)},{name:"effect",contents:this.getEffectSettings("icon")}):s.push({name:"fill",contents:this.getFillSettings("symbol",!0)},{name:"effect",contents:this.getEffectSettings("symbol")}),{name:"icon",shapeType:"icon",contents:s}}getDividerSettings(){const t=this.creator.logo.state.type,e=t.state.elements.divider.state.type.state,s=[];return s.push({name:"line",icon:"divider",item:"divider",contents:[{name:"length",type:"boolSlider",data:{bool:e.active,slider:e.width,onBoolUpdate:t=>{this.enableAllAttributesExcept([e.active,e.width],t)}}},{name:"type",type:"shape",data:{shape:t.state.elements.divider.state,classPrefix:"divider"}}].concat(this.getInteractiveAttributes(e,{ignore:["active","width","hasStroke"]}))}),s.push({name:"fill",contents:this.getFillSettings("divider",!0)}),s.push({name:"effect",contents:this.getEffectSettings("divider")}),{name:"divider",shapeType:"divider",contents:s}}getNameSettings(){const t=this.creator.logo.state.type,e=[],s=this.getTextSettings(t.state.elements.name.state);return e.push({name:"text",icon:"typography",contents:s}),e.push({name:"fill",contents:this.getFillSettings("name",!0)}),e.push({name:"effect",contents:this.getEffectSettings("name")}),e.push({name:"shadow",contents:this.getShadowSettings("nameShadow")}),(t.hasIcon||t.hasLetter)&&s.splice(2,0,{name:"size",attribute:t.hasTextInsideSymbol?t.state.elements.icon.state.sizeFactor:t.state.sizeFactor,transform:t=>1-t}),{name:"name",shapeType:"name",contents:e}}getSloganSettings(){const t=this.creator.logo.state.type,e=[];return e.push({name:"text",icon:"typography",contents:this.getTextSettings(t.state.elements.slogan.state)}),e.push({name:"fill",contents:this.getFillSettings("slogan",!0)}),e.push({name:"effect",contents:this.getEffectSettings("slogan")}),{name:"slogan",shapeType:"slogan",contents:e}}getMonogramSettings(){const t=this.creator.logo.state.type;return{name:"monogram",shapeType:"monogram",contents:[{name:"text",icon:"typography",contents:this.getTextSettings(t.state.elements.letter.state)},{name:"fill",contents:this.getFillSettings("icon",!0)},{name:"effect",contents:this.getEffectSettings("icon")}]}}getFillSettings(t,e){const s=this.creator.logo.state.type,i=s.state.colors.state,a=s.getLayerFromID(t),n=a?a[0].color:i[t],o={name:"color",type:"hex",icon:"hue",data:{hsv:n,attribute:n,id:t}};return e?[o].concat(this.getGradientSettings(n)):[o]}getEffectSettings(t){const e=this.creator.logo.state.type,s=e.state.effects,i=e.getLayerFromID(t),a=i?i[0].effect.state:s[t].state,n=a.type.state;return[{name:"strength",type:"boolSlider",data:{bool:n.active,slider:n.strength,onBoolUpdate:t=>{this.enableAllAttributesExcept([n.active,n.strength],t)}}},{name:"type",type:"shape",data:{shape:a,classPrefix:"effect"}}].concat(this.getInteractiveAttributes(n,{ignore:["active","strength"]}))}getShadowSettings(t){const e=this.creator.logo.state.type,s=e.state.elements[t].state,i=s.type.state,a=e.state.colors.state[t],n={name:"color",type:"hex",icon:"hue",data:{hsv:a,attribute:a,id:t,useLinks:!1}};return[{name:"size",type:"boolSlider",data:{bool:i.active,slider:i.size,onBoolUpdate:t=>{this.enableAllAttributesExcept([i.active,i.size],t),this.enableTab("name","shadow fill",t),this.enableTab("name","shadow effect",t)}}},{name:"type",type:"shape",data:{shape:s,classPrefix:"shadow"}}].concat(this.getInteractiveAttributes(i,{ignore:["active","size"]})).concat(n)}update(){let{showSameAttribute:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=this.creator.logo.state.type;let s=null;if(t){const t=this.screens.find((t=>t.isActive)),e=t.tabs.find((t=>t.isActive)),i=e.attributes.find((t=>t.isActive));s=[t.index,e.index,i.index]}this.structure=[this.getStructureSettings(),this.getBackgroundSettings()],e.state.elements.symbol&&(this.structure.push(this.getSymbolSettings()),this.structure.push(this.getSymbolContentSettings())),e.hasIcon&&this.structure.push(this.getIconSettings()),this.structure.push(this.getNameSettings(),this.getDividerSettings(),this.getSloganSettings()),e.state.elements.letter&&!e.hasIcon&&this.structure.push(this.getMonogramSettings()),this.screens=[],(0,_e.Z)(this.container).empty(),this.addControls({path:s})}addControls(){let{path:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=document.createDocumentFragment(),s=(0,_e.Z)("<div>").addClass("b-control").appendTo(e);if(this.items=(0,_e.Z)("<div>").addClass("b-control__screen-items").addClass("active").css({opacity:1,transform:"none"}).appendTo(s),this.buttonPrevious1=(0,_e.Z)("<div>").addClass("b-control__scroll-left1").appendTo(s),this.buttonNext1=(0,_e.Z)("<div>").addClass("b-control__scroll-right1").appendTo(s),this.buttonPrevious2=(0,_e.Z)("<div>").addClass("b-control__scroll-left2").appendTo(s),this.buttonNext2=(0,_e.Z)("<div>").addClass("b-control__scroll-right2").appendTo(s),this.buttonPrevious3=(0,_e.Z)("<div>").addClass("b-control__scroll-left3").appendTo(s),this.buttonNext3=(0,_e.Z)("<div>").addClass("b-control__scroll-right3").appendTo(s),this.contents=(0,_e.Z)("<div>").addClass("b-control__screen-contents").addClass("active").appendTo(s),this.buttons=new class{constructor(t,e){var s;(s="parent")in this?Object.defineProperty(this,s,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[s]=null,this.parent=t;const i=(0,_e.Z)("<div>").addClass("b-control__buttons");(0,_e.Z)("<div>").html(t.translations.cancel||"cancel").addClass("b-control__button--cancel").on("click",(t=>this.onCancel(t))).appendTo(i),(0,_e.Z)("<div>").html(t.translations.ok||"ok").addClass("b-control__button--confirm").on("click",(t=>this.onConfirm(t))).appendTo(i),this.div=i,i.appendTo(e)}onCancel(t){t.stopPropagation(),this.isAnimating||(this.parent.restoreState(),this.dismiss())}onConfirm(t){t.stopPropagation(),this.isAnimating||(this.parent.dismissStructureChange(),this.dismiss())}dismiss(){this.parent.creator.shapeSelector.hideSelected(),this.parent.screens.forEach((t=>{t.isActive&&t.deactivate()}))}}(this,s),this.saveButtons=new class{constructor(t,e){ps(this,"parent",null),ps(this,"isSaving",!1),ps(this,"div",null),ps(this,"$buttonSave",null),ps(this,"$buttonVariations",null),this.parent=t,this.div=(0,_e.Z)("<div>").addClass("b-control__save-buttons").addClass("active"),this.$buttonVariations=(0,_e.Z)("<div>").addClass("b-control__button--secondary").html(t.translations.logoVariations||"logo variations").on("click",(()=>{this.parent.creator.variations.activate(),this.parent.creator.variations.show()})),(0,_e.Z)(".js-logo-controls").hasClass("is-logged-in")?this.$buttonSave=(0,_e.Z)("<div>").addClass("b-control__button--confirm").html(t.translations.saveLogo||"save logo").on("click",(async()=>{if(!this.isSaving){this.isSaving=!0;try{await this.parent.onSave()}catch(t){Qe.Z.captureError(t,{})}this.isSaving=!1}})):(this.$buttonSave=(0,_e.Z)("<div>").html(t.translations.registerAndSave||"register and save").addClass("b-control__button--confirm js-show-modal").data("modal","js-modal-register"),(0,_e.Z)(".js-modal-register").find(".js-submit-register").off().on("click",(async t=>{if(t.preventDefault(),t.stopPropagation(),!this.isSaving){this.isSaving=!0;try{const t=JSON.stringify(this.parent.creator.logo.getState());await(0,Re.Z)(`${We.Vi.DOMAIN}/api/register`,{...(0,ds.Z)((0,_e.Z)(".js-register-form")[0]),savedLogoState:t},{error:"error registering your account",isInBody:!1,useServerError:!0,onSuccess:async()=>{await us.Z.trackRegister()}})}catch(t){}this.isSaving=!1}})),(0,_e.Z)(".js-modal-register").find(".js-submit-login").off().on("click",(async t=>{if(t.preventDefault(),t.stopPropagation(),!this.isSaving){this.isSaving=!0;try{const t=JSON.stringify(this.parent.creator.logo.getState());await(0,Re.Z)(`${We.Vi.DOMAIN}/api/account/login`,{...(0,ds.Z)((0,_e.Z)(".js-login-form")[0]),savedLogoState:t},{error:"error logging in",isInBody:!1,useServerError:!0})}catch(t){}this.isSaving=!1}}))),this.$buttonVariations&&this.$buttonVariations.appendTo(this.div),this.$buttonSave&&((0,_e.Z)("<div>").addClass("b-control__loading-icon").appendTo(this.div),this.$buttonSave.appendTo(this.div)),this.div.appendTo(e)}}(this,s),this.structure.forEach(((t,e)=>{const s=new class{constructor(t,e,s){cs(this,"tabs",[]),cs(this,"index",0),cs(this,"item",null),cs(this,"content",null),cs(this,"isActive",!1),cs(this,"tween",null),cs(this,"isAnimating",!1),this.parent=t,this.screen=e,this.index=s;const i=e.name,a=e.icon||i.replace(/ /g,"-");this.item=(0,_e.Z)("<div>").text(i).addClass(`b-control__screen-item icon-${a}`).appendTo(t.items),this.content=(0,_e.Z)("<div>").addClass("b-control__screen-content").appendTo(t.contents),this.items=(0,_e.Z)("<div>").addClass("b-control__tab-items").appendTo(this.content),this.contents=(0,_e.Z)("<div>").addClass("b-control__tab-contents").appendTo(this.content),this.item.on("click",(t=>{t.stopPropagation(),this.isAnimating||(this.parent.creator.shapeSelector.selectType(this.screen.shapeType),this.activate())})),this.label=(0,_e.Z)("<div>").addClass(`b-control__screen-label icon-${a}`).text(i).appendTo(this.items[0]),e.contents.forEach(((t,e)=>{this.tabs.push(new class{constructor(t,e,s){ls(this,"attributes",[]),ls(this,"index",0),ls(this,"item",null),ls(this,"content",null),ls(this,"items",null),ls(this,"contents",null),ls(this,"isActive",!1),this.parent=t,this.tab=e,this.index=s;const i=e.name,a=e.icon||i.replace(/ /g,"-");this.item=(0,_e.Z)("<div>").text(i).addClass(`b-control__tab-item icon-${a}`).appendTo(t.items),this.content=(0,_e.Z)("<div>").addClass("b-control__tab-content").appendTo(t.contents),this.items=(0,_e.Z)("<div>").addClass("b-control__attribute-items").appendTo(this.content),this.contents=(0,_e.Z)("<div>").addClass("b-control__attribute-contents").appendTo(this.content),this.item.on("click",(t=>{t.stopPropagation(),(0,_e.Z)(this.item).hasClass("disabled")||(this.tab.shapeType?this.parent.parent.creator.shapeSelector.selectType(this.tab.shapeType):this.parent.parent.creator.shapeSelector.selectType(this.parent.screen.shapeType),this.activate())})),e.contents.forEach(((t,e)=>{this.attributes.push(new class{constructor(t,e,s){rs(this,"index",0),rs(this,"controls",[]),rs(this,"item",null),rs(this,"content",null),rs(this,"isActive",!1),this.parent=t,this.attribute=e,this.index=s,this.creator=this.parent.parent.parent.creator;const i=e.icon||e.name.replace(/ /g,"-");this.item=(0,_e.Z)("<div>").text(e.name).addClass(`b-control__attribute-item icon-${i}`).appendTo(t.items),this.content=(0,_e.Z)("<div>").addClass("b-control__attribute-content").appendTo(t.contents),this.control=e.attribute?this.addControl(e):this.addDataControl(e.type,e.data),this.control&&this.control.div&&this.content[0].appendChild(this.control.div),this.item.on("click",(t=>{t.stopPropagation(),(0,_e.Z)(this.item).hasClass("disabled")||this.activate()}))}addDataControl(t,e){let s=null;switch(t){case"font":s=new class{constructor(){let{data:t=null,creator:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ts(this,"div",null),ts(this,"creator",null),ts(this,"$content",null),ts(this,"$button",null),ts(this,"$text",null),ts(this,"$categories",null),ts(this,"$fontList",null),ts(this,"$close",null),ts(this,"state",null),ts(this,"stylesheet",null),ts(this,"fonts",[]),ts(this,"categories",[]),ts(this,"category",null),ts(this,"slider",null),ts(this,"weight",null),ts(this,"weightSetIndex",null),ts(this,"skipUpdateList",!1),this.creator=e,this.state=t.state,this.weightSets={"sans-serif":[{name:"light",weights:[0,1,2]},{name:"regular",weights:[3]},{name:"bold",weights:[4,5,6,7,8]}],serif:[{name:"light",weights:[0,1,2]},{name:"regular",weights:[3]},{name:"bold",weights:[4,5,6,7,8]}]},this.stylesheet=(0,_e.Z)(".js-font-styles")[0],this.stylesheet||(this.stylesheet=(0,_e.Z)("<style>").addClass("js-font-styles").appendTo(document.head)[0]);const s=(0,_e.Z)("<div>").addClass("c-button-text");this.$content=(0,_e.Z)(".js-font-selector"),this.$categories=(0,_e.Z)(".js-font-selector__categories"),this.$weight=(0,_e.Z)(".js-font-selector__weight"),this.$close=(0,_e.Z)(".js-font-selector__close"),this.$button=(0,_e.Z)("<div>").text("select").addClass("c-button-text__button").appendTo(s),this.$text=(0,_e.Z)("<span>").text(`${this.state.font.family.value} / ${this.state.font.variant.value}`).addClass("c-button-text__text").appendTo(s),this.div=s[0]}activate(){this.$button.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.show()})),this.$close.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.deactivate(),this.removeContent(),this.hide()}))}deactivate(){[this.$button,this.$fontList,this.$categories,this.$close].forEach((t=>{t&&t.off()})),this.option&&this.option.deactivate&&this.option.deactivate()}onUpdate(){}updateOptions(){this.$weight.empty();const t=this.weightSets[this.category];if(this.weightSets[this.category]){const e="regular"===this.weight?4:Number(this.weight)/100,s=t.findIndex((t=>t.weights.includes(e-1)));-1!==s&&(this.option=new Ye.Z({attribute:{attribute:new I.Z(Object.keys(t).map(Number)).setValue(s).setLabel("style",t.map((t=>t.name))),onUpdate:t=>{this.$fontList&&(this.weightSetIndex=t,this.skipUpdateList||this.updateList(),Xe.Z.closeMenu())}}}),(0,_e.Z)(this.option.div).appendTo(this.$weight),this.option.activate())}else this.option=null}updateList(){let{isFocusingOnFont:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_e.Z)(".js-overlay-scrollable")[0].scrollTop=0;let e=null;const s=document.createDocumentFragment(),i=y((0,Je.Z)(this.state.text.value)," ,AZ,az");let a=null;this.fonts.filter((t=>{const e=this.weightSets[this.category];let s=!0;if(e){const i="regular"===t.weight?4:Number(t.weight)/100;s=e.findIndex((t=>t.weights.includes(i-1)))===this.weightSetIndex}return t.category===this.category&&s})).sort(((t,e)=>`${t.family}${t.style}${t.weight}`.localeCompare(`${e.family}${e.style}${e.weight}`))).forEach((t=>{const n=(0,_e.Z)("<div>").addClass("b-font-selector__font").data("category",t.category).data("family",t.family).data("variant",t.variant).appendTo(s),o=(0,_e.Z)("<div>").addClass("b-font-selector__font-inner").appendTo(n);(0,_e.Z)("<div>").addClass("b-font-selector__name").text(t.family).appendTo(o),(0,_e.Z)("<div>").addClass("b-font-selector__text").text((0,Je.Z)(this.state.text.value)).css({fontFamily:t.family,fontStyle:t.style,fontWeight:t.weight}).appendTo(o),t.family===this.state.font.family.value&&t.variant===this.state.font.variant.value&&(e=n[0],n.addClass("active"));const r=this.getFontURL(t.file,i),l=`@font-face {font-family: "${t.family}"; font-weight: ${t.weight}; font-style: ${t.style}; src: url(${r});}`,c=this.stylesheet.sheet;if(h.xy.LOADED_FONTS.includes(l))n.addClass("loaded").css({transitionDelay:0,transition:"none"});else{const t=()=>{c.insertRule(l,c.cssRules.length),n.addClass("loaded"),h.xy.LOADED_FONTS.push(l)};fetch(r).then((()=>{t()})).catch((e=>{a=e,t()}))}})),a&&Qe.Z.captureError(a),this.$fontList.empty()[0].appendChild(s),t&&e&&((0,_e.Z)(".js-overlay-scrollable")[0].scrollTop=Math.floor(e.offsetTop-window.innerHeight/2))}getFontURL(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?`${h.Y3.FONT_PATH_MIN}${t}`:`${h.Y3.FONT_PATH}${t}`}async show(){(0,_e.Z)(".js-font-selector-content").addClass("active"),this.$content.addClass("active"),this.$categories.off().on("click",(t=>this.onCategoryClick(t))),this.$fontList=(0,_e.Z)(".js-font-selector__fonts"),this.$fontList.off().on("click",(t=>this.onFontClick(t))),this.fonts=[];const t=(0,Je.Z)(this.state.text.value);if(h.Y3.FONTS.items.forEach((e=>{e.variants.forEach((s=>{if(y(t,e.glyphs,s)){const t={category:e.category,family:e.family,file:e.files[s],style:-1===s.indexOf("italic")?"normal":"italic",weight:s.replace("italic",""),variant:s};this.categories.includes(e.category)||this.categories.push(e.category),this.fonts.push(t),t.family===this.state.font.family.value&&t.variant===this.state.font.variant.value&&(this.category=e.category,this.weight=t.weight)}}))})),!this.category||!this.weight){const t=h.Y3.FONTS.items.find((t=>"Open Sans"===t.family));this.category=t.category,this.weight="regular"}if(this.$categories.empty(),this.categories.forEach((t=>{const e=(0,_e.Z)("<div>").addClass("b-navigation__item b-font-selector__category").data("category",t).appendTo(this.$categories[0]).text(t);t===this.category&&e.addClass("active")})),!this.fonts.length)throw new Error("no font match");this.skipUpdateList=!0,this.updateOptions(),Xe.Z.setNavigation(this.$content,this.$content.find(".js-modal-navigation")),await Ke.Z.show(),this.updateList({isFocusingOnFont:!0}),this.skipUpdateList=!1}onFontClick(t){this.$fontList.off("click");let e=t.target;for(;e&&!(0,_e.Z)(e).data("family");)e=e.parentNode;this.activateFont({family:(0,_e.Z)(e).data("family"),variant:(0,_e.Z)(e).data("variant")})}onCategoryClick(t){let e=t.target;for(;e&&!(0,_e.Z)(e).data("category");)e=e.parentNode;this.category=(0,_e.Z)(e).data("category"),this.categories.forEach(((t,e)=>{const s=this.$categories.children().get(e);s.toggleClass("active",s.data("category")===this.category)})),this.weight="regular",this.updateList(),this.updateOptions(),Xe.Z.closeMenu()}removeContent(){if(this.option&&this.option.div){const t=(0,_e.Z)(this.option.div);t&&t.length&&t.remove()}this.$fontList&&this.$fontList.length&&this.$fontList.empty()}async hide(){this.$content.removeClass("active"),await Ke.Z.hide(),(0,_e.Z)(".js-variation-selector-content").removeClass("active"),Xe.Z.unsetNavigation()}async activateFont(t){this.creator.saveStateBeforeStructureChange((()=>{this.state.font.family.set(t.family),this.state.font.variant.set(t.variant)})),this.creator.recreate({showSameAttribute:!0}),this.removeContent(),await this.hide()}}({creator:this.creator,data:e});break;case"icon":s=new is.Z({creator:this.creator,data:e});break;case"hex":s=new class{constructor(){let{data:t=null,creator:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ss(this,"div",null),ss(this,"creator",null),ss(this,"input",null),ss(this,"hsv",null),ss(this,"attribute",null),ss(this,"linked",[]),ss(this,"linkedIndex",null),ss(this,"id",null),ss(this,"$swatch",null),ss(this,"$name",null),ss(this,"$linked",null),ss(this,"$links",null),ss(this,"switch",null),ss(this,"boolAttribute",null),ss(this,"links",null),ss(this,"useLinks",null),this.creator=e,this.hsv=t.hsv,this.attribute=t.attribute,this.id=t.id,this.useLinks=void 0===t.useLinks||t.useLinks;const s=this.creator.logo.state.type,i=(0,_e.Z)("<div>").addClass("c-hex"),a=(0,_e.Z)("<div>").addClass("c-hex__wrap").appendTo(i);if(this.$swatch=(0,_e.Z)("<div>").addClass("c-hex__swatch").appendTo(a),this.useLinks&&(this.links=s.state.links,this.linked=this.links[this.id].links.options.filter((t=>s.ids.includes(t))),this.links[this.id].links.value&&!this.linked.includes(this.links[this.id].links.value)&&(this.links[this.id].links.set(0),this.links[this.id].linkedTo.set("")),this.links[this.id].linkedTo.value&&!this.linked.includes(this.links[this.id].linkedTo.value)&&this.links[this.id].linkedTo.set(this.linked[0]),this.linked&&this.linked.length>0)){let i=this.links[this.id].linkedTo.value;i&&s.ids.includes(i)||(i=this.links[this.id].links.value),this.boolAttribute=new T.Z,this.switch=new He.Z({creator:e,attribute:{attribute:this.boolAttribute,onUpdate:()=>{this.onSwitchUpdate(this.boolAttribute.value),t.onBoolUpdate&&t.onBoolUpdate(this.boolAttribute.value)},onClick:t=>{this.creator.saveStateBeforeStructureChange((()=>{this.links[this.id].active.set(t),this.links[this.id].linkedTo.set(i)})),this.creator.recreate({showSameAttribute:!0})}},hasLabels:!1}),(0,_e.Z)(this.switch.div).appendTo(a),this.$linked=(0,_e.Z)("<div>").addClass("c-hex__linked").appendTo(a),(0,_e.Z)("<div>").addClass("c-hex__text").text("link to:").appendTo(this.$linked);const o=[];this.linked.forEach(((t,e)=>{const s=t===i;s&&(this.linkedIndex=e);const a=(0,_e.Z)("<div>").addClass("c-hex__link").toggleClass("active",s).appendTo(this.$linked);o.push(a[0]);let r=(0,n.Z)(t);h.F2[r]&&(r=h.F2[r]),(0,_e.Z)("<div>").addClass("icon").addClass(`icon-${r}`).appendTo(a)})),this.$links=(0,_e.Z)(o),this.$name=(0,_e.Z)("<div>").addClass("c-hex__text").appendTo(this.$linked)}this.div=i[0]}onSwitchUpdate(t){this.useLinks&&(this.$linked.toggleClass("active",t),t?this.enableLink():this.disableLink())}activate(){this.switch&&(this.links[this.id].active.value&&(this.linkedIndex=this.linked.findIndex((t=>t===this.links[this.id].linkedTo.value)),-1===this.linkedIndex&&(this.linkedIndex=null),null!==this.linkedIndex&&(this.boolAttribute.set(!0),this.link(this.linkedIndex))),this.switch.activate()),this.$swatch.on("click",(()=>{var t;null!==(t=this.creator.picker.swatchColors)&&void 0!==t&&t.length||this.creator.picker.setSwatchColors(Object.values(this.creator.logo.state.type.state.colors.state).reduce(((t,e)=>{var s;const i=null==e||null===(s=e.color)||void 0===s?void 0:s.original;return i&&!t.includes(i)&&t.push(i),t}),[])),this.creator.picker.show(this.getHex(),(t=>{if(!this.creator.picker.hasBeenDragged){const t=this.$swatch.offset();this.creator.picker.position(t.left,t.top-this.creator.picker.$picker.height()+this.$swatch.height())}this.setHex(t),this.onUpdate()}))})),this.onUpdate(),(0,es.Z)()}enableLink(){this.useLinks&&(this.$links.each(((t,e)=>{(0,_e.Z)(t).on("click",(()=>{this.linkedIndex!==e&&(this.creator.saveStateBeforeStructureChange((()=>{this.links[this.id].linkedTo.set(this.linked[e]),this.link(e)})),this.creator.recreate({showSameAttribute:!0}))}))})),null!==this.linkedIndex&&this.link(this.linkedIndex))}disableLink(){this.useLinks&&this.$links.off()}link(t){if(!this.useLinks)return;this.linkedIndex=t,this.$links.each(((e,s)=>{(0,_e.Z)(e).toggleClass("active",t===s)}));let e=(0,n.Z)(this.linked[t]);h.LI[e]&&(e=h.LI[e]),this.$name.text(e)}deactivate(){this.$links&&this.$links.each((t=>{(0,_e.Z)(t).off("click")})),this.switch&&this.switch.deactivate&&this.switch.deactivate(),this.$swatch.off("click"),this.creator.picker.hide()}async onUpdate(){const t=this.getHex();let e=this.id;this.useLinks&&this.links[e].active.value&&(e=this.links[e].linkedTo.value||this.id);const s=this.creator.logo.state.type.getLayerFromID(e)?this.creator.logo.state.type.getLayerFromID(e)[0].id:e;this.creator.logo.state.type.state.colors.state.scheme[s].set(t),this.$swatch.css({backgroundColor:t}),this.creator.draw()}setColor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.hsv;this.copyAttributes(e,t),this.copyAttributes(e.gradient,t.gradient)}getHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hsv;return E.Z.hsv2hex(t.hue.value,t.saturation.value,t.value.value)}setHex(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.hsv;if(!t||!/^#?(([a-f\d]){3}|([a-f\d]){6})$/i.test(t))return;const s=E.Z.hex2hsv(t);e.hue.set(s[0]),e.saturation.set(s[1]),e.value.set(s[2])}}({creator:this.creator,data:e});break;case"shape":s=new class{constructor(){let{data:t=null,creator:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ns(this,"div",null),ns(this,"creator",null),ns(this,"shape",null),ns(this,"models",[]),ns(this,"$values",[]),ns(this,"isScrollable",!0),ns(this,"onUpdateCallback",null),this.creator=e,this.shape=t.shape,this.onUpdateCallback=t.onUpdate,this.models=void 0!==t.models?t.models:this.shape.models;const s=t.classPrefix||"",i=(0,_e.Z)("<div>").addClass("c-shape");this.models.forEach(((t,e)=>{const a=(0,_e.Z)("<div>").addClass("c-shape__value").appendTo(i);(0,_e.Z)("<div>").addClass("icon").addClass(`icon-${s?`${s}-`:""}${(0,n.Z)(t)}`).appendTo(a),this.$values.push(a)})),this.div=i[0]}activate(){this.$values.forEach(((t,e)=>{t.on("click",(()=>this.onUpdate(e)))})),this.update(this.models.findIndex((t=>t===this.shape.model.value)))}deactivate(){this.$values.forEach((t=>t.off("click")))}onUpdate(t){this.update(t),this.creator.saveStateBeforeStructureChange((()=>{this.shape.model.set(this.models[t]),this.onUpdateCallback&&this.onUpdateCallback(this.models[t])})),this.creator.recreate({showSameAttribute:!0})}update(t){this.$values.forEach(((e,s)=>{e.toggleClass("active",s===t)}))}}({creator:this.creator,data:e});break;case"optionIcon":s=new os.Z({creator:this.creator,data:e});break;case"boolSlider":s=new qe.Z({creator:this.creator,data:e});break;default:throw new Error("invalid control type")}return s}addControl(t){const e=t.attribute;let s=null;return e instanceof Z.Z||e instanceof F.Z?s=new as.Z({creator:this.creator,attribute:t}):e instanceof I.Z?s=new Ye.Z({creator:this.creator,attribute:t}):e instanceof S.Z?s=new class{constructor(){let{attribute:t=null,creator:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hs(this,"div",null),hs(this,"creator",null),hs(this,"attribute",null),hs(this,"input",null),hs(this,"onUpdateCallback",null),this.creator=e,this.attribute=t.attribute,this.onUpdateCallback=t.onUpdate;const s=(0,_e.Z)("<div>").addClass("c-text");this.input=(0,_e.Z)("<input>").addClass("c-text__value").attributes({type:"text",id:`input-${(0,o.Z)()}`,name:`input-${(0,o.Z)()}`,maxlength:h.UI.MAX_TEXT_LENGTH}).appendTo(s),this.input[0].value=this.attribute.value,this.div=s[0]}activate(){this.input.on("input",(()=>this.onUpdate())),this.input[0].value=this.attribute.value,this.onUpdate()}deactivate(){this.input.off("input")}onUpdate(){this.attribute.set(this.input[0].value),this.onUpdateCallback&&this.onUpdateCallback(this.attribute.value),this.creator.draw()}}({creator:this.creator,attribute:t}):e instanceof T.Z?s=new He.Z({creator:this.creator,attribute:t}):e instanceof $&&(s=new class{constructor(){let{attribute:t=null,creator:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ve(this,"div",null),Ve(this,"creator",null),Ve(this,"attribute",null),Ve(this,"control",null),this.creator=e,this.attribute=t.attribute;const s=(0,_e.Z)("<div>").addClass("c-button-text");this.control=(0,_e.Z)("<div>").addClass("c-button-text__button").text("randomize").appendTo(s),this.div=s[0]}activate(){this.control.on("click",(()=>this.onUpdate()))}deactivate(){this.control.off("click")}onUpdate(){this.attribute.randomize(),this.updateState()}updateState(){this.creator.draw()}}({creator:this.creator,attribute:t})),s}activate(){this.isActive||(this.isActive=!0,this.item.addClass("active"),this.content.addClass("active"),this.parent.attributes.forEach(((t,e)=>{e!==this.index&&t.deactivate&&t.deactivate()})),this.control&&this.control.activate(),this.parent.parent.parent.onResize())}deactivate(){this.isActive&&(this.isActive=!1,this.item.removeClass("active"),this.content.removeClass("active"),this.control&&this.control.deactivate&&this.control.deactivate(),this.parent.parent.parent.onResize())}}(this,t,e))}))}activate(){if(this.isActive)return;const t=this.parent.tabs.findIndex((t=>t.isActive));-1===t||this.parent.tabs[t].attributes.findIndex((t=>t.isActive)),this.isActive=!0,this.item.addClass("active"),this.content.addClass("active"),this.items.addClass("active"),this.contents.addClass("active"),this.parent.tabs.forEach(((t,e)=>{e!==this.index&&t.deactivate()}));let e=null;e=this.attributes[0],e&&e.activate(),this.parent.parent.onResize()}deactivate(){this.isActive&&(this.isActive=!1,this.item.removeClass("active"),this.content.removeClass("active"),this.items.removeClass("active"),this.contents.removeClass("active"),this.attributes.forEach((t=>{t.deactivate&&t.deactivate()})),this.parent.parent.onResize())}}(this,t,e))}))}activate(){let{skipAnimation:t=!1,skipSaveState:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isActive=!0,this.isAnimating=!0,this.parent.onResize();const s=this.tabs.findIndex((t=>t.isActive));let i=-1===s?0:s;for(;i<this.tabs.length&&this.tabs[i].item.hasClass("disabled");)i++;this.tabs[i].activate(),e||this.parent.saveState(),this.tween=new Ge.Z((t=>{this.parent.items.css({opacity:1-t.value,transform:`translate3d(0, ${-.5*t.value}rem, 0)`}),this.parent.saveButtons.div.css({opacity:1-t.value,transform:`translate3d(0, ${-.5*t.value}rem, 0)`}),this.parent.contents.css({opacity:t.value,transform:`translate3d(0, ${.5*(1-t.value)}rem, 0)`}),this.parent.buttons.div.css({opacity:t.value,transform:`translate3d(0, ${.5*(1-t.value)}rem, 0)`})}),t?0:.35).easing(h.Xt.OUT).onStart((()=>{this.item.addClass("active"),this.content.addClass("active"),this.items.addClass("active"),this.contents.addClass("active"),this.parent.contents.addClass("active"),this.parent.buttons.div.addClass("active"),this.parent.onResize()})).onComplete((()=>{this.isAnimating=!1,this.parent.items.removeClass("active"),this.parent.saveButtons.div.removeClass("active"),this.parent.creator.inputManager.resize()})).start()}deactivate(){let{skipAnimation:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isActive&&(this.isActive=!1,this.isAnimating=!0,this.tween=new Ge.Z((t=>{this.parent.items.css({opacity:t.value,transform:`translate3d(0, ${-.5*(1-t.value)}rem, 0)`}),this.parent.saveButtons.div.css({opacity:t.value,transform:`translate3d(0, ${-.5*(1-t.value)}rem, 0)`}),this.parent.contents.css({opacity:1-t.value,transform:`translate3d(0, ${.5*t.value}rem, 0)`}),this.parent.buttons.div.css({opacity:1-t.value,transform:`translate3d(0, ${.5*t.value}rem, 0)`})}),t?0:.35).easing(h.Xt.OUT).onStart((()=>{this.parent.items.addClass("active")})).onComplete((()=>{this.isAnimating=!1,this.item.removeClass("active"),this.content.removeClass("active"),this.parent.saveButtons.div.addClass("active"),this.parent.buttons.div.removeClass("active"),this.parent.contents.removeClass("active"),this.parent.onResize(),this.tabs.forEach((t=>{t.deactivate()}))})).start())}}(this,t,e);this.screens.push(s)})),this.container.appendChild(e),t){const e=this.screens[t[0]],s=e.tabs[t[1]],i=s.attributes[t[2]];e.activate({skipAnimation:!0}),s.activate(),i.activate()}gs.Z.addModals(),this.onResize(!0)}}(e,{creator:this,translations:a}),this.shapeSelector=new class{constructor(){let{creator:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ys(this,"controls",null),ys(this,"svg",null),ys(this,"inputManager",null),ys(this,"elements",[]),ys(this,"group",null),ys(this,"tween",null),ys(this,"tweenDash",null),ys(this,"previousShape",0),ys(this,"dashLength",0),ys(this,"padding",10),ys(this,"selectedType",null),ys(this,"selectedElements",[]),this.creator=t,this.controls=t.controls,this.inputManager=t.inputManager,this.tween=new Ge.Z({opacity:0}).onUpdate((t=>{this.group&&this.svg&&this.svg.setAttributes(this.group,{opacity:t.opacity})})).easing(h.Xt.OUT)}onTweenDash(t){this.selectedElements.length&&this.selectedElements.forEach(((e,s)=>{this.svg&&this.svg.setAttributes(e,{"stroke-dashoffset":t.value*this.dashLength*2+s*this.dashLength})}))}onLeave(){this.tween.to({opacity:0},.35).start()}onEnter(){this.tween.to({opacity:1},.35).start()}onMove(t){const e=t.relativePoint.xNormalized*Number(this.svg.viewBox[2])+Number(this.svg.viewBox[0]),s=t.relativePoint.yNormalized*Number(this.svg.viewBox[3])+Number(this.svg.viewBox[1]),i=this.creator.logo.state.type.getShapeUnderPosition(e,s,this.padding,this.isActive);this.setSelectionOnShape(i,this.elements),i!==this.previousShape&&this.tween.from({opacity:0}).to({opacity:1},.35).restart(),this.previousShape=i}setSelectionOnShape(t,e){let s,i,a,n;0!==t&&this.svg&&(t?(s=t.worldBoundingBox.x-this.padding,i=t.worldBoundingBox.y-this.padding,a=t.worldBoundingBox.w+2*this.padding,n=t.worldBoundingBox.h+2*this.padding):(s=Number(this.svg.viewBox[0])+this.padding,i=Number(this.svg.viewBox[1])+this.padding,a=Number(this.svg.viewBox[2])-2*this.padding,n=Number(this.svg.viewBox[3])-2*this.padding),e.forEach((t=>{this.svg.setAttributes(t,{x:this.svg.fixFloat(s),y:this.svg.fixFloat(i),width:this.svg.fixFloat(a),height:this.svg.fixFloat(n)})})))}hasOverlay(){return(0,_e.Z)("body").hasClass("has-overlay")}onTap(t){if(this.hasOverlay())return;this.onMove(t),this.showSelected(),this.onLeave(),this.setSelectionOnShape(this.previousShape,this.selectedElements);const e=this.shapeToType(this.previousShape);this.selectedType=e,this.controls.activateItem(e)}shapeToType(t){if(null===t)return"background";const e=this.getMap().find((e=>e[0]===t));return e?e[1]:null}typeToShape(t){if("background"===t)return null;const e=this.getMap().find((e=>e[1]===t));return e?e[0]:0}isActive(t){if(null===t)return!0;let e=Boolean(t);return t&&(t.state.active?e=t.state.active.value:t.state.text&&(e=Boolean(t.state.text.value))),e}getMap(){const t=this.creator.logo.state.type;return[[t.shapeSymbol,"symbol"],[t.shapeSymbolContent,"symbolContent"],[t.shapeLetter,"monogram"],[t.shapeIcon,"icon"],[t.shapeName,"name"],[t.shapeSlogan,"slogan"],[t.shapeDivider,"divider"]].filter((t=>this.isActive(t[0])))}draw(t){this.inputManager.unmap(this.map),this.map=this.inputManager.map({element:t.svg,onMove:t=>this.onMove(t),onEnter:t=>this.onEnter(t),onLeave:t=>this.onLeave(t),onTap:t=>this.onTap(t)},this),t.svg.style.cursor="pointer",this.svg=t,this.group=t.add("g",{opacity:0}),this.selectedGroup=t.add("g",{opacity:0});const e=Number(t.viewBox[2])/this.creator.container.clientWidth;this.dashLength=3*e,this.elements=[];for(let s=0;s<2;s++)this.elements.push(t.addChild(this.group,t.createElement("rect",{fill:"none",stroke:0===s?"#fff":"#000","stroke-dasharray":t.fixFloat(2*this.dashLength),"stroke-dashoffset":t.fixFloat(s*this.dashLength*2),"stroke-width":t.fixFloat(e)}))),this.selectedElements.push(t.addChild(this.selectedGroup,t.createElement("rect",{fill:"none",stroke:0===s?"#fff":"#000","stroke-dasharray":t.fixFloat(this.dashLength),"stroke-dashoffset":t.fixFloat(s*this.dashLength),"stroke-width":t.fixFloat(e)})));this.selectType(this.selectedType)}selectType(t){if(t){const e=this.typeToShape(t);this.selectedType=t,(e&&e.worldBoundingBox.w&&e.worldBoundingBox.h||null===e)&&(this.setSelectionOnShape(e,this.selectedElements),this.showSelected())}}showSelected(){this.svg&&this.svg.setAttributes(this.selectedGroup,{opacity:1})}hideSelected(){this.selectedType=null,this.svg&&this.svg.setAttributes(this.selectedGroup,{opacity:0})}resize(){this.draw()}}({creator:this}),this.picker=new xs.Z({creator:this})),_e.Z.ready((()=>{vs.Z.trigger(),this.onResizeListener=(0,bs.Z)((()=>this.onResize()),.5),(0,_e.Z)(window).on("resize",this.onResizeListener)}))}getSVG(t,e){const s=new((arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||(this.useCanvas?f:u))({precision:h.Wj.PRECISION});if(this.useCanvas){const i=window.devicePixelRatio||1;s.setAttributes(s.svg,{width:t*i,height:e*i})}return s.setDimensions(t,e),s}showLoading(){(0,_e.Z)(this.container).removeClass("loaded")}hideLoading(){(0,_e.Z)(this.container).addClass("loaded")}getSymbolText(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\band\b/gi,"&").split(" ").map((t=>t.replace(/^(l|d)'([aeoui])/,"$2").replace(/^the$/,"").charAt(0))).join("").toUpperCase()||"?"}async create(){let{id:t=null,savedState:e=null,text:s=null,sloganText:i=null,symbolText:n=null,showSameAttribute:o=!1,hue:r=null,iconSVG:l=null,iconID:c=null,iconTerm:d=null,variation:u=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isCreating)return!1;this.showLoading(),this.logoID=t,this.isCreating=!0,window.cancelAnimationFrame(this.frameID),this.logoMockup&&At.Z.removeAll(this.logoMockup),this.logoMockup=null,this.isCreated=!1;let p=null,g=null,m=null,f=null;e&&a()(e.version,"1.0.x")&&(p=e.state,p.variation=u,e.text&&(g=e.text),e.sloganText&&(f=e.sloganText),e.symbolText&&(m=e.symbolText));const y=!s&&!i;We.Vi.IS_PRODUCTION_ENVIRONMENT||We.Vi.IS_STAGING_ENVIRONMENT,g=s||"My Brand New Logo",m=n||(g?this.getSymbolText(g):""),f=y?"":i,this.logo=new Fe({text:g,symbolText:m,sloganText:f,hue:"random"===r?null:r,saved:p,id:t,iconSVG:l,iconID:c,iconTerm:d,variation:u}),this.onResize();let v=0,x=null;for(;!this.isCreated&&v<h.UI.MAX_LOGO_CREATION_ERRORS&&!this.isDestroyed;)try{await this.logo.create(),this.isCreated=!0,x=this.getSVG(this.width,this.height),await this.logo.draw(x),this.controls&&this.controls.update({showSameAttribute:o})}catch(t){v++,this.isCreated=!1}return x&&(this.render(x),this.enableMockups&&this.drawMockups()),this.isCreated||(0,_e.Z)(this.container).addClass("error"),this.isCreating=!1,this.hideLoading(),this.logo}draw(){var t,e,s,i,a,n;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.mockupsComplete=!1,window.cancelAnimationFrame(this.frameID),this.isDestroyed||!this.isCreated||this.isCreating||(null===(t=this.logo)||void 0===t||null===(e=t.state)||void 0===e||null===(s=e.type)||void 0===s||s.cancelRendering(),null===(i=this.logoMockup)||void 0===i||null===(a=i.state)||void 0===a||null===(n=a.type)||void 0===n||n.cancelRendering(),this.logoMockup&&At.Z.removeAll(this.logoMockup),this.frameID=window.requestAnimationFrame((async()=>{if(!this.isCreated)return;const t=this.getSVG(this.width,this.height),e=await this.logo.draw(t,{cancelOnRedraw:!0,...o});e&&(this.render(t),e&&this.enableMockups&&(this.mockupsComplete=!0,await this.drawMockups()))})))}render(t){if(!this.isDestroyed)if(this.useCanvas){const e=encodeURIComponent(t.getText());this.image.src=`data:image/svg+xml;charset=utf-8,${e}`}else this.$logoContainer.empty().append(t.svg),this.shapeSelector&&this.shapeSelector.draw(t)}async drawMockups(){if(await At.Z.wait(this.logoMockup),this.logoMockup)try{this.logoMockup.loadState(this.logoMockup.state.type.state,this.logo.getState().state)}catch(t){}else this.logoMockup=new Fe({saved:this.logo.getState().state}),await this.logoMockup.create();for(const t of this.$mockups.elements){if(await At.Z.wait(this.logoMockup),this.isDestroyed)return;const e=(0,_e.Z)(t),s=this.getSVG(h.Wj.CONTENT_WIDTH,h.Wj.CONTENT_HEIGHT,f),i=e.data("is-black")||e.data("is-white");await this.logoMockup.draw(s,{cancelOnRedraw:!0,hasBackground:!(e.data("is-transparent")||i),isMonotone:i}),this.renderMockup(s,e)}}renderMockup(t,e){if(this.isDestroyed||null==e||!e.length)return;const s=e.find(".js-mockup-background"),i=e.find(".js-mockup-image");if(null==i||!i.length)return;s.css({"background-color":this.logoMockup.state.type.state.colors.state.background.color.original});const a=t.getTextWithPlaceholders(),n=1/(Number(e.data("content-scale"))||1),o={x:(h.Wj.CONTENT_WIDTH-h.Wj.CONTENT_WIDTH*n)/2,y:(h.Wj.CONTENT_HEIGHT-h.Wj.CONTENT_HEIGHT*n)/2,w:h.Wj.CONTENT_WIDTH*n,h:h.Wj.CONTENT_HEIGHT*n},r=Math.max(o.w/h.Wj.CONTENT_WIDTH,o.h/h.Wj.CONTENT_HEIGHT),l={WIDTH:h.Wj.CONTENT_WIDTH,HEIGHT:h.Wj.CONTENT_HEIGHT,VIEWBOX_X:t.fixNumber(o.x),VIEWBOX_Y:t.fixNumber(o.y),VIEWBOX_WIDTH:t.fixNumber(o.w),VIEWBOX_HEIGHT:t.fixNumber(o.h),BACKGROUND_X:t.fixNumber(o.x),BACKGROUND_Y:t.fixNumber(o.y),BACKGROUND_WIDTH:t.fixNumber(o.w),BACKGROUND_HEIGHT:t.fixNumber(o.h),ASPECT_RATIO:1,BACKGROUND_EFFECT_SCALE:`${t.fixFloat(r)}`,BACKGROUND_PATTERN_SCALE:`${t.fixFloat(1/n)}`,MONOTONE_COLOR:e.data("is-black")?"#000":"#fff"};let c=a;Object.keys(l).forEach((t=>{const e=l[t],s=new RegExp(`{{${t}}}`,"g");c=c.replace(s,e)})),i.empty().html(c)}saveStateBeforeStructureChange(t){this.savedStateBeforeStructureChange||(this.savedStateBeforeStructureChange=this.logo.getState(),this.mergedSavedStates=this.logo.getState(),this.controls.saveStateBeforeStructureChange()),t(),this.mergedSavedStates=fs(this.mergedSavedStates,this.logo.getState())}shapeSupportsText(t,e){const s=t.state.font.family.value,i=t.state.font.variant.value,a=h.Y3.FONTS.items.find((t=>t.family===s));return a?a.glyphs instanceof Array&&!a.glyphs[i]?(Qe.Z.captureError("font variant not found",{data:{family:s,variant:i}}),!1):y(e,a.glyphs,i):(Qe.Z.captureError("font family not found",{data:{family:s}}),!1)}validateTexts(){let{name:t=null,slogan:e=null,monogram:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(this.logo.state.type.shapeName&&!this.shapeSupportsText(this.logo.state.type.shapeName,t)||this.logo.state.type.shapeSlogan&&!this.shapeSupportsText(this.logo.state.type.shapeSlogan,e)||this.logo.state.type.shapeLetter&&!this.shapeSupportsText(this.logo.state.type.shapeLetter,s))}async recreate(){let{showSameAttribute:t=!1,state:e=(this.savedStateBeforeStructureChange?this.mergedSavedStates:this.logo.getState()),sloganText:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.controls&&this.controls.deactivate(),await At.Z.wait(this);const i={id:this.logoID,savedState:e,text:e.state.elements.name.text,showSameAttribute:t};s&&(i.sloganText=s),await this.create(i)}async onResize(){if(this.isDestroyed)return;const t=document.getElementById(this.id),e=Math.floor(t.offsetWidth),s=Math.floor(t.offsetHeight);if(this.inputManager&&this.inputManager.onResize(),!(0===e&&0===s||e===this.width&&s===this.height)){if(At.Z.removeAll(this),this.logoMockup&&At.Z.removeAll(this.logoMockup),this.width=e,this.height=s,this.useCanvas){this.showLoading();const t=window.devicePixelRatio||1;this.canvas.width=e*t||1,this.canvas.height=s*t||1,this.context=this.canvas.getContext("2d")}this.controls&&this.controls.onResize(),this.draw()}}destroy(){this.isDestroyed=!0,this.canvas&&(this.canvas=null),this.context&&(this.context=null),this.image&&((0,_e.Z)(this.image).off(),this.image=null),this.container&&(this.container=null),(0,_e.Z)(window).off("resize",this.onResizeListener),this.onResizeListener=null,this.logo=null}}},9448:(t,e,s)=>{"use strict";s.d(e,{Z:()=>p});var i=s(2457),a=s(2012),n=s(1221),o=s(9007),h=s(7148),r=s(8291),l=s(8323),c=s(468),d=s(3691);function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const p=class{constructor(){let{data:t=null,creator:e=null,callback:s=null,term:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,"div",null),u(this,"creator",null),u(this,"$content",null),u(this,"$button",null),u(this,"$text",null),u(this,"$term",null),u(this,"$iconList",null),u(this,"$load",null),u(this,"$loading",null),u(this,"$cancel",null),u(this,"$controls",null),u(this,"state",null),u(this,"term",null),u(this,"previousTerm",null),u(this,"isLoading",!1),u(this,"page",1),u(this,"iconsPerPage",98),u(this,"callback",null),this.creator=e,this.state=t&&t.state,this.callback=s;const o=(0,n.Z)("<div>").addClass("c-button-text");this.$content=(0,n.Z)(".js-icon-selector"),this.$button=(0,n.Z)("<div>").text("select icon").addClass("c-button-text__button").appendTo(o),this.$text=(0,n.Z)("<span>").addClass("c-button-text__text").appendTo(o),this.state?this.$text.text(this.state.term.value):i&&this.$text.text(i);const r=(0,n.Z)(".js-keyword-label"),c=(0,l.Z)(a.RY).map((t=>`"${t.replace("_"," ")}"`));r.text(`${r.data("text")} ${c.splice(0,2).join(", ")} or ${c[0]}`),this.$controls=(0,n.Z)(".js-icon-selector__controls"),this.$submit=(0,n.Z)(".js-icon-selector__submit"),this.$cancel=(0,n.Z)(".js-icon-selector__cancel"),this.$iconList=(0,n.Z)(".js-icon-selector__icons"),this.$loading=(0,n.Z)(".js-icon-selector__loading-icon"),this.$load=(0,n.Z)(".js-icon-selector__load"),this.$term=(0,n.Z)(".js-icon-selector__input"),this.relatedWords=new h.Z({element:this.$content.find(".js-keyword-list")[0],callback:t=>{this.isLoading||(this.$term[0].value=t,this.loadIcons())}}),this.div=o[0]}activate(){this.term=this.$term[0].value,this.page=Number(this.$content.data("page"))||1,this.$button.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.show()})),this.$content.on("keydown",(t=>{13===t.keyCode&&this.loadIcons()})),this.$iconList.on("click",(t=>this.onIconListClick(t))),this.$submit.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.loadIcons()})),this.$cancel.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.hide()})),this.$load.on("click",(t=>{t.stopPropagation(),t.preventDefault(),this.$load.hasClass("active")&&(this.$controls.removeClass("interactive"),this.loadPage())})),this.onUpdate()}loadIcons(){this.term=this.$term[0].value,this.term!==this.previousTerm&&(this.clear(),this.term&&(this.relatedWords.clear(),this.$controls.removeClass("active"),this.$content.removeClass("interactive"),this.relatedWords.add(this.term),this.previousTerm=this.term,this.loadPage()))}deactivate(){[this.$content,this.$button,this.$cancel,this.$submit,this.$load,this.$iconList].forEach((t=>{t&&t.off()}))}onUpdate(){this.creator&&this.creator.draw()}async show(){(0,n.Z)(".js-icon-selector-content").addClass("active"),this.$content.addClass("active"),await r.Z.show(),this.$content.hasClass("active")&&this.$term[0].focus()}clear(){this.$iconList.empty(),this.page=1}async loadPage(){this.isLoading||(this.isLoading=!0,await Promise.all([o.Z.delay(i.UI.MINIMUM_API_CALL_WAIT_TIME),(async()=>{try{const t=await(0,d.Z)(`${i.Vi.DOMAIN}/api/icons`,{iconsPerPage:this.iconsPerPage,page:this.page,term:this.term});t.error?c.Z.captureError(`failed: ${t.error}`):t.data&&this.addIcons(t.data)}catch(t){}})()]),this.$content.addClass("interactive"),this.$controls.addClass("interactive"),this.isLoading=!1,this.page++,this.$content.data("page",this.page))}addIcons(t){const e=document.createDocumentFragment(),s=t.sort(((t,e)=>(e.collections?e.collections.length:0)-(t.collections?t.collections.length:0)));for(let t=0;t<s.length;t++){const i=(0,n.Z)("<li>").addClass("b-icon-selector__icon").data("url",s[t].icon_url).data("id",s[t].id).data("term",s[t].term).appendTo(e),a=(0,n.Z)("<div>").appendTo(i),o=(0,n.Z)("<div>").addClass("b-icon-selector__icon-image loading").appendTo(a),h=new Image;(0,n.Z)(h).on("error",(()=>{o.addClass("error")})).on("load",(()=>{o.addClass("loaded").css({"background-image":`url(${h.src})`})})),h.src=s[t].preview_url}this.$iconList[0].appendChild(e),s.length===this.iconsPerPage&&this.$controls.addClass("active"),this.$load.toggleClass("active",s.length===this.iconsPerPage)}onIconListClick(t){try{let e=t.target;for(;e&&e.nodeName&&"li"!==e.nodeName.toLowerCase();)e=e.parentNode;if(!e)return;const s=(0,n.Z)(e);this.activateIcon({url:s.data("url"),id:s.data("id"),term:s.data("term")}),this.$iconList.off()}catch(t){c.Z.captureError(t)}}hide(){this.$content.removeClass("active"),r.Z.hide().then((()=>{(0,n.Z)(".js-icon-selector-content").removeClass("active")}))}async activateIcon(){let{url:t=null,id:e=null,term:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.creator&&this.creator.showLoading();const i=await fetch(t),a=await i.text();this.creator&&(this.creator.saveStateBeforeStructureChange((()=>{this.state.data.set(a),this.state.id.set(e),this.state.term.set(s)})),this.creator.recreate({showSameAttribute:!0})),this.callback&&this.callback({svg:a,id:e,term:s}),this.hide()}}},2842:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});const i=t=>"string"==typeof t?(t.match(/(?:\\\||[^|])+/g)||[]).reduce(((t,e)=>t.concat(e.replace(/\\\|/g,"|"))),[]).join(" "):""},1115:(t,e,s)=>{"use strict";function i(){return crypto?([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}s.d(e,{Z:()=>i}),s(5389)},6637:(t,e,s)=>{var i={"./star1.svg":1983,"./star2.svg":7611,"./star3.svg":7848,"./star4.svg":9791};function a(t){var e=n(t);return s(e)}function n(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=n,t.exports=a,a.id=6637},1983:(t,e,s)=>{"use strict";t.exports=s.p+"images/9a5774bc1f321b32.svg"},7611:(t,e,s)=>{"use strict";t.exports=s.p+"images/cd9bbdeff89bc885.svg"},7848:(t,e,s)=>{"use strict";t.exports=s.p+"images/ce84bb07f34be2b1.svg"},9791:(t,e,s)=>{"use strict";t.exports=s.p+"images/f661432634fd4219.svg"},5659:()=>{}}]);